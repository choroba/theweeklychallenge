<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Advent Calendar - December 3, 2022"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/advent-calendar-2022-12-03/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Advent Calendar - December 3, 2022."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 3, 2022.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/advent-calendar-2022-12-03/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 3, 2022</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 3, 2022</h2>
                    <div class="portfolio-meta">
                        <span>Saturday, Dec 3, 2022</span>|
                        <span> Tags:
                            Perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/2022-12-03.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h2 id="advent-calendar-2022blogadvent-calendar-2022"><a href="/blog/advent-calendar-2022"><strong>Advent Calendar 2022</strong></a></h2>
<h3 id="-nbsp-day-2blogadvent-calendar-2022-12-02-nbsp--nbsp-day-3-nbsp--nbsp-day-4blogadvent-calendar-2022-12-04-nbsp-">|   <a href="/blog/advent-calendar-2022-12-02"><strong>Day 2</strong></a>   |   <strong>Day 3</strong>   |   <a href="/blog/advent-calendar-2022-12-04"><strong>Day 4</strong></a>   |</h3>
<hr>
<p>The gift is presented by <code>Colin Crain</code>. Today he is talking about his solution to <a href="/blog/perl-weekly-challenge-191"><strong>&ldquo;The Weekly Challenge - 191&rdquo;</strong></a>. This is re-produced for <strong>Advent Calendar 2022</strong> from the original <a href="https://colincrain.com/2022/11/21/counting-cute/"><strong>post</strong></a> by him.</p>
<hr>
<br>
<h2 id="task-2-cute-list">Task #2: Cute List</h2>
<p>You are given an integer, <code>0 &lt; $n &lt;= 15</code>.</p>
<p>Write a script to find the number of orderings of numbers that form a cute list.</p>
<p>With an input <code>@list = (1, 2, 3, .. $n)</code> for positive integer <code>$n</code>, an ordering of <code>@list</code> is cute if for every entry, indexed with a base of 1, either</p>
<pre><code>1) $list[$i] is evenly divisible by $i,
or
2) $i is evenly divisible by $list[$i]
</code></pre>
<h2 id="example">Example</h2>
<pre><code>Input: $n = 2
Ouput: 2

Since $n = 2, the list can be made up of two integers only i.e. 1 and 2.
Therefore we can have two list i.e. (1,2) and (2,1).

@list = (1,2) is cute since $list[1] = 1 is divisible by 1 and $list[2] = 2 is divisible by 2.
</code></pre>
<br>
<h2 id="analysis">ANALYSIS</h2>
<br>
<p>Ok, this is a little confusing, I must say. Let’s start by rephrasing the description to help us figure out what we need to do here.</p>
<p>First, our data. We are fed a single value n. From this value we can then derive a list, which is further processed using this <code>“cute”</code> criteria.</p>
<p>Our computed list in play is composed of <code>n elements</code>, sectioning the incremental sequence starting with the <code>value 1</code> and incrementing by <code>1 until</code> we reach <code>n</code>. Hence, given the <code>value n</code> as input we will construct the list <code>(1, 2, 3, 4, … n )</code> to work with.</p>
<p>A “cute” list is defined as a specific rearrangement of this list such that the elements each conform to one of two rules. We will assume this isn’t an exclusive or — that validation by both rules would also be acceptable.</p>
<p>The rules are, for each element at <code>index i</code>, with the indexes starting at <code>1</code>, either:</p>
<br>
<pre><code>1. the list value at i is divisible by the index i, or
2. the index i is divisible by the list value at i
</code></pre>
<br>
<p>These two relationships share a similar <code>problem-space</code> but appear at first to be not particularly related in the values they produce. Some sort of list where each member satisfies at least one condition could well be called <code>“cute”</code>, but the summed conditions are not obviously meaningful, albeit <code>nicely symmetrical</code>. It works out, as we will see, that each condition takes care of half the range of permissible values at each index; one for numbers below the index, the other for numbers above it. But we’re getting ahead of ourselves. <code>We aren’t done yet</code>.</p>
<p>What we’re ultimately doing is not making cute lists, but rather counting cute lists. So we need to not only find a solution, but find a method for finding every solution so we can count them. Perhaps a larger pattern will emerge, drawn from linkages between the problem spaces of the two conditions.</p>
<br>
<h2 id="method-1">METHOD 1</h2>
<br>
<p>For smaller numbers of n, we can simply permute the lists, and check each value for qualfying in either one case or the other. We can simplify things by setting the array base index to 1 and using keys to iterate the indices. To do this will need to import the <code>Array::Base</code> module, as $[ is depricated and the core arybase module has been phased out.</p>
<p>To do the permutation we’ll import our old friend <code>Algorithm::Combinatorics</code>.</p>
<p>Printing the cute lists found, a couple of observations come right off the bat. First is that the unchanged list is always cute, as when the indices and their values align the index will always be divisible by the value there, satisfying condition number two.</p>
<p>Secondly, if we swap the head and tail index values then the first index 1 will always divide any number evenly, and hence satisfy condition number one. The last index will now contain the value 1, and hence will still satisfy condition number two as it will divide any index. The rest of the list, unchanged, will remain cute. So all base sequences with 2 or more elements to swap will start with two cute varieties. The remaining positional rearrangements are less obvious.</p>
<p>Unfortunately after about <code>n = 12</code>, things start to get messy with the factorial growth of the permutation count, and the output comes arrives increasingly, unusably slowly. But starting this way does give us something to work with to look for a larger pattern.</p>
<p>Of note there are a few things we can do to speed up our first attempt: one, that clever modern use of keys uses a function call to generate a list we already know the values for, so it’s terribly wasteful. Substituting the known sequence itself cuts the computational time about in half. Secondly, it seems to be fractionally faster to check the second condition first and short-circuit out earlier; this provides a tiny further bump in efficiency.</p>
<br>
<h2 id="method-2">METHOD 2</h2>
<br>
<p>Looking at the lists of lists produced does give us some insight as to the qualities of each postion in a cute ordering, and some of the allowable values at each position are quite limited. In the first position, for instance, there are only two: <code>1 and n</code>. So it seems we don’t need to ever even compute any arrangement that does not start with one or the other of these values. On the other hand, any number is divisible by 1. So do we really know these are the only values that can be there?</p>
<p>Looking at the the other positions leads us to a generalization:</p>
<p>The set of permissible values at each position is the <code>union</code> of all multiples of the index less than or equal to n (<code>by rule 1</code>) and all divisors of the index (<code>by rule 2</code>). Not every possible premitted value will be found in a cute list, but this still drastically limits the choices.</p>
<p>For <code>n = 12</code>, these look like:</p>
<br>
<pre><code>----+------------------------------------+------------------
i   |   permissible values               |  number of values
----+------------------------------------+------------------
1   |   1 .. 12                          |   12
2   |   1   2   4   6   8   10  12       |   7
3   |   1   3   6   9   12               |   5
4   |   1   2   4   8   12               |   5
5   |   1   5   10                       |   3
6   |   1   2   3   6   12               |   5
7   |   1   7                            |   2
8   |   1   2   4   8                    |   4
9   |   1   3   9                        |   4
10  |   1   2   5   10                   |   4
11  |   1   11                           |   2
12  |   1   2   3   4   6   12           |   6
----+------------------------------------+------------------
</code></pre>
<br>
<p>Multiplying this out reveals there are only <code>48,384,000</code> combinations of permissible values, versus all <code>12 factorial</code>, or <code>479,001,600</code> permutations of the sequence. That’s a significant gain. If we compute every combination and then check for <code>n unique</code> members this should be considerably less computationally expensive.</p>
<p>However we can go further and continuously cull the search space by only adding new values that are not already used. This quickly weeds out, as it turns out, most combinations. The number of cute arrays in play is kept in check, and we can count the cuteness to <code>n = 15</code> and beyond without any trouble.</p>
<p>And here it is in the <code>OEIS</code>:</p>
<br>
<pre><code>A320843       Number of permutations sigma of {1,2,...,n} such that
              sigma(i) divides i or i divides sigma(i) for 1 &lt;= i &lt;= n.

1, 1, 2, 3, 8, 10, 36, 41, 132, 250, 700, 750, 4010, 4237, 10680, 24679,
87328, 90478, 435812, 449586, 1939684, 3853278, 8650900, 8840110,
60035322, 80605209, 177211024, 368759752, 1380348224, 1401414640,
8892787136, 9014369784, 33923638848, 59455553072, 126536289568,
207587882368
</code></pre>
<br>
<p>Note this includes the value for <code>n = 0</code>, which our challenge does not. Conceptually that is a rather messy affair anyways.</p>
<br>
<h2 id="perl5-solution">PERL5 SOLUTION</h2>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Algorithm::Combinatorics <span style="color:#e6db74">qw( permutations )</span>;

<span style="color:#66d9ef">my</span> $limit <span style="color:#f92672">=</span> shift @ARGV <span style="color:#e6db74">//</span> <span style="color:#ae81ff">15</span>;

<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $n ( <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$limit ) {
    say <span style="color:#e6db74">&#34;n = $n&#34;</span>;
    say <span style="color:#e6db74">&#34;\t&#34;</span>, scalar find_cute_sigma($n), <span style="color:#e6db74">&#34; cute lists&#34;</span>;

    <span style="color:#75715e">## uncomment to see the actual cute lists. I certainly wanted to.</span>
<span style="color:#75715e">#     say &#34;   $_-&gt;@*&#34; for find_cute_sigma($n);</span>

    say <span style="color:#e6db74">&#39;&#39;</span>;
}

<span style="color:#75715e">## version 1: brute force. Works well up to about n = 12</span>
<span style="color:#75715e">##</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">find_cute</span> ( $n ) {
    <span style="color:#66d9ef">use</span> Array::Base <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">my</span> @out;
    <span style="color:#66d9ef">my</span> $iter <span style="color:#f92672">=</span> permutations( [ <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $n ] );
    <span style="color:#66d9ef">my</span> $p;
  ITER: <span style="color:#66d9ef">while</span> ($p <span style="color:#f92672">=</span> $iter<span style="color:#f92672">-&gt;</span><span style="color:#66d9ef">next</span>) {
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $n ) {
            <span style="color:#66d9ef">next</span> ITER <span style="color:#66d9ef">if</span> ( $i % <span style="color:#960050;background-color:#1e0010">$</span>p<span style="color:#f92672">-&gt;</span>[$i] <span style="color:#f92672">and</span> $p<span style="color:#f92672">-&gt;</span>[$i] % <span style="color:#960050;background-color:#1e0010">$</span>i );
        }
        push @out, $p;
    }
    <span style="color:#66d9ef">return</span> @out;
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">get_permissible</span> ( $pos, $max ) {
    [ grep { <span style="color:#f92672">not</span> $pos % <span style="color:#960050;background-color:#1e0010">$</span>_ <span style="color:#f92672">or</span> <span style="color:#f92672">not</span> $_ % <span style="color:#960050;background-color:#1e0010">$</span>pos } ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $max ) ]
}

<span style="color:#75715e">## version 2: compute all permissable digits at each position and grow</span>
<span style="color:#75715e">## lists from there.</span>
<span style="color:#75715e">##</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">find_cute_sigma</span> ( $n ) {
    <span style="color:#66d9ef">my</span> %div;

    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $pos ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $n ) {
        $div{$pos} <span style="color:#f92672">=</span> get_permissible( $pos, $n );
    }

    <span style="color:#66d9ef">my</span> @out <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;

    <span style="color:#75715e">## for each position create a new array for each previous for each permissible</span>
    <span style="color:#75715e">## value, unless that value is already present in the combination</span>
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $pos ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $n ) {
        <span style="color:#66d9ef">my</span> @new;
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $val ( $div{$pos}<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> ) {
            <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $combi (@out) {
                <span style="color:#66d9ef">unless</span> ( grep { $_ <span style="color:#f92672">==</span> $val }  $combi<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> ) {
                    push @new, [ $combi<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span>, $val ];
                }
            }
        }
        @out <span style="color:#f92672">=</span> @new;
    }

    <span style="color:#66d9ef">return</span> @out;
}
</code></pre></div><br>
<hr>
<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>
<p>|   <a href="/blog/advent-calendar-2022"><strong>Advent Calendar 2022</strong></a>   |</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

