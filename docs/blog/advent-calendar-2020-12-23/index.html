<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 23, 2020.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 23, 2020</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 23, 2020</h2>
                    <div class="portfolio-meta">
                        <span>Wednesday, Dec 23, 2020</span>|
                        <span> Tags:
                            Perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/2020-12-23.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h2 id="advent-calendar-2020blogadvent-calendar-2020"><a href="/blog/advent-calendar-2020"><strong>Advent Calendar 2020</strong></a></h2>
<h3 id="-day-22blogadvent-calendar-2020-12-22--day-23--day-24blogadvent-calendar-2020-12-24-">| <a href="/blog/advent-calendar-2020-12-22"><strong>Day 22</strong></a> | <strong>Day 23</strong> | <a href="/blog/advent-calendar-2020-12-24"><strong>Day 24</strong></a> |</h3>
<hr>
<p>The gift is presented by <strong>James Smith</strong>. Today he is talking about his solution to the task <code>Insert Interval</code> of <strong><a href="/blog/perl-weekly-challenge-092">&ldquo;The Weekly Challenge - 092&rdquo;</a></strong>. This is re-produced for <strong>Advent Calendar 2020</strong> from the original <a href="http://blogs.perl.org/users/james_curtis-smith/2020/12/perl-weekly-challenge-92.html"><strong>post</strong></a> by <strong>James Smith</strong>.</p>
<hr>
<h1 id="insert-interval">Insert Interval</h1>
<p>You are given a set of sorted non-overlapping intervals and a new interval.</p>
<p>Write a script to merge the new interval to the given set of intervals.</p>
<h2 id="example-1">Example 1:</h2>
<pre><code>Input $S = (1,4), (8,10); $N = (2,6)
Output: (1,6), (8,10)
</code></pre>
<h2 id="example-2">Example 2:</h2>
<pre><code>Input $S = (1,2), (3,7), (8,10); $N = (5,8)
Output: (1,2), (3,10)
</code></pre>
<h2 id="example-3">Example 3:</h2>
<pre><code>Input $S = (1,5), (7,9); $N = (10,11)
Output: (1,5), (7,9), (10,11)
</code></pre>
<hr>
<p>This was a much trickier proposition - but something I had come across before - with tiling variations, exons and BLAST hits on the human genome, and computing length of overlapping service from a database {with some really nasty MySQL code!}</p>
<p>This is simpler though as we know the regions we start with are all non-overlapping and in order.</p>
<ul>
<li>If the new region doesn&rsquo;t overlap any of the regions we just push it into the list and return. Whether that be at the front in the middle or at the end.</li>
</ul>
<p>We can test for the first two cases in the loop $new-&gt;{end} &lt; $element-&gt;{start}, and then return the list of elements before $new, $new, $element and the rest of the list.</p>
<ul>
<li>
<p>The last case is the end of the loop, and we just return the list with $new tacked on the end.</p>
</li>
<li>
<p>The problem comes when $new overlaps one of the regions. Firstly we work out the region containing both of the regions. Then we have to repeatedly see if this overlaps the next region and if it does repeat the process again. We then push this region onto the list.</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">int_insert</span> {
  <span style="color:#66d9ef">my</span>( $new, @list ) <span style="color:#f92672">=</span> @_;
  <span style="color:#66d9ef">my</span> @new_list;
  <span style="color:#66d9ef">while</span>(<span style="color:#66d9ef">my</span> $e <span style="color:#f92672">=</span> shift @list) {
    <span style="color:#66d9ef">return</span> [ @new_list, $new, $e, @list ] <span style="color:#66d9ef">if</span> $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>];
          <span style="color:#75715e">## The start of the next element is after the end of the new element -</span>
          <span style="color:#75715e">## so we can safely push the new element and the rest of the list (and return it)</span>
    <span style="color:#66d9ef">if</span>( $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] ) { <span style="color:#75715e">## Next element is to the left of the new</span>
      push @new_list,$e;        <span style="color:#75715e">## element so push and continue</span>
      <span style="color:#66d9ef">next</span>;
    }
    $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">if</span> $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>];
    $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">if</span> $e<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>];           <span style="color:#75715e">## Get start/end of first overlap...</span>
    <span style="color:#66d9ef">while</span>( @list <span style="color:#f92672">&amp;&amp;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;=</span> $list[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] ) {          <span style="color:#75715e">## this also overlaps the next list element</span>
      $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $list[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">if</span> $list[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> $new<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>]; <span style="color:#75715e">## Update the end of the region if rqd</span>
      shift @list;                                        <span style="color:#75715e">## Remove element from list;</span>
    }
    <span style="color:#66d9ef">return</span> [ @new_list, $new, @list ];  <span style="color:#75715e">## The rest of the list will be after the &#34;new&#34; element now</span>
  }                                     <span style="color:#75715e">## So we can safely push and return it....</span>
  <span style="color:#66d9ef">return</span> [ @new_list, $new ];           <span style="color:#75715e">## The new element must be after the list so we just</span>
                                        <span style="color:#75715e">## return it on the end of the list...</span>
}
</code></pre></div><p>The extension to this code to work out the overlap if you have two (or more) ascend non-overlapping sequences is the one that is needed to work out the overlapping transcript or <code>mRNA</code>/<code>cDNA</code>.</p>
<p>The code is therefore slightly more complex:</p>
<p>The parameters are the list of arrays of intervals</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">int_merge</span> {
  <span style="color:#66d9ef">my</span> ($result,@rest) <span style="color:#f92672">=</span> @_; <span style="color:#75715e">## List of arrays of ascending non-overlapping regions</span>
  <span style="color:#66d9ef">my</span> @a <span style="color:#f92672">=</span> @{$result}; <span style="color:#75715e"># First list.</span>
  <span style="color:#66d9ef">foreach</span> (@rest) {
    <span style="color:#66d9ef">my</span> @b <span style="color:#f92672">=</span> @{$_};
    <span style="color:#66d9ef">my</span> @new;
    <span style="color:#66d9ef">while</span>( @a <span style="color:#f92672">&amp;&amp;</span> @b ) { <span style="color:#75715e">## Stop when we get to one of the lists of intervals.</span>
      <span style="color:#66d9ef">if</span>( $a[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] ) { <span style="color:#75715e">## The first element of @a ends before the first element of @b</span>
        push @new, shift @a;
        <span style="color:#66d9ef">next</span>;
      }
      <span style="color:#66d9ef">if</span>( $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $a[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] ) { <span style="color:#75715e">## The first element of @b ends before the first element of @a</span>
        push @new, shift @b;
        <span style="color:#66d9ef">next</span>;
      }
      <span style="color:#75715e">## We have an overlap;</span>
      <span style="color:#75715e">## The new region starts as the overlap of the first elements of both lists</span>
      <span style="color:#66d9ef">my</span> $new_region <span style="color:#f92672">=</span> shift @a;
      $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">if</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>];
      $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">if</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>];
      shift @b; <span style="color:#75715e">## New region is the overlap of the two regions</span>
      <span style="color:#66d9ef">while</span>( @a <span style="color:#f92672">||</span> @b ) { <span style="color:#75715e">## Now we look through the two lists for elements that</span>
                          <span style="color:#75715e">## overlap this new region....</span>
                          <span style="color:#75715e">## Note we only stop if both of the next to elements</span>
                          <span style="color:#75715e">## don&#39;t overlap the region OR we get to the end of</span>
                          <span style="color:#75715e">## both lists</span>
        <span style="color:#66d9ef">if</span>( @a <span style="color:#f92672">&amp;&amp;</span> $a[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;=</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] ) { <span style="color:#75715e">## Element of first list overlaps -</span>
          $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $a[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">if</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $a[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>]; <span style="color:#75715e">## extend region if required</span>
          shift @a;                                <span style="color:#75715e">## and remove element</span>
          <span style="color:#66d9ef">next</span>;
        }
        <span style="color:#66d9ef">if</span>( @b <span style="color:#f92672">&amp;&amp;</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;=</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] ) { <span style="color:#75715e">## Element of first list overlaps -</span>
          $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">if</span> $new_region<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> $b[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>]; <span style="color:#75715e">## extend region if required</span>
          shift @b;                                <span style="color:#75715e">## and remove element</span>
          <span style="color:#66d9ef">next</span>;
        }
        <span style="color:#66d9ef">last</span>; <span style="color:#75715e">## Neither element overlaps so we finish this block</span>
      }
      push @new, $new_region; <span style="color:#75715e"># Add new region to list</span>
    }
    push @new, @a, @b; <span style="color:#75715e">## We will have some of @a or @b left so push both on the answer</span>
    @a <span style="color:#f92672">=</span> @new; <span style="color:#75715e">## Copy the new list of regions to @a - and repeat if required</span>
  }
  <span style="color:#66d9ef">return</span> <span style="color:#f92672">\</span>@a;
}
</code></pre></div><hr>
<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>
<p><a href="/blog/advent-calendar-2020"><strong>Advent Calendar 2020</strong></a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2024
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

