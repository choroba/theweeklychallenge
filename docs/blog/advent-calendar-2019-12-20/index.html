<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Advent Calendar - December 20, 2019"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/advent-calendar-2019-12-20/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Advent Calendar - December 20, 2019"/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 20, 2019">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/advent-calendar-2019-12-20/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 20, 2019</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 20, 2019</h2>
                    <div class="portfolio-meta">
                        <span>Friday, Dec 20, 2019</span>|
                        <span> Tags:
                            Perl, Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/2019-12-20.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h2 id="advent-calendar-2019blogadvent-calendar-2019"><a href="/blog/advent-calendar-2019"><strong>Advent Calendar 2019</strong></a></h2>
<h3 id="-day-19blogadvent-calendar-2019-12-19--day-20--day-21blogadvent-calendar-2019-12-21-">| <a href="/blog/advent-calendar-2019-12-19"><strong>Day 19</strong></a> | <strong>Day 20</strong> | <a href="/blog/advent-calendar-2019-12-21"><strong>Day 21</strong></a> |</h3>
<hr>
<p>The gift is presented by <a href="/blog/meet-the-champion-026"><strong>Roger Bell_West</strong></a>. Today he is talking about his solutions to <strong>Task #2: Word Game</strong> of <strong><a href="/blog/perl-weekly-challenge-038">&ldquo;The Weekly Challenge - 038&rdquo;</a></strong>.</p>
<h4 id="lets-assume-we-have-tiles-as-listed-below-with-an-alphabet-az-printed-on-them-each-tile-has-a-value-eg-a-1-point-b-4-points-etc-you-are-allowed-to-draw-7-tiles-from-the-lot-randomly-then-try-to-form-a-word-using-the-7-tiles-with-maximum-points-altogether-you-dont-have-to-use-all-the-7-tiles-to-make-a-word-you-should-try-to-use-as-many-tiles-as-possible-to-get-the-maximum-points">Lets assume we have tiles as listed below, with an alphabet (A..Z) printed on them. Each tile has a value, e.g. A (1 point), B (4 points) etc. You are allowed to draw 7 tiles from the lot randomly. Then try to form a word using the 7 tiles with maximum points altogether. You don’t have to use all the 7 tiles to make a word. You should try to use as many tiles as possible to get the maximum points.</h4>
<hr>
<p>The word game problem gives a series of tile counts and values (e.g. 8 A tiles worth 1 point each); the problem is to draw 7 at random, then make the highest-scoring word out of them (not necessarily using all of them).</p>
<h2 id="perl-solution">PERL SOLUTION</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> $l<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>;

    <span style="color:#66d9ef">my</span> %tilecount<span style="color:#f92672">=</span>(
        A <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">8</span>,
        G <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        I <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        S <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">7</span>,
        U <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        X <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        Z <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        E <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">9</span>,
        J <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        L <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        R <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        V <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        Y <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        F <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        D <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        P <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        W <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        B <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        N <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        T <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        O <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        H <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        M <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        C <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        K <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        Q <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
    );

    <span style="color:#66d9ef">my</span> %tilevalue<span style="color:#f92672">=</span>(
        A <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        G <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        I <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        S <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        U <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        X <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        Z <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        E <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        J <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        L <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        R <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        V <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        Y <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        F <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        D <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        P <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        W <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        B <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        N <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        T <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        O <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        H <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        M <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        C <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        K <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10</span>,
        Q <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10</span>,
    );
</code></pre></div><p>For the draw, we turn the <strong>%tilecount hash</strong> into a single long list, shuffle it, and throw away all but the first 7 entries. (shuffle is from <strong>List::Util</strong>)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> @bag<span style="color:#f92672">=</span>shuffle map {($_) x $tilecount{$_}} keys %tilecount;
    splice @bag,$l;
</code></pre></div><p>Load a candidate word list. (I used a copy of <a href="https://en.wikipedia.org/wiki/Collins_Scrabble_Words"><strong>SOWPODS</strong></a> I have hanging around, which is my standard reference for word validation problems.) We ignore anything longer than <strong>7 characters</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> %w;
    open I,<span style="color:#e6db74">&#39;&lt;&#39;</span>,<span style="color:#e6db74">&#39;wordlist&#39;</span>;
    <span style="color:#66d9ef">while</span> (<span style="color:#e6db74">&lt;I&gt;</span>) {
        chomp;
        <span style="color:#66d9ef">if</span> (length($_)<span style="color:#f92672">&lt;=</span>$l) {
            $w{uc($_)}<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
        }
    }
    close I;
</code></pre></div><p>Set up the accumulators for tracking high-scoring words.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> $maxscore<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">my</span> @maxcandidate;
    <span style="color:#66d9ef">my</span> %tried;
</code></pre></div><p>Set up the variables for my permutation generator (I&rsquo;ll be using the <strong>Steinhaus-Johnson-Trotter algorithm</strong> with <strong>Even</strong>&lsquo;s optimisation). <strong>@permute</strong> contains a set of indices into <strong>@bag</strong>.</p>
<p>(There&rsquo;s an obvious alternative approach to the problem, which I&rsquo;ll come back to at the end, but let&rsquo;s stick with the permuter for now.)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> @permute<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#bag);
    <span style="color:#66d9ef">my</span> @dir<span style="color:#f92672">=</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) x @permute;
    $dir[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;

    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</code></pre></div><p>For each permutation, we build a list <strong>@candidate</strong> consisting of the letters in order. Then we try to validate that as a word. (We also skip over any words we&rsquo;ve seen before, since they may appear multiple times as different candidates get shortened; for example, the permutations <strong>ABCDEFG</strong> and <strong>ABCGEFD</strong> would both produce <strong>ABC</strong> if no longer candidate were valid.)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> @candidate<span style="color:#f92672">=</span>map {$bag[$_]} @permute;
    <span style="color:#66d9ef">while</span> (@candidate) {
        <span style="color:#66d9ef">my</span> $candidate<span style="color:#f92672">=</span>join(<span style="color:#e6db74">&#39;&#39;</span>,@candidate);
        <span style="color:#66d9ef">if</span> (exists $tried{$candidate}) {
            <span style="color:#66d9ef">last</span>;
        }
        $tried{$candidate}<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">if</span> (exists $w{$candidate}) {
</code></pre></div><p>If so, we calculate the score, and in a two-stage trick of my own ensure that @maxcandidate contains all of the <strong>highest-scoring</strong> words.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">            <span style="color:#66d9ef">my</span> $score<span style="color:#f92672">=</span>sum(map {$tilevalue{$_}} @candidate);
            <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">&gt;</span> $maxscore) {
                @maxcandidate<span style="color:#f92672">=</span>();
                $maxscore<span style="color:#f92672">=</span>$score;
            }
            <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">==</span> $maxscore) {
                push @maxcandidate,$candidate;
            }
</code></pre></div><p>If that was a valid word, we don&rsquo;t need to look at any shorter words in this permutation; if <strong>ABJURER</strong> is valid, then whether or not <strong>ABJURE</strong> is valid it won&rsquo;t score as many points. (This optimisation wouldn&rsquo;t be true if some letters had negative values. Which might be an interesting variant to Scrabble…)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">            <span style="color:#66d9ef">last</span>;
        }
</code></pre></div><p>This next bit is the permuter. There are various <strong>CPAN</strong> modules that will do this (most obviously <strong>Algorithm::Permute</strong>), but I felt like writing my own.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">        <span style="color:#66d9ef">my</span> %find<span style="color:#f92672">=</span>map {$permute[$_] <span style="color:#f92672">=&gt;</span> $_} (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#permute);
        <span style="color:#66d9ef">my</span> $m<span style="color:#f92672">=</span>$#permute;
        <span style="color:#66d9ef">while</span> ($m<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">my</span> $pos<span style="color:#f92672">=</span>$find{$m};
            <span style="color:#66d9ef">unless</span> ($dir[$pos]<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>) {
                <span style="color:#66d9ef">if</span> ($m <span style="color:#f92672">&gt;</span> $permute[$pos<span style="color:#f92672">+</span>$dir[$pos]]) {
                    <span style="color:#66d9ef">my</span> $n<span style="color:#f92672">=</span>$pos<span style="color:#f92672">+</span>$dir[$pos];
                    <span style="color:#66d9ef">my</span> $nn<span style="color:#f92672">=</span>$n<span style="color:#f92672">+</span>$dir[$pos];
                    ($permute[$n],$permute[$pos])<span style="color:#f92672">=</span>($permute[$pos],$permute[$n]);
                    ($dir[$n],$dir[$pos])<span style="color:#f92672">=</span>($dir[$pos],$dir[$n]);
                    <span style="color:#66d9ef">if</span> ($n<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $n<span style="color:#f92672">==</span>$#permute <span style="color:#f92672">||</span> $permute[$nn] <span style="color:#f92672">&gt;</span> $m) {
                        $dir[$n]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
                    }
                    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#permute) {
                        <span style="color:#66d9ef">if</span> ($i<span style="color:#f92672">==</span>$n) {
                            <span style="color:#66d9ef">next</span>;
                        }
                        <span style="color:#66d9ef">if</span> ($permute[$i]<span style="color:#f92672">&gt;</span>$m) {
                            $dir[$i]<span style="color:#f92672">=</span>($i<span style="color:#f92672">&lt;</span>$n)?<span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
                        }
                    }
                    <span style="color:#66d9ef">last</span>;
                }
            }
            $m<span style="color:#f92672">--</span>;
        }

        <span style="color:#66d9ef">if</span> ($m<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">last</span>;
        }
    }
</code></pre></div><p>Finally, output the list of tiles and the highest scoring words.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">print</span> join(<span style="color:#e6db74">&#39;&#39;</span>,sort @bag),<span style="color:#e6db74">&#34;\n&#34;</span>;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$maxscore: &#34;</span>,join(<span style="color:#e6db74">&#39; &#39;</span>,sort @maxcandidate),<span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><h2 id="raku-solution">RAKU SOLUTION</h2>
<p><strong>Raku</strong> is a bit different, because there are useful built-in language features:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> $tilecount<span style="color:#f92672">=</span>(
        <span style="color:#e6db74">&#39;A&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">8</span>,
        <span style="color:#e6db74">&#39;G&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;I&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;S&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">7</span>,
        <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;X&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;Z&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;E&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">9</span>,
        <span style="color:#e6db74">&#39;J&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;R&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;V&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;Y&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;F&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;D&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;W&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;B&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        <span style="color:#e6db74">&#39;T&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;O&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;H&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        <span style="color:#e6db74">&#39;C&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        <span style="color:#e6db74">&#39;K&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;Q&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
    )<span style="color:#f92672">.</span>BagHash;

    <span style="color:#66d9ef">my</span> %tilevalue<span style="color:#f92672">=</span>(
        <span style="color:#e6db74">&#39;A&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;G&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;I&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;S&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;X&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;Z&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#39;E&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;J&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;R&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;V&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;Y&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span>,
        <span style="color:#e6db74">&#39;F&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;D&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;W&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">3</span>,
        <span style="color:#e6db74">&#39;B&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>,
        <span style="color:#e6db74">&#39;T&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;O&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;H&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;C&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        <span style="color:#e6db74">&#39;K&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10</span>,
        <span style="color:#e6db74">&#39;Q&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10</span>,
    );

</code></pre></div><p>The <strong>grab</strong> method on a <strong>BagHash</strong> gives me a series of weighted random picks, without replacement. This is a really handy thing to have; lots of code I write does things a bit like this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> @bag<span style="color:#f92672">=</span>$tilecount<span style="color:#f92672">.</span>grab($l);

    <span style="color:#66d9ef">my</span> %w;
    <span style="color:#66d9ef">my</span> $fh<span style="color:#f92672">=</span>open :r,<span style="color:#e6db74">&#39;wordlist&#39;</span>;
    <span style="color:#66d9ef">for</span> $fh<span style="color:#f92672">.</span>lines {
        <span style="color:#66d9ef">if</span> ($_<span style="color:#f92672">.</span>chars <span style="color:#f92672">&lt;=</span> $l) {
            %w{$_<span style="color:#f92672">.</span>uc}<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
        }
    }
    close $fh;
</code></pre></div><p>Similarly, all that permuting algorithm can be replaced with another core feature:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">
    <span style="color:#66d9ef">my</span> $maxscore<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">my</span> @maxcandidate;
    <span style="color:#66d9ef">my</span> %tried;

    <span style="color:#66d9ef">for</span> @bag<span style="color:#f92672">.</span>permutations <span style="color:#f92672">-&gt;</span> $n {
        <span style="color:#66d9ef">my</span> @candidate<span style="color:#f92672">=</span>$n<span style="color:#f92672">.</span>list;
        <span style="color:#66d9ef">while</span> (@candidate) {
            <span style="color:#66d9ef">my</span> $candidate<span style="color:#f92672">=</span>join(<span style="color:#e6db74">&#39;&#39;</span>,@candidate);
            <span style="color:#66d9ef">if</span> (%tried{$candidate}:exists) {
                <span style="color:#66d9ef">last</span>;
            }
            %tried{$candidate}<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
            <span style="color:#66d9ef">if</span> (%w{$candidate}:exists) {
                <span style="color:#66d9ef">my</span> $score<span style="color:#f92672">=</span>sum(map {%tilevalue{$_}}, @candidate);
                <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">&gt;</span> $maxscore) {
                    @maxcandidate<span style="color:#f92672">=</span>();
                    $maxscore<span style="color:#f92672">=</span>$score;
                }
                <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">==</span> $maxscore) {
                    @maxcandidate<span style="color:#f92672">.</span>push($candidate);
                }
                <span style="color:#66d9ef">last</span>;
            }
            @candidate<span style="color:#f92672">.</span>pop;
        }
    }

    <span style="color:#66d9ef">print</span> join(<span style="color:#e6db74">&#39;&#39;</span>,sort @bag),<span style="color:#e6db74">&#34;\n&#34;</span>;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$maxscore: &#34;</span>,join(<span style="color:#e6db74">&#39; &#39;</span>,sort @maxcandidate),<span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p>Which is less fun to write than the <strong>SJT permuter</strong> above but also less effort. (Now, if only the startup, loading up all these features that are nice to have but most of which a given program won&rsquo;t use, weren&rsquo;t so slow…)</p>
<h2 id="addendum">ADDENDUM</h2>
<p>The alternative approach is to read each word from the dictionary, see if it can be constructed with the available tiles, and if so score it. I wrote this in <strong>Perl</strong> for the blog post, to see how the performance differed. After constructing the bag:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">open I,<span style="color:#e6db74">&#39;&lt;&#39;</span>,<span style="color:#e6db74">&#39;wordlist&#39;</span>;
<span style="color:#66d9ef">while</span> (<span style="color:#e6db74">&lt;I&gt;</span>) {
  chomp;
  <span style="color:#66d9ef">if</span> (length($_)<span style="color:#f92672">&lt;=</span>$l) {
    <span style="color:#66d9ef">my</span> $candidate<span style="color:#f92672">=</span>uc($_);
    <span style="color:#66d9ef">my</span> @candidate<span style="color:#f92672">=</span>split <span style="color:#e6db74">&#39;&#39;</span>,$candidate;
</code></pre></div><p><strong>%l</strong> holds letter counts. We add one to a value each time the letter occurs in the word, then subtract one each time it occurs in the bag. If any value is positive at the end, it occurred more in the word than it did in the bag, so it&rsquo;s not a word we can make. (This could possibly be optimised a bit by precalculating the hash with the bag values subtracted.)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> %l;
    map {$l{$_}<span style="color:#f92672">++</span>} @candidate;
    map {$l{$_}<span style="color:#f92672">--</span>} @bag;
    <span style="color:#66d9ef">if</span> (max(values %l) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
      <span style="color:#66d9ef">next</span>;
    }
</code></pre></div><p>At this point we have a word that can be constructed from the available tiles, so just as before we score it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">
    <span style="color:#66d9ef">my</span> $score<span style="color:#f92672">=</span>sum(map {$tilevalue{$_}} @candidate);
    <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">&gt;</span> $maxscore) {
      @maxcandidate<span style="color:#f92672">=</span>();
      $maxscore<span style="color:#f92672">=</span>$score;
    }
    <span style="color:#66d9ef">if</span> ($score <span style="color:#f92672">==</span> $maxscore) {
      push @maxcandidate,$candidate;
    }
  }
}
close I;
<span style="color:#66d9ef">print</span> join(<span style="color:#e6db74">&#39;&#39;</span>,sort @bag),<span style="color:#e6db74">&#34;\n&#34;</span>;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$maxscore: &#34;</span>,join(<span style="color:#e6db74">&#39; &#39;</span>,sort @maxcandidate),<span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p>To test it, I used <strong>parallel(1)</strong> to run <strong>800 instances</strong> (thus 8 at a time on my 8-core desktop, a new one being invoked whenever the previous one had finished). This variant took about <strong>34 seconds</strong> to complete all <strong>800</strong>; my original permuter code took about <strong>14</strong>. I suspect that this is because my original code can skip score calculations on many words (see <strong>ABJURE/ABJURER</strong> above); to achieve this with the variant code would require the word list to be ordered appropriately with <strong>ABJURER</strong> before <strong>ABJURE</strong>, which would take time to set up.</p>
<p>The downside, of course, is that I have to hold the valid word list in memory. But <strong>SOWPODS</strong> is <strong>2.6 megabytes</strong>, which isn&rsquo;t a problem for any vaguely non-antique machine.</p>
<hr>
<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>
<p><a href="/blog/advent-calendar-2019"><strong>Advent Calendar 2019</strong></a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

