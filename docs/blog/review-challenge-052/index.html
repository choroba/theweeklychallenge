<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Ryan Thompson › Perl Weekly Review #052">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ryan Thompson › Perl Weekly Review #052</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Ryan Thompson › Perl Weekly Review #052</h2>
                    <div class="portfolio-meta">
                        <span>Tuesday, Mar 31, 2020</span>|
                        <span> Tags:
                            perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/p5-review-challenge-052.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <p>Continues from <a href="/blog/review-challenge-051/">previous week</a>.</p>
<p>Welcome to the Perl review for Week 052 of the Weekly Challenge! For a quick overview, go through the <a href="/blog/perl-weekly-challenge-052/">original tasks</a> and <a href="/blog/recap-challenge-052/">recap</a> of the weekly challenge.</p>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:rjt@cpan.org"><img src="/images/blog/Email.svg" height="50" width="50"> Email</a> › Email me (Ryan) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="/images/blog/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="/images/blog/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<h3 id="task-1task1"><a href="#task1">Task 1</a></h3>
<p>[ <a href="#alicia-bielsa1">Alicia Bielsa</a>  | <a href="#andrezgz1">Andrezgz</a>  | <a href="#athanasius1">Athanasius</a>  | <a href="#cheok-yin-fung1">Cheok-Yin Fung</a>  | <a href="#colin-crain1">Colin Crain</a>  | <a href="#cristian-heredia1">Cristina Heredia</a>  | <a href="#dave-cross1">Dave Cross</a>  | <a href="#dave-jacoby1">Dave Jacoby</a>  | <a href="#duncan-c-white1">Duncan C. White</a>  | <a href="#e-choroba1">E. Choroba</a>  | <a href="#javier-luque1">Javier Luque</a>  | <a href="#laurent-rosenfeld1">Laurent Rosenfeld</a>  | <a href="#lubos-kolouch1">Lubos Kolouch</a>  | <a href="#markus-holzer1">Markus Holzer</a>  | <a href="#mohammad-anwar1">Mohammad S Anwar</a>  | <a href="#roger-bell-west1">Roger Bell West</a>  | <a href="#ruben-westerberg1">Ruben Westerberg</a>  | <a href="#ryan-thompson1">Ryan Thompson</a>  | <a href="#saiftynet1">Saif Ahmed</a>  | <a href="#user-person1">User Person</a>  | <a href="#wanderdoc1">Wanderdoc</a>  | <a href="#yet-ebreo1">Yet Ebreo</a>  ]</p>
<h3 id="task-2task2"><a href="#task2">Task 2</a></h3>
<p>[ <a href="#alicia-bielsa2">Alicia Bielsa</a>  | <a href="#andrezgz2">Andrezgz</a>  | <a href="#athanasius2">Athanasius</a>  | <a href="#cheok-yin-fung2">Cheok-Yin Fung</a>  | <a href="#colin-crain2">Colin Crain</a>  | <a href="#cristian-heredia2">Cristina Heredia</a>  | <a href="#dave-cross2">Dave Cross</a>  | <a href="#dave-jacoby2">Dave Jacoby</a>  | <a href="#duncan-c-white2">Duncan C. White</a>  | <a href="#e-choroba2">E. Choroba</a>  | <a href="#javier-luque2">Javier Luque</a>  | <a href="#laurent-rosenfeld2">Laurent Rosenfeld</a>  | <a href="#lubos-kolouch2">Lubos Kolouch</a>  | <a href="#mohammad-anwar2">Mohammad S Anwar</a>  | <a href="#roger-bell-west2">Roger Bell West</a>  | <a href="#ruben-westerberg2">Ruben Westerberg</a>  | <a href="#ryan-thompson2">Ryan Thompson</a>  | <a href="#saiftynet2">Saif Ahmed</a>  | <a href="#user-person2">User Person</a>  | <a href="#wanderdoc2">Wanderdoc</a>  | <a href="#yet-ebreo2">Yet Ebreo</a>  ]</p>
<h3 id="blogsblogs"><a href="#blogs">Blogs</a></h3>
<hr>
<hr>
<h1 id="task1">Task #1 - Stepping Numbers</h1>
<p>Here is Mohammad&rsquo;s description:</p>
<p><em>Write a script to accept two numbers between 100 and 999. It should then print all Stepping Numbers between them.</em></p>
<p><em>A number is called a stepping number if the adjacent digits have a difference of 1. For example, 456 is a stepping number but 129 is not.</em></p>
<hr>
<h2 id="differing-interpretations">Differing Interpretations</h2>
<p>This task, while seemingly simple, ended up having two interpretations, of similar popularity:</p>
<ol>
<li>
<p>Digits must be strictly increasing or strictly decreasing, monotonically.  This means 789 and 987 are valid, but 989 is not.</p>
</li>
<li>
<p>Digits can increase or decrease. This means 789, 987, and 989 are all valid.</p>
</li>
</ol>
<p>As to a &ldquo;right&rdquo; answer, Mohammad and I both independently took the 2nd interpretation, as did quite a few others. Then again, <a href="https://oeis.org/A033075">OEIS A033075</a> and all of the resources that I was able to find on Stepping Numbers point to #2 as well.</p>
<p>Given that, I think everyone gets a gold Kleene star this week.</p>
<h2 id="solution-types">Solution Types</h2>
<h3 id="check-every-number">Check every number</h3>
<p>The most straightforward way is to check every number to see if neighbouring digits differ by 1. There isn&rsquo;t much to say about this method. It&rsquo;s O(n) on all numbers checked if the number length is constant, as in this task where only the numbers 100..999 are specified. If the number size is a variable, the algorithm becomes O(dn), where <strong>d</strong> is the number of digits in the number.</p>
<p>Within this category, there are a few different approaches to actually checking whether a number is a stepping number. Most people simply looked at each pair of digits and checked whether they differed by 1. A few people used other tricks, like regexes.</p>
<h3 id="recursion">Recursion</h3>
<p><a href="#e-choroba1">E. Choroba</a> used recursion to do a BFS traversal to build up stepping numbers one digit at a time.</p>
<h3 id="constructive">Constructive</h3>
<p><a href="#ryan-thompson1">My solution</a>, while only implementing the stricter interpretation, went about it in a unique way.</p>
<hr>
<h2 id="alicia-bielsa1">Alicia Bielsa</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/alicia-bielsa/perl/ch-1.pl">Alicia Bielsa&rsquo;s solution</a> accepts two numbers between 100 and 999 for the range, and outputs all stepping numbers in between. She tests each number between <code>$numberFrom</code> and <code>$numberTo</code>, checking whether each pair of digits differs by 1 (or -1):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $number ($numberFrom<span style="color:#f92672">..</span>$numberTo) {
    <span style="color:#66d9ef">my</span> @aDigits <span style="color:#f92672">=</span> split(<span style="color:#e6db74">&#39;&#39;</span>, $number);
    <span style="color:#66d9ef">my</span> $isSteppingNumber <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#aDigits){
        <span style="color:#66d9ef">my</span> $diff <span style="color:#f92672">=</span> $aDigits[$i] <span style="color:#f92672">-</span> $aDigits[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">if</span> ( $diff <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $diff <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> ){
            $isSteppingNumber <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        }
    }
    <span style="color:#66d9ef">if</span> ($isSteppingNumber){
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$number\n&#34;</span>;
    }
}
</code></pre></div><h2 id="andrezgz1">Andrezgz</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/andrezgz/perl/ch-1.pl">Andrezgz&rsquo;s solution</a> also loops and <code>split</code>s, and additionally uses <code>abs</code> to save having to check for positive and negative differences:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> ( $begin, $end ) <span style="color:#f92672">=</span> @ARGV;
($begin, $end) <span style="color:#f92672">=</span> ($end, $begin) <span style="color:#66d9ef">if</span> $end <span style="color:#f92672">&lt;</span> $begin;

<span style="color:#66d9ef">for</span> ($begin <span style="color:#f92672">..</span> $end) {
    <span style="color:#66d9ef">my</span> @d <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>;
    <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">if</span> abs($d[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> $d[<span style="color:#ae81ff">1</span>]) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span>
            abs($d[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> $d[<span style="color:#ae81ff">2</span>]) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>;
    say $_;
}
</code></pre></div><h2 id="athanasius1">Athanasius</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/athanasius/perl/ch-1.pl">Athanasius&rsquo;s solution</a> has all of the stepping numbers hard coded:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">const <span style="color:#66d9ef">my</span> @STEPPING_NUMS <span style="color:#f92672">=&gt;</span>
         (
                  <span style="color:#ae81ff">101</span>, <span style="color:#ae81ff">121</span>, <span style="color:#ae81ff">123</span>,
             <span style="color:#ae81ff">210</span>, <span style="color:#ae81ff">212</span>, <span style="color:#ae81ff">232</span>, <span style="color:#ae81ff">234</span>,
             <span style="color:#ae81ff">321</span>, <span style="color:#ae81ff">323</span>, <span style="color:#ae81ff">343</span>, <span style="color:#ae81ff">345</span>,
             <span style="color:#ae81ff">432</span>, <span style="color:#ae81ff">434</span>, <span style="color:#ae81ff">454</span>, <span style="color:#ae81ff">456</span>,
             <span style="color:#ae81ff">543</span>, <span style="color:#ae81ff">545</span>, <span style="color:#ae81ff">565</span>, <span style="color:#ae81ff">567</span>,
             <span style="color:#ae81ff">654</span>, <span style="color:#ae81ff">656</span>, <span style="color:#ae81ff">676</span>, <span style="color:#ae81ff">678</span>,
             <span style="color:#ae81ff">765</span>, <span style="color:#ae81ff">767</span>, <span style="color:#ae81ff">787</span>, <span style="color:#ae81ff">789</span>,
             <span style="color:#ae81ff">876</span>, <span style="color:#ae81ff">878</span>, <span style="color:#ae81ff">898</span>,
             <span style="color:#ae81ff">987</span>, <span style="color:#ae81ff">989</span>,
         );
</code></pre></div><p>Once the <code>$lower</code> and <code>$higher</code> bounds are established, Athanasius loops
through <code>@STEPPING_NUMS</code> and returns the ones that are between the bounds.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> ($lower, $higher) <span style="color:#f92672">=</span>  @ARGV;
    $lower <span style="color:#f92672">&lt;=</span> $_ <span style="color:#f92672">&amp;&amp;</span> $_ <span style="color:#f92672">&lt;=</span> $higher <span style="color:#f92672">and</span> push @solution, $_ <span style="color:#66d9ef">for</span> @STEPPING_NUMS;
</code></pre></div><h2 id="cheok-yin-fung1">Cheok-Yin Fung</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/cheok-yin-fung/perl/ch-1.pl">Cheok-Yin Fung&rsquo;s solution</a> loops over the input range, and calls <code>diff($digit_a, $digit_b)</code> for both pairs of digits in a 3-digit number:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">diff</span> {
    <span style="color:#66d9ef">if</span> (($_[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-</span>$_[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">or</span> ($_[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-</span>$_[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)) {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
    } <span style="color:#66d9ef">else</span> {<span style="color:#66d9ef">return</span> undef;}
}

(<span style="color:#66d9ef">my</span> $head, <span style="color:#66d9ef">my</span> $tail) <span style="color:#f92672">=</span> @ARGV;

<span style="color:#66d9ef">foreach</span> ($head<span style="color:#f92672">..</span>$tail) {
    <span style="color:#66d9ef">my</span> $num <span style="color:#f92672">=</span> $_;
    (<span style="color:#66d9ef">my</span> $h, <span style="color:#66d9ef">my</span> $t, <span style="color:#66d9ef">my</span> $d) <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $num;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$num\n&#34;</span> <span style="color:#66d9ef">if</span> (diff($h,$t) <span style="color:#f92672">&amp;&amp;</span> diff($t,$d));
}
</code></pre></div><p>Cheok Yin has started blogging about the Perl Weekly Challenge. Apparently it was at least in part thanks to the encouragement from Mohammad and me. It worked once, so maybe it&rsquo;ll work again: to anyone who isn&rsquo;t already blogging about the Challenge, I heartily encourage you to start! If you don&rsquo;t already have a blog, you can always make one at <a href="http://blogs.perl.org">blogs.perl.org</a>.</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/c_y_fung/2020/03/cys-take-on-perl-weekly-challenge-052.html">CY&rsquo;s Take on Perl Weekly Challenge #052</a></p>
<h2 id="colin-crain1">Colin Crain</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/colin-crain/perl/ch-1.pl">Colin Crain&rsquo;s solution</a> calls his <code>stepping</code> function for every number in the input range:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> ($low, $high) <span style="color:#f92672">=</span> sort {$a <span style="color:#e6db74">&lt;=&gt;</span> $b} @ARGV;

<span style="color:#66d9ef">my</span> @output <span style="color:#f92672">=</span> grep { stepping($_) } ($low<span style="color:#f92672">..</span>$high);

say <span style="color:#66d9ef">for</span> @output;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">stepping</span> {
    <span style="color:#66d9ef">my</span> $num <span style="color:#f92672">=</span> shift;
    <span style="color:#66d9ef">my</span> ($a, $b, $c) <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $num;
    abs( $a <span style="color:#f92672">-</span> $b ) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> abs( $b <span style="color:#f92672">-</span> $c ) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> ? <span style="color:#ae81ff">1</span> : <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>We see here another version of <code>split</code> and <code>abs</code> making easy work of the problem.</p>
<h2 id="cristian-heredia1">Cristina Heredia</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/cristian-heredia/perl/ch-1.pl">Cristina Heredia&rsquo;s solution</a> features <code>obtainSteppingNumbers</code>, which does the work of looping through the input range and calculating the digit differences. That sub appends the matching stepping numbers to a global, <code>$result</code>, which is later printed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">obtainSteppingNumbers</span> {

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">my</span> $i<span style="color:#f92672">=</span>$firstNumber<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;1&#39;</span>; $i <span style="color:#f92672">&lt;</span> $secondNumber; $i<span style="color:#f92672">++</span>) {

        @aNumber <span style="color:#f92672">=</span> split(<span style="color:#e6db74">//</span>,$i);
        $secondValor <span style="color:#f92672">=</span> $aNumber[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
        $thirdValor <span style="color:#f92672">=</span> $aNumber[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>;

        <span style="color:#66d9ef">if</span> ($secondValor <span style="color:#f92672">==</span> <span style="color:#ae81ff">10</span>) {
            $secondValor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span>;
        }

        <span style="color:#66d9ef">if</span> ($thirdValor <span style="color:#f92672">==</span> <span style="color:#ae81ff">10</span>) {
            $thirdValor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span>;
        }
        <span style="color:#66d9ef">elsif</span> ($thirdValor <span style="color:#f92672">==</span> <span style="color:#ae81ff">11</span>) {
            $thirdValor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;1&#39;</span>;
        }

        <span style="color:#66d9ef">if</span> ($secondValor <span style="color:#f92672">!=</span> $thirdValor) {
            <span style="color:#66d9ef">if</span> ($aNumber[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">eq</span> $secondValor <span style="color:#f92672">and</span> $aNumber[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">eq</span> $thirdValor) {
                $result <span style="color:#f92672">=</span> $result<span style="color:#f92672">.</span>$i<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;
            }
        }
    }
    message();
}
</code></pre></div><h2 id="dave-cross1">Dave Cross</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/dave-cross/perl/ch-1.pl">Dave Cross&rsquo;s solution</a> loops through and calls <code>is_stepping</code>. That sub uses <code>split</code> and arithmetic to see if a number is a stepping number:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> File::Basename;

<span style="color:#66d9ef">my</span> ( $start, $end ) <span style="color:#f92672">=</span> get_params();

<span style="color:#66d9ef">for</span> ( $start <span style="color:#f92672">..</span> $end ) {
    say <span style="color:#e6db74">&#34;$_ is a stepping number&#34;</span> <span style="color:#66d9ef">if</span> is_stepping($_);
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is_stepping</span> {
    <span style="color:#66d9ef">my</span> ($x) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> @digits <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $x;
    <span style="color:#66d9ef">for</span> ( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span> ) {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">if</span> $digits[$_] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">!=</span> $digits[ $_ <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> ];
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">get_params</span> {
    <span style="color:#66d9ef">my</span> $me    <span style="color:#f92672">=</span> basename $0;
    <span style="color:#66d9ef">my</span> $usage <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Usage: $me start end\n&#34;</span>;
    $usage <span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;(where &#39;start&#39; and &#39;end&#39; are integers between 100 and 999)\n&#34;</span>;

    die $usage <span style="color:#66d9ef">if</span> @ARGV <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>;

    <span style="color:#66d9ef">for</span> (@ARGV) {
        die $usage <span style="color:#66d9ef">if</span> <span style="color:#e6db74">/\D/</span>;
        die $usage <span style="color:#66d9ef">if</span> length <span style="color:#f92672">!=</span> <span style="color:#ae81ff">3</span>;
    }

    <span style="color:#66d9ef">return</span> sort { $a <span style="color:#e6db74">&lt;=&gt;</span> $b } @ARGV;
}
</code></pre></div><p>This does print out the reduced interpretation of stepping numbers, as Dave is only checking whether the digits are strictly increasing, as in the task&rsquo;s example.</p>
<h2 id="dave-jacoby1">Dave Jacoby</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/dave-jacoby/perl/ch-1.pl">Dave Jacoby&rsquo;s solution</a> loops, <code>split</code>s, and calls <code>off_by_one</code> for each digit pair in each number:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">get_stepping_numbers</span> ( $low, $high ) {
    <span style="color:#66d9ef">my</span> @output;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $n ( $low <span style="color:#f92672">..</span> $high ) {
        <span style="color:#66d9ef">my</span> @n <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $n;
        push @output, $n
            <span style="color:#66d9ef">if</span> off_by_one( $n[<span style="color:#ae81ff">0</span>], $n[<span style="color:#ae81ff">1</span>] ) <span style="color:#f92672">&amp;&amp;</span> off_by_one( $n[<span style="color:#ae81ff">1</span>], $n[<span style="color:#ae81ff">2</span>] );
    }
    <span style="color:#66d9ef">return</span> @output;
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">off_by_one</span> ( $i, $j ) {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> $i <span style="color:#f92672">==</span> $j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> $i <span style="color:#f92672">==</span> $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://jacoby.github.io/2020/03/16/minimax-british-coins-and-oldschool-ai-in-perl.html">Minimax, British Coins and Old-School AI in Perl</a></p>
<h2 id="duncan-c-white1">Duncan C. White</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/duncan-c-white/perl/ch-1.pl">Duncan C. White&rsquo;s solution</a> also only check ascending digits:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">fun stepping( $x ) {
    <span style="color:#66d9ef">my</span> @digits <span style="color:#f92672">=</span> split(<span style="color:#e6db74">//</span>,$x);
    <span style="color:#66d9ef">my</span> $prev <span style="color:#f92672">=</span> shift @digits;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $next (@digits) {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">unless</span> $next <span style="color:#f92672">==</span> $prev<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
        $prev <span style="color:#f92672">=</span> $next;
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><h2 id="e-choroba1">E. Choroba</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/e-choroba/perl/ch-1.pl">E. Choroba&rsquo;s solution</a> is recursive. The <code>prolong</code> sub does what it says: it takes a number (as a sequence of digits), and adds another digit that is valid for a stepping number (or pushes the <code>join</code>'d number to the result array, in the base case):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $LENGTH <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;

<span style="color:#66d9ef">my</span> @stepping_numbers;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">prolong</span> {
    <span style="color:#66d9ef">my</span> (@short) <span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">my</span> $last <span style="color:#f92672">=</span> $short[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $next (grep $_ <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $_ <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">9</span>, $last <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, $last <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">if</span> ($LENGTH <span style="color:#f92672">==</span> @short <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) {
            push @stepping_numbers, join <span style="color:#e6db74">&#34;&#34;</span>, @short, $next;
        } <span style="color:#66d9ef">else</span> {
            prolong(@short, $next);
        }
    }
}

prolong($_) <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">9</span>;
say <span style="color:#66d9ef">for</span> @stepping_numbers;
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/03/perl-weekly-challenge-052-stepping-numbers-lucky-winner.html">Stepping Numbers &amp; Lucky Winner</a></p>
<h2 id="javier-luque1">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/javier-luque/perl/ch-1.pl">Javier Luque&rsquo;s solution</a> loops, splits, and checks each digit pair:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ($start <span style="color:#f92672">..</span> $end) {
    <span style="color:#66d9ef">my</span> $is_stepping <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">my</span> $prev_digit;

    <span style="color:#66d9ef">my</span> @digits <span style="color:#f92672">=</span> split (<span style="color:#e6db74">&#39;&#39;</span>, $i);
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $digit (@digits) {
        $is_stepping <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span>
        ( defined($prev_digit) <span style="color:#f92672">&amp;&amp;</span>
            ( $prev_digit <span style="color:#f92672">!=</span> $digit <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
              $prev_digit <span style="color:#f92672">!=</span> $digit <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) );
        $prev_digit <span style="color:#f92672">=</span> $digit;
    }
    say $i <span style="color:#66d9ef">if</span> ($is_stepping);
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/03/16/perl-weekly-challenge-052/">Perl Weekly Challenge</a></p>
<h2 id="laurent-rosenfeld1">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/laurent-rosenfeld/perl/ch-1.pl">Laurent Rosenfeld&rsquo;s solution</a> also splits and checks each pair:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $num ($start<span style="color:#f92672">..</span>$end) {
    <span style="color:#66d9ef">my</span> @digits <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $num;
    <span style="color:#66d9ef">if</span> (abs($digits[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">1</span>]) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
        abs($digits[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">2</span>]) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
        say <span style="color:#e6db74">&#34;$num is a stepping number.&#34;</span>;
    }
}
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/03/perl-weekly-challenge-stepping-numbers-and-lucky-winner.html">Stepping Numbers and Lucky Winner</a></p>
<h2 id="lubos-kolouch1">Lubos Kolouch</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/lubos-kolouch/perl/ch-1.pl">Lubos Kolouch&rsquo;s solution</a> defines an <code>is_stepping</code> sub that checks each digit pair:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is_stepping</span> {
    <span style="color:#66d9ef">my</span> $number <span style="color:#f92672">=</span> shift;

    <span style="color:#66d9ef">my</span> $seq;

    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $num (split(<span style="color:#e6db74">//</span>, $number)) {
        <span style="color:#66d9ef">unless</span> (defined $seq) {
            $seq <span style="color:#f92672">=</span> $num;
            <span style="color:#66d9ef">next</span>;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> abs($num <span style="color:#f92672">-</span> $seq) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>;
        $seq <span style="color:#f92672">=</span> $num;
    }

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><p><code>is_stepping</code> is then called for every number in the range:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> ($from<span style="color:#f92672">..</span>$to) {
    say $_ <span style="color:#66d9ef">if</span> is_stepping($_);
}
</code></pre></div><h2 id="markus-holzer1">Markus Holzer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/markus-holzer/perl/ch-1.pl">Markus Holzer&rsquo;s solution</a> structured his program the same way:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">stepping</span> {
    <span style="color:#66d9ef">my</span> @n <span style="color:#f92672">=</span> split <span style="color:#e6db74">&#39;&#39;</span>, shift;
    <span style="color:#66d9ef">my</span> $m <span style="color:#f92672">=</span> shift @n;

    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $n ( @n ) {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">unless</span> abs($m <span style="color:#f92672">-</span> $n) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;
        $m <span style="color:#f92672">=</span> $n;
    }
    <span style="color:#ae81ff">1</span>;
}

<span style="color:#66d9ef">my</span> ($from, $to) <span style="color:#f92672">=</span> @ARGV;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$_\n&#34;</span> <span style="color:#66d9ef">for</span> grep { stepping($_) } $from <span style="color:#f92672">..</span> $to;
</code></pre></div><h2 id="mohammad-anwar1">Mohammad S Anwar</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/mohammad-anwar/perl/ch-1.pl">Mohammad S Anwar&rsquo;s solution</a> loops through with <code>while</code>, and checks each digit pair. I note Mohammad&rsquo;s solution also assumed the stricter interpretation, regarding digits only increasing or decreasing:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> ($start <span style="color:#f92672">&lt;=</span> $stop) {
    <span style="color:#66d9ef">my</span> ($d1, $d2, $d3) <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span>, $start, <span style="color:#ae81ff">3</span>;
    <span style="color:#66d9ef">if</span> ( ((($d1 <span style="color:#f92672">-</span> $d2) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&amp;&amp;</span> (($d2 <span style="color:#f92672">-</span> $d3) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>))
         <span style="color:#f92672">||</span> ((($d2 <span style="color:#f92672">-</span> $d1) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&amp;&amp;</span> (($d3 <span style="color:#f92672">-</span> $d2) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)) ) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$start\n&#34;</span>;
    }
    $start<span style="color:#f92672">++</span>;
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://perlweeklychallenge.org/blog/weekly-challenge-052">The Weekly Challenge #052</a></p>
<h2 id="roger-bell-west1">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/roger-bell-west/perl/ch-1.pl">Roger Bell West&rsquo;s solution</a> assumed strictly increasing digits:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @a <span style="color:#f92672">=</span> @ARGV;

<span style="color:#66d9ef">if</span> ( $a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $a[<span style="color:#ae81ff">1</span>] ) {
    @a <span style="color:#f92672">=</span> ( $a[<span style="color:#ae81ff">1</span>], $a[<span style="color:#ae81ff">0</span>] );
}

<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $c ( $a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">..</span> $a[<span style="color:#ae81ff">1</span>] ) {
    <span style="color:#66d9ef">my</span> @d <span style="color:#f92672">=</span> split <span style="color:#e6db74">&#39;&#39;</span>, $c;
    <span style="color:#66d9ef">my</span> $v <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#d <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
        <span style="color:#66d9ef">if</span> ( $d[$i] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">!=</span> $d[ $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> ] ) {
            $v <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
            <span style="color:#66d9ef">last</span>;
        }
    }
    <span style="color:#66d9ef">if</span> ($v) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$c\n&#34;</span>;
    }
}
</code></pre></div><h2 id="ruben-westerberg1">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/ruben-westerberg/perl/ch-1.pl">Ruben Westerberg&rsquo;s solution</a> also assumed strictly increasing digits:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> ( $start <span style="color:#f92672">..</span> $end ) {
    <span style="color:#66d9ef">my</span> $prev;
    <span style="color:#66d9ef">my</span> $val <span style="color:#f92672">=</span> grep { $_ <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> } map {

        <span style="color:#75715e">#print &#34;Number: $_\n&#34;;</span>
        <span style="color:#66d9ef">my</span> @res;
        <span style="color:#66d9ef">if</span> ( <span style="color:#f92672">!</span>defined($prev) ) {
            @res <span style="color:#f92672">=</span> ();
        }
        <span style="color:#66d9ef">else</span> {
            @res <span style="color:#f92672">=</span> ( $_ <span style="color:#f92672">-</span> $prev );
        }
        $prev <span style="color:#f92672">=</span> $_;
        @res;
    } split <span style="color:#e6db74">&#34;&#34;</span>, $_;

    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Stepping number: $_\n&#34;</span> <span style="color:#66d9ef">if</span> $val <span style="color:#f92672">==</span> length($_) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><h2 id="ryan-thompson1">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/ryan-thompson/perl/ch-1.pl">My solution</a> generates all possible strictly increasing or decreasing <code>@step</code>ping numbers with the following loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @step;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $n (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">9</span>) {
    push @step, map { $n <span style="color:#f92672">.</span> join <span style="color:#e6db74">&#39;&#39;</span>,        $n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$_   }   $n<span style="color:#f92672">..</span><span style="color:#ae81ff">9</span>;
    push @step, map { $n <span style="color:#f92672">.</span> join <span style="color:#e6db74">&#39;&#39;</span>, reverse  $_<span style="color:#f92672">..</span>$n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> }    <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>The whole algorithm is O(n) <em>on the matching numbers,</em> not on the entire search space. With the additional restriction, the maximum number is 9876543210, and there are only 90 numbers in the output list! Printing the 3-digit results is easy:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">&#39; &#39;</span>, sort { $a <span style="color:#e6db74">&lt;=&gt;</span> $b } grep <span style="color:#ae81ff">3</span> <span style="color:#f92672">==</span> length, @step;
</code></pre></div><p>I always do these challenges completely blind, so it was only when I started this weekly review that I discovered that some of us had a different interpretation of the problem.</p>
<p><strong>Blog</strong> › <a href="http://ry.ca/2020/03/stepping-numbers/">Stepping Numbers</a></p>
<h2 id="saiftynet1">Saif Ahmed</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/saiftynet/perl/ch-1.pl">Saif Ahmed&rsquo;s solution</a> builds up the list of stepping numbers, up to 7 digits in length:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @steppingNumbers;

<span style="color:#75715e"># single digit numbers are just 1-9;</span>
$steppingNumbers[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> [ ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">9</span> ) ];

<span style="color:#75715e"># subsequent arrays are assembled from the previous array</span>
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $digitCount ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">7</span> ) {
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $no ( @{ $steppingNumbers[ $digitCount <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] } ) {
        <span style="color:#66d9ef">my</span> $lastDigit <span style="color:#f92672">=</span> ( split <span style="color:#e6db74">//</span>, $no )[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        <span style="color:#75715e"># now continue adding digits one more or one less than the last digit</span>
        <span style="color:#75715e"># unless it will cause over or underflow</span>
        push @{ $steppingNumbers[$digitCount] }, $no <span style="color:#f92672">.</span> ( $lastDigit <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> )
            <span style="color:#66d9ef">if</span> $lastDigit <span style="color:#f92672">ne</span> <span style="color:#e6db74">&#34;0&#34;</span>;
        push @{ $steppingNumbers[$digitCount] }, $no <span style="color:#f92672">.</span> ( $lastDigit <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> )
            <span style="color:#66d9ef">if</span> $lastDigit <span style="color:#f92672">ne</span> <span style="color:#e6db74">&#34;9&#34;</span>;
    }
}
</code></pre></div><p>The numbers themselves are stored in an array of arrays (AoA), by <code>$digitCount</code>, so all 3-digit stepping numbers would be in <code>$steppingNumbers[3]</code>. Printing them out is thus reasonably efficient:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $digits ( length $in1 <span style="color:#f92672">..</span> length $in2 ) {
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $no ( @{ $steppingNumbers[$digits] } ) {
        <span style="color:#66d9ef">print</span> $no, <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#66d9ef">if</span> $no <span style="color:#f92672">&gt;</span> $in1 <span style="color:#f92672">and</span> $no <span style="color:#f92672">&lt;</span> $in2;
    }
}
</code></pre></div><h2 id="user-person1">User Person</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/user-person/perl/ch-1.pl">User Person&rsquo;s solution</a> also generates all stepping numbers, between 99 and 1000:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @step <span style="color:#f92672">=</span> ();
<span style="color:#66d9ef">my</span> $UPPER_LIMIT <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>;
<span style="color:#66d9ef">my</span> $LOWER_LIMIT <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; <span style="color:#f92672">++</span>$i) {
    <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">8</span>) { <span style="color:#75715e"># UP UP</span>
        push @step, ($i <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">+</span> ( $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> ($i <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>);
    }
    <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>) { <span style="color:#75715e"># DOWN DOWN</span>
        push @step, ($i <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">+</span> ( $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> ($i <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>);
    }
    <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>) { <span style="color:#75715e"># UP DOWN</span>
        push @step, ($i <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">+</span> ( $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> $i;
    }
    push @step, ($i <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">+</span> ( $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> $i; <span style="color:#75715e"># DOWN UP</span>
}
</code></pre></div><p>Printing the results is done by looping over <code>@step</code> and printing the numbers in range:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">LOOP:
<span style="color:#66d9ef">foreach</span> (@step) {
    <span style="color:#66d9ef">if</span> ($_ <span style="color:#f92672">&gt;=</span> $min <span style="color:#f92672">and</span> $_ <span style="color:#f92672">&lt;=</span> $max) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;, &#34;</span> <span style="color:#66d9ef">if</span> $commaFlag;
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$_&#34;</span>;
        $commaFlag <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    } <span style="color:#66d9ef">elsif</span> ($commaFlag) {
        <span style="color:#66d9ef">last</span> LOOP;
    }
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span> <span style="color:#66d9ef">if</span> $commaFlag;
</code></pre></div><h2 id="wanderdoc1">Wanderdoc</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/wanderdoc/perl/ch-1.pl">Wanderdoc&rsquo;s solution</a> also assumes strictly increasing or decreasing numbers:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Getopt::Long;
<span style="color:#66d9ef">use</span> List::Util <span style="color:#e6db74">qw(first)</span>;

<span style="color:#66d9ef">my</span> %par <span style="color:#f92672">=</span> (low <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">100</span>, high <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">999</span>);

GetOptions(    <span style="color:#e6db74">&#34;low|l=i&#34;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>$par{low},
              <span style="color:#e6db74">&#34;high|h=i&#34;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>$par{high},)
<span style="color:#f92672">or</span> die(<span style="color:#e6db74">&#34;Error in command line!\n&#34;</span>);
die <span style="color:#e6db74">&#34;Numbers must be positive integers between 100 and 999!$/&#34;</span>
     <span style="color:#66d9ef">if</span> defined first { $_ <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> $_ <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">or</span> $_ <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">999</span> } values %par;
die <span style="color:#e6db74">&#34;The second number must be bigger!$/&#34;</span> <span style="color:#66d9ef">unless</span> ($par{high} <span style="color:#f92672">&gt;</span> $par{low});
</code></pre></div><p>I like the use of <a href="https://metacpan.org/pod/Getopt::Long"><code>Getopt::Long</code></a> and input validation.</p>
<p>Here is the stepping number generation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $NUM <span style="color:#f92672">=</span> $par{low};
<span style="color:#66d9ef">while</span> ( $NUM <span style="color:#f92672">&lt;=</span> $par{high} ) {
    <span style="color:#66d9ef">my</span> @digits <span style="color:#f92672">=</span> split(<span style="color:#e6db74"> //</span>, $NUM );

    <span style="color:#66d9ef">if</span> ( (      <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> ( $digits[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">0</span>] )
            <span style="color:#f92672">and</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> ( $digits[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">1</span>] )
        )
        <span style="color:#f92672">or</span> (    <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> ( $digits[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">2</span>] )
            <span style="color:#f92672">and</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> ( $digits[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> $digits[<span style="color:#ae81ff">1</span>] ) )
       )
    {
        <span style="color:#66d9ef">print</span> $NUM, $/;
    }

    $NUM<span style="color:#f92672">++</span>;
}
</code></pre></div><h2 id="yet-ebreo1">Yet Ebreo</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/yet-ebreo/perl/ch-1.pl">Yet Ebreo&rsquo;s solution</a> starts with the string <code>0123456789</code> and convolves the list of stepping numbers as the keys of <code>%hash</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @range <span style="color:#f92672">=</span> ($start<span style="color:#f92672">..</span>$end);
<span style="color:#66d9ef">my</span> $step  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0123456789&#34;</span>;
<span style="color:#66d9ef">my</span> $num   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;@range &#34;</span>;
<span style="color:#66d9ef">my</span> %hash;
say <span style="color:#e6db74">&#34;List of stepping number(s) from $start to $end&#34;</span>;
<span style="color:#66d9ef">while</span> ($step <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/(.)(.)(.)/$2$3/</span>) {
    <span style="color:#66d9ef">my</span> ($l,$m,$r) <span style="color:#f92672">=</span> ($1,$2,$3);
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$l$m$r &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$r$m$l &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$l$m$l &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$m$l$m &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$r$m$r &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
    $num <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#34;$m$r$m &#34;</span>   <span style="color:#f92672">&amp;&amp;</span> $hash{$&amp;}<span style="color:#f92672">++</span>;
};
say <span style="color:#66d9ef">for</span> sort {$a<span style="color:#f92672">-</span>$b} keys %hash;
</code></pre></div><p>Note first that <code>$num</code> is the string concatenation of all numbers in the input <code>@range</code>.</p>
<p>The <code>while</code> loop condition does some of the work: it captures the first three digits individually, and also replaces them with the second and third digits.  This removes the first character from <code>$step</code> and leaves the first three digits in <code>$1, $2, $3</code>.</p>
<p>The 3-digit stepping numbers are then found by regex matching all six valid combinations of <code>$l</code>, <code>$m</code>, and <code>$r</code>. If a particular sequence matches, the corresponding hash element is incremented, setting the key.</p>
<hr>
<hr>
<h1 id="task2">Task #2 - Lucky Winner</h1>
<p>Mohammad&rsquo;s description:</p>
<p><em>Suppose there are following coins arranged on a table in a line in random order.</em></p>
<blockquote>
<p>£1, 50p, 1p, 10p, 5p, 20p, £2, 2p</p>
</blockquote>
<p><em>Suppose you are playing against the computer. Player can only pick one coin at a time from either ends. Find out the lucky winner, who has the larger amounts in total?</em></p>
<hr>
<p>The solutions for this task were quite long and diverse, ranging from simple user-driven simulations all the way up to relatively complex combinatorial game theory.</p>
<p>A strict interpretation of the task would suggest that <em>only</em> the given configuration of coins is valid. While I think most of us understood that, a few people made a deliberate choice to expand upon the task, since the given configuration has a trivial solution (the player who gets the £2 coin wins; and the player who goes first can always get that coin).</p>
<hr>
<h2 id="alicia-bielsa2">Alicia Bielsa</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/alicia-bielsa/perl/ch-2.pl">Alicia Bielsa&rsquo;s solution</a> is probably best summarized with a design overview. She has the following <code>sub</code>s and data structures:</p>
<ul>
<li><code>%hCoinsValue</code> maps coins like <code>£1</code> or <code>50p</code>, to their values in pence,
like 100 or 50.</li>
<li><code>@aCoins</code> holds the remaining coins.</li>
<li><code>playerChooses()</code> presents the player with a choice of the left or right
coin, at the current stage of the game.</li>
<li><code>askPlayer()</code> provides the actual input routine for the above sub.</li>
<li><code>computerChooses()</code> has the computer pick a coin.</li>
<li><code>sumCoins()</code> adds up the coin values for a player.</li>
<li><code>drawCoins()</code> pretty-prints the remaining coins to the terminal.</li>
</ul>
<p>With all of the logic abstracted away, game loop is quite simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> (scalar(@aCoins)){
    push (@aPlayerCoins, playerChooses());
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Player: &#34;</span><span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#39;,&#39;</span>,@aPlayerCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;
    push (@aComputerCoins, computerChooses());
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Computer: &#34;</span><span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#39;,&#39;</span>,@aComputerCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;
}
</code></pre></div><p>At the end of the game, the winner is determined like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $totalComputer <span style="color:#f92672">=</span> sumCoins(<span style="color:#f92672">\</span>@aComputerCoins);
<span style="color:#66d9ef">my</span> $totalPlayer <span style="color:#f92672">=</span> sumCoins(<span style="color:#f92672">\</span>@aPlayerCoins);

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;----------------------\nEnd of game\n&#34;</span>;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Player: &#34;</span><span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#39;,&#39;</span>,@aPlayerCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Computer: &#34;</span><span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#39;,&#39;</span>,@aComputerCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;

<span style="color:#66d9ef">if</span> ($totalComputer <span style="color:#f92672">&gt;</span>  $totalPlayer){
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Computer wins\n&#34;</span>;
} <span style="color:#66d9ef">elsif</span> ($totalComputer <span style="color:#f92672">&lt;</span>  $totalPlayer) {
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Player wins\n&#34;</span>;
} <span style="color:#66d9ef">else</span> {
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Draw\n&#34;</span>;
}
</code></pre></div><p>I can&rsquo;t show all the subs, but here are the ones I found most interesting, starting with <code>computerChooses</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">computerChooses</span> {
    <span style="color:#66d9ef">my</span> $response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
    drawCoins();
    <span style="color:#66d9ef">if</span> (scalar(@aCoins) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>){
        <span style="color:#66d9ef">return</span>  pop(@aCoins);
    }
    <span style="color:#75715e">#we dont want the player to get the 2 pound coin</span>
    <span style="color:#66d9ef">if</span> ($aCoins[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>){
        $response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;R&#39;</span>;
    } <span style="color:#66d9ef">elsif</span>($aCoins[$#aCoins<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>){
        $response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;L&#39;</span>;
    } <span style="color:#66d9ef">elsif</span> ( $hCoinsValue{$aCoins[<span style="color:#ae81ff">0</span>]} <span style="color:#f92672">&gt;</span> $hCoinsValue{$aCoins[$#aCoins]}) {
        $response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;L&#39;</span>;
    } <span style="color:#66d9ef">else</span> {
        $response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;R&#39;</span>;
    }

    <span style="color:#66d9ef">if</span> ( $response <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^R/</span>){
        <span style="color:#66d9ef">return</span>  pop(@aCoins);
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span>   shift(@aCoins);
    }

}
</code></pre></div><p>Note how the computer actively tries to get the £2 coin, as opposed to simply greedily choosing the highest valued coin. However, if the £2 coin is the <em>second</em> item or <em>second from last</em> item, we pick from the opposite end, preventing the player from getting it. With this particular bunch of coins, going for the £2 coin (and preventing the other player from getting it) is the optimal strategy, since the other coins add up to only 188p.</p>
<p>Next up is <code>drawCoins</code>. While <code>print &quot;@coins\n&quot;</code> works, I certainly prefer the attention to detail here, to pretty-print the coins. It looks a lot better:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">drawCoins</span> {
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\nL&#34;</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#39;--------&#39;</span> x scalar(@aCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;R\n&#34;</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $coin (@aCoins){
        <span style="color:#66d9ef">print</span> $coin <span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\t&#34;</span>;
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#39;--------&#39;</span> x scalar(@aCoins)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;\n&#34;</span>;
}
</code></pre></div><h2 id="andrezgz2">Andrezgz</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/andrezgz/perl/ch-2.pl">Andrezgz&rsquo;s solution</a> maps the values in pence to the familiar name of each coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> %coin_value <span style="color:#f92672">=</span> (  <span style="color:#ae81ff">1</span> <span style="color:#f92672">=&gt;</span>  <span style="color:#e6db74">&#39;1p&#39;</span>,  <span style="color:#ae81ff">2</span> <span style="color:#f92672">=&gt;</span>  <span style="color:#e6db74">&#39;2p&#39;</span>,   <span style="color:#ae81ff">5</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;5p&#39;</span>,  <span style="color:#ae81ff">10</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;10p&#39;</span>,
                   <span style="color:#ae81ff">20</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;20p&#39;</span>, <span style="color:#ae81ff">50</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;50p&#39;</span>, <span style="color:#ae81ff">100</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;£1&#39;</span>, <span style="color:#ae81ff">200</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;£2&#39;</span> );
</code></pre></div><p>Andrezgz then does a <a href="https://www.perl.com/article/the-history-of-the-schwartzian-transform/">Schwartzian Transform</a> to randomize the order of the coins:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># Schwartzian transform to randomize order</span>
<span style="color:#75715e"># although some randomness could be obtained by a simple: keys %coin_value</span>
<span style="color:#66d9ef">my</span> @coins <span style="color:#f92672">=</span> map  { $_<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] }
            sort { $a<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#e6db74">&lt;=&gt;</span> $b<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] }
            map  { [$_, int rand <span style="color:#ae81ff">8</span>] }
            keys %coin_value;
</code></pre></div><p>I&rsquo;d normally use <a href="https://perldoc.perl.org/List/Util.html"><code>List::Util</code></a>&lsquo;s <code>shuffle</code> for that, but I&rsquo;ve never seen a ST I didn&rsquo;t like, and Andrezgz points out that randomness can also be achieved with <code>keys %coin_value</code>. <strong>Aside:</strong> In fact, which I&rsquo;m quite sure Andrezgz knows: <a href="https://metacpan.org/changes/release/RJBS/perl-5.18.0#Hash-randomization">since Perl 5.18, hash keys are deliberately shuffled</a>. Prior to that, they were sort of shuffled as a side effect of the hashing algorithm, but specific random orderings could be repeated and even potentially predicted. There was code out in the wild that relied on those behaviours (sometimes inadvertently), which caused all sorts of hard to reproduce bugs, and potential security issues.</p>
<p>The following loop is where all of the action happens:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> (@user, @computer);

<span style="color:#66d9ef">while</span> (@coins) {
    <span style="color:#75715e"># USER</span>
    list_coins(<span style="color:#e6db74">&#39;Coins on the table&#39;</span>,@coins);
    say <span style="color:#e6db74">&#34;&gt; Please choose L (for $coin_value{$coins[0]}), R (for $coin_value{$coins[-1]}) or Q to quit&#34;</span>;

    <span style="color:#66d9ef">my</span> $letter <span style="color:#f92672">=</span> uc <span style="color:#e6db74">&lt;STDIN&gt;</span>;
    chomp $letter;
    <span style="color:#66d9ef">redo</span> <span style="color:#66d9ef">unless</span> $letter <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^[RLQ]$/</span>;
    exit <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> $letter <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;Q&#39;</span>;

    <span style="color:#66d9ef">my</span> $chosen <span style="color:#f92672">=</span> $letter <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L&#39;</span> ? shift @coins : pop @coins;
    push @user, $chosen;

    <span style="color:#75715e"># COMPUTER</span>
    list_coins(<span style="color:#e6db74">&#39;Coins on the table&#39;</span>,@coins);

    $chosen <span style="color:#f92672">=</span> $coins[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $coins[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] ? shift @coins : pop @coins;
    push @computer, $chosen;
    say <span style="color:#e6db74">&#34;Computer chooses: $coin_value{$chosen}&#34;</span>;
}
</code></pre></div><p>Finally, the winner is determined and the results are printed:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say $/ <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;Final Result&#39;</span> <span style="color:#f92672">.</span> $/ <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;-&#39;</span> x <span style="color:#ae81ff">12</span>;
list_coins(<span style="color:#e6db74">&#39;User&#39;</span>,@user);
list_coins(<span style="color:#e6db74">&#39;Computer&#39;</span>,@computer);

<span style="color:#66d9ef">my</span> ($u,$c) <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>);
$u <span style="color:#f92672">+=</span> $_ <span style="color:#66d9ef">for</span> (@user);
$c <span style="color:#f92672">+=</span> $_ <span style="color:#66d9ef">for</span> (@computer);
say $/, $u <span style="color:#f92672">&gt;</span> $c ? <span style="color:#e6db74">&#39;User&#39;</span> : <span style="color:#e6db74">&#39;Computer&#39;</span>, <span style="color:#e6db74">&#39; is the lucky winner!&#39;</span>;
</code></pre></div><h2 id="athanasius2">Athanasius</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/athanasius/perl/ch-2.pl">Athanasius&rsquo;s solution</a> has main logic which assigns the <code>player_move</code> and <code>computer_move</code> subs to <code>$move1</code> or <code>$move2</code>, depending on whether <code>$PLAYER_STARTS</code> is true (i.e., if the player goes first, <code>$move1 = \&amp;player_move</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">const <span style="color:#66d9ef">my</span> $PLAYER_STARTS <span style="color:#f92672">=&gt;</span>  <span style="color:#ae81ff">1</span>;

<span style="color:#66d9ef">my</span>  $computer           <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">my</span>  $player             <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">my</span>  @coins              <span style="color:#f92672">=</span> shuffle keys %COINS;
<span style="color:#66d9ef">my</span>  $round              <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">my</span> ($move1, $move2)     <span style="color:#f92672">=</span> $PLAYER_STARTS ? (<span style="color:#f92672">\&amp;</span>player_move,   <span style="color:#f92672">\&amp;</span>computer_move) :
                                           (<span style="color:#f92672">\&amp;</span>computer_move, <span style="color:#f92672">\&amp;</span>player_move);
</code></pre></div><p>The game loop is then quite elegant:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> (scalar @coins <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
    $move1<span style="color:#f92672">-&gt;</span>( <span style="color:#f92672">\</span>$computer, <span style="color:#f92672">\</span>$player, <span style="color:#f92672">\</span>@coins, <span style="color:#f92672">++</span>$round );
    $move2<span style="color:#f92672">-&gt;</span>( <span style="color:#f92672">\</span>$computer, <span style="color:#f92672">\</span>$player, <span style="color:#f92672">\</span>@coins, <span style="color:#f92672">++</span>$round );
}
</code></pre></div><p>Here is the <code>player_move</code> sub that displays the current game state before prompting the player for their choice:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">player_move</span> {
    <span style="color:#66d9ef">my</span> ($computer, $player, $coins, $round) <span style="color:#f92672">=</span> @_;

    printf <span style="color:#e6db74">&#34;\n%d. Player has £%.2f\t&#34;</span> <span style="color:#f92672">.</span>
             <span style="color:#e6db74">&#34;Computer has £%.2f\n\n&#34;</span> <span style="color:#f92672">.</span>
             <span style="color:#e6db74">&#34;  Coins remaining: %s\n&#34;</span>,
              $round, $$player <span style="color:#e6db74">/ 100, $$computer /</span> <span style="color:#ae81ff">100</span>, join <span style="color:#e6db74">&#39;, &#39;</span>, @$coins;

    <span style="color:#66d9ef">my</span> $key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;L&#39;</span>;

    <span style="color:#66d9ef">if</span> (scalar @$coins <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">do</span> {
            printf <span style="color:#e6db74">&#39;  Select  L[eft]  (%s) or R[ight] (%s): &#39;</span>, @$coins[<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
            $key <span style="color:#f92672">=</span> uc <span style="color:#e6db74">&lt;STDIN&gt;</span>;
            chomp $key;

        } <span style="color:#66d9ef">until</span> ($key <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#f92672">||</span> $key <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;R&#39;</span>);
    }

    <span style="color:#66d9ef">my</span> $coin  <span style="color:#f92672">=</span> $key <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L&#39;</span> ? shift @$coins : pop @$coins;
    $$player <span style="color:#f92672">+=</span> $COINS{ $coin };

    printf <span style="color:#e6db74">&#34;  Player picks:    %s%s\n&#34;</span>, $coin,
            scalar @$coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ? <span style="color:#e6db74">&#39; (forced)&#39;</span> : <span style="color:#e6db74">&#39;&#39;</span>;
}
</code></pre></div><p>And now the <code>computer_move</code> sub:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">computer_move</span> {
    <span style="color:#66d9ef">my</span> ($computer, $player, $coins, $round) <span style="color:#f92672">=</span> @_;

    printf <span style="color:#e6db74">&#34;\n%d. Player has £%.2f\t&#34;</span> <span style="color:#f92672">.</span>
             <span style="color:#e6db74">&#34;Computer has £%.2f\n\n&#34;</span> <span style="color:#f92672">.</span>
             <span style="color:#e6db74">&#34;  Coins remaining: %s\n&#34;</span>,
              $round, $$player <span style="color:#e6db74">/ 100, $$computer /</span> <span style="color:#ae81ff">100</span>, join <span style="color:#e6db74">&#39;, &#39;</span>, @$coins;

    <span style="color:#66d9ef">my</span> $coin    <span style="color:#f92672">=</span> pick_coin($coins) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L&#39;</span> ? shift @$coins : pop @$coins;
    $$computer <span style="color:#f92672">+=</span> $COINS{ $coin };

    printf <span style="color:#e6db74">&#34;  Computer picks:  %s%s\n&#34;</span>,
            $coin, scalar @$coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ? <span style="color:#e6db74">&#39; (forced)&#39;</span> : <span style="color:#e6db74">&#39;&#39;</span>;
}
</code></pre></div><p>There is a decent amount of duplicated (or nearly duplicated) code in the above two subs that could be factored out. They do the job, however!</p>
<p>The <code>pick_coin</code> is the &ldquo;brains&rdquo; behind <code>computer_move</code>, if you will:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">pick_coin</span> {
    <span style="color:#66d9ef">my</span> ($coins)          <span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">my</span>  $coins_remaining <span style="color:#f92672">=</span> scalar @$coins;

    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#66d9ef">if</span> $coins_remaining <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;                   <span style="color:#75715e"># Forced move</span>

    <span style="color:#66d9ef">my</span> ($left, $right) <span style="color:#f92672">=</span> @$coins[<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];

    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#66d9ef">if</span> $left  <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>;                          <span style="color:#75715e"># Strategy (1)</span>
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;R&#39;</span> <span style="color:#66d9ef">if</span> $right <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>;

    <span style="color:#66d9ef">if</span> ($coins_remaining <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">4</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#66d9ef">if</span> $coins<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>;                <span style="color:#75715e"># Strategy (2)</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;R&#39;</span> <span style="color:#66d9ef">if</span> $coins<span style="color:#f92672">-&gt;</span>[ <span style="color:#ae81ff">1</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;£2&#39;</span>;
    }

    <span style="color:#66d9ef">return</span> $COINS{ $left } <span style="color:#f92672">&gt;</span> $COINS{ $right } ? <span style="color:#e6db74">&#39;L&#39;</span> : <span style="color:#e6db74">&#39;R&#39;</span>; <span style="color:#75715e"># Strategy (3)</span>
}
</code></pre></div><p>The computer&rsquo;s strategy is the optimal strategy, to always prefer the £2 coin, and to attempt to block the player from getting it.</p>
<h2 id="cheok-yin-fung2">Cheok-Yin Fung</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/cheok-yin-fung/perl/ch-2.pl">Cheok-Yin Fung&rsquo;s solution</a> allows the player to type in their own list of coins, with units (<code>p</code> or <code>£</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Enter the coins for the game, &#34;</span>
  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;splitted by comma and with their units. \n&#34;</span>;

chomp( <span style="color:#66d9ef">my</span> $enter <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;STDIN&gt;</span> );

<span style="color:#66d9ef">my</span> @coin <span style="color:#f92672">=</span> split <span style="color:#e6db74">/[\s]*,[\s]*/</span>, $enter;

<span style="color:#66d9ef">my</span> @allinpence;

<span style="color:#66d9ef">my</span> $poundsign <span style="color:#f92672">=</span> chr(<span style="color:#ae81ff">156</span>);    <span style="color:#75715e">#or directly £ ...</span>

<span style="color:#75715e">#chr(156) on my Windows Command Prompt,</span>
<span style="color:#75715e">#chr(163) for some character sets (??), e.g. Latin-1</span>
<span style="color:#66d9ef">foreach</span> (@coin) {
    <span style="color:#66d9ef">if</span> ( $_ <span style="color:#f92672">=~</span><span style="color:#e6db74"> /.p$/</span> ) {
        push @allinpence, substr( $_, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> );
    }
    <span style="color:#66d9ef">elsif</span> ( $_ <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^($poundsign)./</span> ) {
        push @allinpence, <span style="color:#ae81ff">100</span> <span style="color:#f92672">*</span> substr( $_, <span style="color:#ae81ff">1</span> );
    }
}
</code></pre></div><h3 id="a-brief-word-on-encodings">A brief word on encodings</h3>
<p>Cheok Yin&rsquo;s comments, above, highlight an issue with the pound symbol (£): it is not encoded the same in <strong>latin1</strong> (i.e., ISO-8859-1) and <strong>utf-8.</strong> (The other issue is that it is difficult to type on most keyboards.) In fact, when importing all of the source code files for this review, I had to convert from at least three different encodings. My script (because of course I have a Perl script for that) attempts to detect the encodings and convert to <strong>utf-8</strong>, but it&rsquo;s not always an exact science.</p>
<hr>
<p>Back to Cheok Yin&rsquo;s solution, the bulk of the code is the computer algorithm for choosing coins. Cheok Yin wanted to unleash some real game theory, and did so with an iterative game tree traversal, which assigns a value to each node. Each top-level branch is compared, and the best one is chosen. Cheok Yin cites a <a href="https://www.coursera.org/learn/combinatorial-game-theory/">Coursera course on Combinatorial Game Theory</a>, as well as one of her textbooks. I always like seeing the resources that people found helpful in solving the challenges.</p>
<p>Here is the iterative step:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span>( $size <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {

    <span style="color:#66d9ef">my</span> $side_sign <span style="color:#f92672">=</span> $#{ $Plist<span style="color:#f92672">-&gt;</span>[$_] } <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;

    <span style="color:#66d9ef">my</span> @temp0 <span style="color:#f92672">=</span> @{ $Plist<span style="color:#f92672">-&gt;</span>[$_] };
    <span style="color:#66d9ef">my</span> $v0    <span style="color:#f92672">=</span> pop @temp0;
    <span style="color:#66d9ef">if</span> ( ( $side_sign <span style="color:#f92672">-</span> $size ) % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        $Pvaluef[ jumptoLc $_] <span style="color:#f92672">=</span> $v0 <span style="color:#f92672">+</span> $Pvaluef[$_];
        $Pvalues[ jumptoLc $_] <span style="color:#f92672">=</span> $Pvalues[$_];
    }
    <span style="color:#66d9ef">else</span> {
        $Pvalues[ jumptoLc $_] <span style="color:#f92672">=</span> $v0 <span style="color:#f92672">+</span> $Pvalues[$_];
        $Pvaluef[ jumptoLc $_] <span style="color:#f92672">=</span> $Pvaluef[$_];
    }

    $Plist<span style="color:#f92672">-&gt;</span>[ jumptoLc $_] <span style="color:#f92672">=</span> <span style="color:#f92672">\</span>@temp0;

    <span style="color:#66d9ef">my</span> @temp1 <span style="color:#f92672">=</span> @{ $Plist<span style="color:#f92672">-&gt;</span>[$_] };
    <span style="color:#66d9ef">my</span> $v1    <span style="color:#f92672">=</span> shift @temp1;
    <span style="color:#66d9ef">if</span> ( ( $side_sign <span style="color:#f92672">-</span> $size ) % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        $Pvaluef[ jumptoRc $_] <span style="color:#f92672">=</span> $v1 <span style="color:#f92672">+</span> $Pvaluef[$_];
        $Pvalues[ jumptoRc $_] <span style="color:#f92672">=</span> $Pvalues[$_];
    }
    <span style="color:#66d9ef">else</span> {
        $Pvalues[ jumptoRc $_] <span style="color:#f92672">=</span> $v1 <span style="color:#f92672">+</span> $Pvalues[$_];
        $Pvaluef[ jumptoRc $_] <span style="color:#f92672">=</span> $Pvaluef[$_];
    }

    $Plist<span style="color:#f92672">-&gt;</span>[ jumptoRc $_] <span style="color:#f92672">=</span> <span style="color:#f92672">\</span>@temp1;
}

<span style="color:#75715e">#the followings are for the end nodes</span>
<span style="color:#66d9ef">foreach</span> ( <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span>( $size <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">..</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span>$size <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
    <span style="color:#66d9ef">if</span> ( $size % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        $Pvalues[$_] <span style="color:#f92672">+=</span> $Plist<span style="color:#f92672">-&gt;</span>[$_][<span style="color:#ae81ff">0</span>];
    }
    <span style="color:#66d9ef">else</span> {
        $Pvaluef[$_] <span style="color:#f92672">+=</span> $Plist<span style="color:#f92672">-&gt;</span>[$_][<span style="color:#ae81ff">0</span>];
    }
}
</code></pre></div><p>Cheok Yin uses <code>$side_sign</code> to assign either a positive weight or a negative weight to a particular node, based on whether it is a node for a computer turn or a player (opponent) turn. In this way, Cheok Yin can obtain the best net payoff.</p>
<p>And here is the induction step, that trundles its way back up the tree:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># backward induction of the game tree</span>
<span style="color:#66d9ef">foreach</span> ( reverse <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span>( $size <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
    <span style="color:#66d9ef">my</span> $side_sign <span style="color:#f92672">=</span> $#{ $Plist<span style="color:#f92672">-&gt;</span>[$_] } <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> ( $Pvaluef[ jumptoLc $_] <span style="color:#f92672">-</span> $Pvalues[ jumptoLc $_] <span style="color:#f92672">&gt;=</span>
        $Pvaluef[ jumptoRc $_] <span style="color:#f92672">-</span> $Pvalues[ jumptoRc $_] )
    {
        <span style="color:#66d9ef">if</span> ( ( $side_sign <span style="color:#f92672">-</span> $size ) % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
            takesL $_;
        }
        <span style="color:#66d9ef">else</span> {
            takesR $_;
        }
    }
    <span style="color:#66d9ef">elsif</span> ( ( $side_sign <span style="color:#f92672">-</span> $size ) % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        takesR $_;
    }
    <span style="color:#66d9ef">else</span> {
        takesL $_;
    }
}
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/c_y_fung/2020/03/cys-take-on-perl-weekly-challenge-052.html">CY&rsquo;s Take on Perl Weekly Challenge #052</a></p>
<h2 id="colin-crain2">Colin Crain</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/colin-crain/perl/ch-2.pl">Colin Crain&rsquo;s solution</a> starts with a discussion on the strategy, where Colin realizes that, in fact, <em>&ldquo;whoever gets the £2 coin wins the game,&quot;</em> and that <em>&ldquo;there is no lucky winner; rather than a friendly wager it appears we have a bar bet hustle, with a insincere instigator pulling a fast one on an unsuspecting dupe.&quot;</em> Spot on, Colin.</p>
<p>Colin starts with the coins given in the task, but shuffles them:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @draw <span style="color:#f92672">=</span> shuffle( <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">2</span> );
<span style="color:#66d9ef">my</span> $coins <span style="color:#f92672">=</span> <span style="color:#f92672">\</span>@draw;
</code></pre></div><h3 id="a-tangent-on-shuffle">A tangent on <code>shuffle</code></h3>
<p>At first I thought Colin used <code>shuffle</code> from <a href="https://perldoc.perl.org/List/Util.html"><code>List::Util</code></a>. As it turns out, he implemented his own shuffle with <code>splice</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">shuffle</span> {
    <span style="color:#66d9ef">my</span> @input <span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">my</span> @output;
    <span style="color:#66d9ef">while</span> (scalar @input) {
        <span style="color:#66d9ef">my</span> $idx <span style="color:#f92672">=</span> int rand (scalar @input);
        push @output, splice(@input, $idx, <span style="color:#ae81ff">1</span>);
    }
    <span style="color:#66d9ef">return</span> @output;
}
</code></pre></div><p>With that <code>splice</code> in there repeatedly removing elements from the array, I was curious about the efficiency over a standard Fisher-Yates shuffle, which exchanges elements in-place instead. Here&rsquo;s the most standard F-Y shuffle implementation I could come up with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># F-Y Shuffle, Ryan&#39;s implementation</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">swap_slice</span> {
    <span style="color:#66d9ef">my</span> @l <span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">my</span> $len <span style="color:#f92672">=</span> @l;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $m (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#l) {
        <span style="color:#66d9ef">my</span> $n <span style="color:#f92672">=</span> $m <span style="color:#f92672">+</span> int rand($len <span style="color:#f92672">-</span> $m);
        @l[$m, $n] <span style="color:#f92672">=</span> @l[$n, $m];
    }
    @l;
}
</code></pre></div><p>Somewhat to my surprise, Colin&rsquo;s <code>splice</code> version performed very well. It was nearly equal on up to about 1000 elements, before it slowed down relative to the other methods. What about <code>List::Util</code>'s <code>shuffle</code> though? <code>List::Util</code> is a core module and its <code>shuffle</code> is <a href="https://metacpan.org/source/PEVANS/Scalar-List-Utils-1.54/ListUtil.xs#L1218">pure C code</a>, but still F-Y.</p>
<pre><code>               Rate     splice swap_slice       swap List::Util
splice      17500/s         --        -1%        -2%       -95%
swap_slice  17603/s         1%         --        -2%       -95%
List::Util 377555/s      2057%      2045%      2005%         --
</code></pre><p>This is why I usually just use the <code>List::Util</code> that ships with Perl. However, Colin has (wittingly or not) stumbled upon the true power of rolling his own <code>shuffle</code>: completely de-railing this reviewer for a solid ten minutes.</p>
<p>Let&rsquo;s shuffle our way back to the code Colin probably thought I&rsquo;d talk about, shall we?</p>
<hr>
<p>The main loop goes while there are coins remaining, and calls <code>player0_move</code> or <code>player1_move</code> alternately, to decide what to do:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> (scalar $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span>) {
    <span style="color:#66d9ef">my</span> $taken <span style="color:#f92672">=</span> $turn <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ? player0_move($coins) : player1_move($coins);
    $player{<span style="color:#e6db74">&#34;$turn&#34;</span>} <span style="color:#f92672">+=</span> $taken;
    say <span style="color:#e6db74">&#34;player $turn takes:&#34;</span>;
    say <span style="color:#e6db74">&#34;\t$taken&#34;</span>;
    say <span style="color:#e6db74">&#34;\t\tplayer total : $player{$turn} &#34;</span>;
    say <span style="color:#e6db74">&#39;&#39;</span>;

    <span style="color:#75715e">## toggle the turn bit</span>
    $turn <span style="color:#f92672">^=</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>The two &ldquo;players&rdquo; each have a sub for movement. <code>player0</code> is clearly the smarter of the two (note that <code>find_target</code> returns the value of the largest coin in the set):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">player0_move</span> {
<span style="color:#75715e">## apply the winning algorithm to the line</span>
<span style="color:#75715e">## return the coin taken</span>
    <span style="color:#66d9ef">my</span> $coins  <span style="color:#f92672">=</span> shift @_;
    <span style="color:#66d9ef">my</span> $length <span style="color:#f92672">=</span> scalar $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> <span style="color:#960050;background-color:#1e0010">-</span> 1;

    <span style="color:#75715e">## target_index will always be defined as target is largest value coin in the line</span>
    <span style="color:#66d9ef">my</span> $target <span style="color:#f92672">=</span> find_target( $coins );
    <span style="color:#66d9ef">my</span> ($target_index) <span style="color:#f92672">=</span> grep { $coins<span style="color:#f92672">-&gt;</span>[$_] <span style="color:#f92672">==</span> $target } (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$length);

    <span style="color:#66d9ef">my</span> $left  <span style="color:#f92672">=</span> $target_index;
    <span style="color:#66d9ef">my</span> $right <span style="color:#f92672">=</span> $length <span style="color:#f92672">-</span> $target_index;

    <span style="color:#66d9ef">if</span> ($right <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">return</span> pop $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
    <span style="color:#960050;background-color:#1e0010">}</span>
    elsif ($left <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> $left <span style="color:#f92672">&gt;</span> $right) {
        <span style="color:#66d9ef">return</span> shift $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
    <span style="color:#960050;background-color:#1e0010">}</span>
    else {
        <span style="color:#66d9ef">return</span> pop $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
    <span style="color:#960050;background-color:#1e0010">}</span>
<span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><p>This is a variant on the &ldquo;pick the biggest, or pick from the other end&rdquo; strategy we&rsquo;ve seen.</p>
<p><code>player1</code> implements a greedy approach, of simply picking the largest coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">player1_move</span> {
<span style="color:#75715e">## remove the largest coin from the the ends of the line</span>
    <span style="color:#66d9ef">my</span> $coins  <span style="color:#f92672">=</span> shift @_;
    <span style="color:#66d9ef">return</span> $coins<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $coins<span style="color:#f92672">-&gt;</span>[scalar $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> <span style="color:#960050;background-color:#1e0010">-</span> 1] ? shift $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> : pop $coins<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
<span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><h2 id="cristian-heredia2">Cristina Heredia</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/cristian-heredia/perl/ch-2.pl">Cristina Heredia&rsquo;s solution</a> has two subs, <code>pcTime</code> and <code>playerTime</code> which handle the turns for the computer and human player, respectively.</p>
<p><code>playerTime</code> handles the input, removes the selected coin from the lineup, and adds its <code>$value</code> to the player&rsquo;s total score (<code>$playerTotal</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">playerTime</span> {

    <span style="color:#66d9ef">if</span> ($length <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;The coins are arranged in the following:\n@coins\n&#34;</span>;
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Which end do you want to choose, left (l) or right (r)?\n&#34;</span>;

        $choise <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;&gt;</span>;
        $choise <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;

        <span style="color:#66d9ef">if</span> ($choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;left&#39;</span> <span style="color:#f92672">or</span> $choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;l&#39;</span>) {
            $value <span style="color:#f92672">=</span> shift @coins;
            $value <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
            removeLetter($value);
            $playerTotal <span style="color:#f92672">=</span> $playerTotal <span style="color:#f92672">+</span> $value;
            $length<span style="color:#f92672">--</span>;
            pcTime();
        }
        <span style="color:#66d9ef">elsif</span> ($choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;right&#39;</span> <span style="color:#f92672">or</span> $choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;r&#39;</span>) {
            $value <span style="color:#f92672">=</span> pop @coins;
            $value <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
            removeLetter($value);
            $playerTotal <span style="color:#f92672">=</span> $playerTotal <span style="color:#f92672">+</span> $value;
            $length<span style="color:#f92672">--</span>;
            pcTime();
        }
        <span style="color:#66d9ef">else</span> {
            playerTime();
        }
    }
    <span style="color:#66d9ef">else</span> {
        winner();
    }
}
</code></pre></div><p><code>pcTime</code> has some similar code, but replaces the user input with a call to
<code>compareResults</code>, which we&rsquo;ll look at in a minute. Here is <code>pcTime</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">pcTime</span> {

    <span style="color:#66d9ef">if</span> ($length <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {

        compareResults();
        <span style="color:#66d9ef">if</span> ($choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;l&#39;</span>) {
            $value <span style="color:#f92672">=</span> shift @coins;
            $value <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
            removeLetter($value);
            $pcTotal <span style="color:#f92672">=</span> $pcTotal <span style="color:#f92672">+</span> $value;
            $length<span style="color:#f92672">--</span>;
            playerTime();

        }
        <span style="color:#66d9ef">elsif</span> ($choise <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;r&#39;</span>) {
            $value <span style="color:#f92672">=</span> pop @coins;
            $value <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
            removeLetter($value);
            $pcTotal <span style="color:#f92672">=</span> $pcTotal <span style="color:#f92672">+</span> $value;
            $length<span style="color:#f92672">--</span>;
            playerTime();
        }
        <span style="color:#66d9ef">else</span> {
            pcTime();
        }
    }
    <span style="color:#66d9ef">else</span> {
        winner();
    }
}
</code></pre></div><p><code>compareResults</code> contains the computer strategy. Cristina has decided to go with a greedy method, choosing the side with the biggest coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">compareResults</span> {

    $first <span style="color:#f92672">=</span> $coins[<span style="color:#ae81ff">0</span>];
    $first <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
    $first <span style="color:#f92672">=</span> removeLetter($first);

    $last <span style="color:#f92672">=</span> $coins[$length<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
    $last <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/^\s+|\s+$//g</span>;
    $last <span style="color:#f92672">=</span> removeLetter($last);

    <span style="color:#66d9ef">if</span> ($first <span style="color:#f92672">&gt;</span> $last) {
        $choise <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;l&#39;</span>;
    }
    <span style="color:#66d9ef">else</span> {
        $choise <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;r&#39;</span>;
    }
    <span style="color:#66d9ef">return</span> $choise;
}
</code></pre></div><p>Finally, Cristina prints out a &ldquo;winner&rdquo; message, along with the winner&rsquo;s total score:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">winner</span> {
    <span style="color:#66d9ef">if</span> ($playerTotal <span style="color:#f92672">&gt;</span> $pcTotal) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;The winner is the user with a total of: $playerTotal\n&#34;</span>;
    }
    <span style="color:#66d9ef">elsif</span> ($playerTotal <span style="color:#f92672">&lt;</span> $pcTotal) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;The winner is the pc with a total of: $pcTotal\n&#34;</span>;
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;There is an draw between the user and the pc, with a result of: $playerTotal\n&#34;</span>;
    }
}
</code></pre></div><p>With this particular group of coins, a draw is not possible since whoever gets the £2 coin will have at least that much, and whoever doesn&rsquo;t will have less than 188p, as that is what the rest of the coins sum to. However, I agree with Cristina&rsquo;s including the option, as there are other configurations of coins that could result in a draw.</p>
<h2 id="dave-cross2">Dave Cross</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/dave-cross/perl/ch-2.pl">Dave Cross&rsquo;s solution</a> went full machine vs. machine with his solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @coins <span style="color:#f92672">=</span> <span style="color:#e6db74">qw[£1 50p 1p 10p 5p 20p £2 2p]</span>;
<span style="color:#66d9ef">my</span> @amts  <span style="color:#f92672">=</span> map { coin2amt($_) } @coins;

<span style="color:#66d9ef">my</span> ( $player1, $player2 );
<span style="color:#66d9ef">my</span> $turn <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;

<span style="color:#66d9ef">while</span> (@amts) {
    <span style="color:#66d9ef">if</span> ( $turn % 2 ) {
        say <span style="color:#e6db74">&#34;Player 1 ...&#34;</span>;
        $player1 <span style="color:#f92672">+=</span> pick_coin( <span style="color:#f92672">\</span>@amts );
        say <span style="color:#e6db74">&#34;... has &#34;</span>, amt2coins($player1);
    }
    <span style="color:#66d9ef">else</span> {
        say <span style="color:#e6db74">&#34;Player 2 ...&#34;</span>;
        $player2 <span style="color:#f92672">+=</span> pick_coin( <span style="color:#f92672">\</span>@amts );
        say <span style="color:#e6db74">&#34;... has &#34;</span>, amt2coins($player2);
    }
    $turn<span style="color:#f92672">++</span>;
}

say <span style="color:#e6db74">&#34;Player one has: &#34;</span>, amt2coins($player1);
say <span style="color:#e6db74">&#34;Player two has: &#34;</span>, amt2coins($player2);
</code></pre></div><p>The <code>pick_coin</code> sub is greedy (highest coin):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">pick_coin</span> {
    <span style="color:#66d9ef">my</span> ($remaining) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">if</span> ( $remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] ) {
        say <span style="color:#e6db74">&#34;... takes &#34;</span>, amt2coins( $remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] );
        <span style="color:#66d9ef">return</span> shift @$remaining;
    }
    <span style="color:#66d9ef">else</span> {
        say <span style="color:#e6db74">&#34;... takes &#34;</span>, amt2coins( $remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] );
        <span style="color:#66d9ef">return</span> pop @$remaining;
    }
}
</code></pre></div><p>Dave also came up with concise routines to convert to and from the friendly coin values such as £2, and their value in pence, such as 200:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">coin2amt</span> {
    $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/p$//</span>;
    $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/£(\d+)/100*$1/e</span>;

    <span style="color:#66d9ef">return</span> $_[<span style="color:#ae81ff">0</span>];
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">amt2coins</span> {
    <span style="color:#66d9ef">return</span> $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span> ? <span style="color:#e6db74">&#34;$_[0]p&#34;</span> : <span style="color:#e6db74">&#39;£&#39;</span> <span style="color:#f92672">.</span> $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>;
}
</code></pre></div><h2 id="dave-jacoby2">Dave Jacoby</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/dave-jacoby/perl/ch-2.pl">Dave Jacoby&rsquo;s solution</a> is another journey into game theory, this time using a recursive implementation of the game tree (also known as a decision tree). Here is the recursive routine. It&rsquo;s quite long, so I&rsquo;ll show the listing first, and then step you through the main features:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">decision_tree</span> ( $coins, $c_list, $h_list, $pos, $history, $depth = 0 ) {

    <span style="color:#75715e"># croak &#39;Too Few Coins&#39; if scalar @$coins &lt; 2;</span>
    <span style="color:#75715e"># display( $coins, $c_list, $h_list, $pos, $history );</span>

    <span style="color:#66d9ef">if</span> ( scalar @$coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {

        <span style="color:#75715e"># display( $coins, $c_list, $h_list, $pos, $history );</span>
        <span style="color:#66d9ef">my</span> $c_sum <span style="color:#f92672">=</span> sum0 map { value($_) } $c_list<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
        my $h_sum <span style="color:#f92672">=</span> sum0 map { value($_) } $h_list<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
        return ( <span style="color:#e6db74">&#39;L&#39;</span>, $c_sum <span style="color:#f92672">+</span> <span style="color:#ae81ff">100</span> ) <span style="color:#66d9ef">if</span> $c_sum <span style="color:#f92672">&gt;</span> $h_sum;
        <span style="color:#66d9ef">return</span> ( <span style="color:#e6db74">&#39;L&#39;</span>, $c_sum );

    }

    <span style="color:#66d9ef">my</span> $left;
    <span style="color:#66d9ef">my</span> $right;
    {
        <span style="color:#66d9ef">my</span> $lhist;
        @$lhist <span style="color:#f92672">=</span> @$history;
        push @$lhist, join <span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;L&#39;</span>, $pos ? <span style="color:#e6db74">&#39;C&#39;</span> : <span style="color:#e6db74">&#39;H&#39;</span>;
        <span style="color:#66d9ef">my</span> $lcoins;
        <span style="color:#66d9ef">my</span> $clist;
        <span style="color:#66d9ef">my</span> $hlist;
        @$lcoins <span style="color:#f92672">=</span> @$coins;
        @$clist  <span style="color:#f92672">=</span> @$c_list;
        @$hlist  <span style="color:#f92672">=</span> @$h_list;
        <span style="color:#66d9ef">my</span> $coin <span style="color:#f92672">=</span> shift @$lcoins;
        <span style="color:#66d9ef">if</span>   ($pos) { push @$clist, $coin }
        <span style="color:#66d9ef">else</span>        { push @$hlist, $coin }
        ( undef, $left ) <span style="color:#f92672">=</span>
          decision_tree( $lcoins, $clist, $hlist, int <span style="color:#f92672">!</span>$pos, $lhist,
            $depth <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> );
    }
    {
        <span style="color:#66d9ef">my</span> $lhist;
        @$lhist <span style="color:#f92672">=</span> @$history;
        push @$lhist, join <span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;R&#39;</span>, $pos ? <span style="color:#e6db74">&#39;C&#39;</span> : <span style="color:#e6db74">&#39;H&#39;</span>;
        <span style="color:#66d9ef">my</span> $lcoins;
        <span style="color:#66d9ef">my</span> $clist;
        <span style="color:#66d9ef">my</span> $hlist;
        @$lcoins <span style="color:#f92672">=</span> @$coins;
        @$clist  <span style="color:#f92672">=</span> @$c_list;
        @$hlist  <span style="color:#f92672">=</span> @$h_list;
        <span style="color:#66d9ef">my</span> $coin <span style="color:#f92672">=</span> pop @$lcoins;
        <span style="color:#66d9ef">if</span>   ($pos) { push @$clist, $coin }
        <span style="color:#66d9ef">else</span>        { push @$hlist, $coin }
        ( undef, $right ) <span style="color:#f92672">=</span>
          decision_tree( $lcoins, $clist, $hlist, int <span style="color:#f92672">!</span>$pos, $lhist,
            $depth <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> );
    }

    <span style="color:#75715e"># say join qq{\t}, $depth, &#39;LEFT&#39;, $left, &#39;RIGHT&#39;, $right;</span>

    <span style="color:#66d9ef">if</span> ( $left <span style="color:#f92672">&gt;</span> $right ) {
        <span style="color:#66d9ef">return</span> ( <span style="color:#e6db74">&#39;L&#39;</span>, $left <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span> );
    }
    <span style="color:#66d9ef">elsif</span> ( $left <span style="color:#f92672">&lt;</span> $right ) {
        <span style="color:#66d9ef">return</span> ( <span style="color:#e6db74">&#39;R&#39;</span>, $right <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span> );
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> ( <span style="color:#e6db74">&#39;R&#39;</span>, $right );
    }
}
</code></pre></div><p>The two large code blocks are mostly duplicated code, one for each choice (<code>L</code> or <code>R</code>), so we can look at them together. Those blocks are the (co)recursion step. Dave copies the important state variables, <code>pop</code>s or <code>shift</code>s a coin from the copy of <code>$coins</code>, and then recurses.</p>
<p>The base case (no coins remaining) calculates the score for the computer and human, and then returns the computer&rsquo;s sum, with a 100 point bonus if the computer&rsquo;s score is higher:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">if</span> ( scalar @$coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {

        <span style="color:#75715e"># display( $coins, $c_list, $h_list, $pos, $history );</span>
        <span style="color:#66d9ef">my</span> $c_sum <span style="color:#f92672">=</span> sum0 map { value($_) } $c_list<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
        my $h_sum <span style="color:#f92672">=</span> sum0 map { value($_) } $h_list<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*;</span>
        return ( <span style="color:#e6db74">&#39;L&#39;</span>, $c_sum <span style="color:#f92672">+</span> <span style="color:#ae81ff">100</span> ) <span style="color:#66d9ef">if</span> $c_sum <span style="color:#f92672">&gt;</span> $h_sum;
        <span style="color:#66d9ef">return</span> ( <span style="color:#e6db74">&#39;L&#39;</span>, $c_sum );
    }
</code></pre></div><p>Finally, the end of the function takes the result from both the left and right recursive calls, and returns <code>L</code> or <code>R</code> plus the winning score. 10 is added to the score if there is a winner, otherwise nothing is added in the case of a draw.</p>
<p>You can see this subroutine called from the main loop of Dave&rsquo;s program:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> ( scalar @coins ) {
    display( <span style="color:#f92672">\</span>@coins, <span style="color:#f92672">\</span>@c_list, <span style="color:#f92672">\</span>@h_list, <span style="color:#ae81ff">1</span>, <span style="color:#f92672">\</span>@history );

    <span style="color:#66d9ef">my</span> $coins <span style="color:#f92672">=</span> join <span style="color:#e6db74">&#39; &#39;</span>, @coins;
    say <span style="color:#e6db74">&lt;&lt;&#34;</span><span style="color:#e6db74">END</span><span style="color:#e6db74">&#34;;
</span><span style="color:#e6db74">    Choose &#34;L&#34; or &#34;R&#34; to pick a coin from the list
</span><span style="color:#e6db74">    Or &#34;Q&#34; to quit
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">END</span>
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">q{Choose(L/R/Q):}</span>;
    <span style="color:#66d9ef">my</span> $choice <span style="color:#f92672">=</span> uc <span style="color:#e6db74">&lt;STDIN&gt;</span>;
    chomp $choice;

    <span style="color:#66d9ef">if</span> ( $choice <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;Q&#39;</span> ) { say <span style="color:#e6db74">&#39;Good Game!&#39;</span> <span style="color:#f92672">&amp;&amp;</span> exit; }
    <span style="color:#66d9ef">if</span> ( $choice <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L&#39;</span> <span style="color:#f92672">||</span> $choice <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;R&#39;</span> ) {
        choice( <span style="color:#e6db74">&#39;HUMAN&#39;</span>, $choice );
        <span style="color:#66d9ef">my</span> ( $comp, $score ) <span style="color:#f92672">=</span>
          decision_tree( <span style="color:#f92672">\</span>@coins, <span style="color:#f92672">\</span>@c_list, <span style="color:#f92672">\</span>@h_list, <span style="color:#ae81ff">1</span>, <span style="color:#f92672">\</span>@history );
        choice( <span style="color:#e6db74">&#39;COMPUTER&#39;</span>, $comp );
    }
}
</code></pre></div><p>Dave expressed some reservations as to whether his recursive code (which he says he coded from memory, which is impressive) produced optimal results or not. At first glance, this isn&rsquo;t the true <a href="https://en.wikipedia.org/wiki/Minimax">minimax</a> Dave was going for, though most of the structure is there to make it (or any other game tree) work.</p>
<p>It looks like the routine tries to roughly maximize its overall outcome, leading the computer to pick the side that would be best if the player played poorly.</p>
<p><strong>Blog</strong> › <a href="https://jacoby.github.io/2020/03/16/minimax-british-coins-and-oldschool-ai-in-perl.html">Minimax, British Coins and Old-School AI in Perl</a></p>
<h2 id="duncan-c-white2">Duncan C. White</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/duncan-c-white/perl/ch-2.pl">Duncan C. White&rsquo;s solution</a> also has a computer player that knows how to get the £2 coin (and prevent the human player from doing so):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#    The $biggest coin (with these coins the £2 coin) is critical: pick</span>
<span style="color:#75715e">#    it if it&#39;s at either end, otherwise prevent it from getting to either</span>
<span style="color:#75715e">#    end..  if it&#39;s already been picked, calculate the biggest remaining</span>
<span style="color:#75715e">#    and apply the same strategy to that value..</span>
<span style="color:#75715e">#</span>
fun pick_first_or_last(@coins) {
    <span style="color:#66d9ef">my</span> $firstc <span style="color:#f92672">=</span> $coins[<span style="color:#ae81ff">0</span>];
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;first&#39;</span> <span style="color:#66d9ef">if</span> $firstc <span style="color:#f92672">==</span> $biggest;
    <span style="color:#66d9ef">my</span> $lastc <span style="color:#f92672">=</span> $coins[$#coins];
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;last&#39;</span> <span style="color:#66d9ef">if</span> $lastc <span style="color:#f92672">==</span> $biggest;

    <span style="color:#75715e"># find position of biggest (if it&#39;s still here)</span>
    <span style="color:#66d9ef">my</span> @bigpos <span style="color:#f92672">=</span> grep { $coins[$_] <span style="color:#f92672">==</span> $biggest } <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#coins;

    <span style="color:#75715e"># if not here.. change biggest to the biggest that is still here</span>
    <span style="color:#66d9ef">if</span> ( @bigpos <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        $biggest <span style="color:#f92672">=</span> max(@coins);

        <span style="color:#75715e"># find the position of that new biggest</span>
        @bigpos <span style="color:#f92672">=</span> grep { $coins[$_] <span style="color:#f92672">==</span> $biggest } <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#coins;
    }

    <span style="color:#75715e"># now: @bigpos==1, $bigpos[0] is the position of that biggest.</span>
    <span style="color:#66d9ef">my</span> $nbp <span style="color:#f92672">=</span> @bigpos;
    die <span style="color:#e6db74">&#34;logic error, bigpos array has $nbp elements, should be 1\n&#34;</span>
      <span style="color:#66d9ef">unless</span> $nbp <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">my</span> $bigpos <span style="color:#f92672">=</span> shift @bigpos;

    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;last&#39;</span>  <span style="color:#66d9ef">if</span> $bigpos <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;              <span style="color:#75715e"># biggest very close to front</span>
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;first&#39;</span> <span style="color:#66d9ef">if</span> $bigpos <span style="color:#f92672">==</span> $#coins <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;    <span style="color:#75715e"># biggest very close to back</span>

    <span style="color:#75715e"># pick bigger</span>
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;last&#39;</span> <span style="color:#66d9ef">if</span> $coins[$#coins] <span style="color:#f92672">&gt;</span> $coins[<span style="color:#ae81ff">0</span>];
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;first&#39;</span>;
}
</code></pre></div><p>Duncan first picks a random player to start, before going in to the main loop, which loops while there are still <code>@coins</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $humtot  <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">my</span> $comptot <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

<span style="color:#75715e"># randomise who plays first</span>
<span style="color:#66d9ef">my</span> $player <span style="color:#f92672">=</span> int( rand(<span style="color:#ae81ff">2</span>) );                     <span style="color:#75715e"># 0 is human, 1 is computer</span>
<span style="color:#66d9ef">my</span> @who    <span style="color:#f92672">=</span> <span style="color:#e6db74">qw(You I)</span>;

say <span style="color:#e6db74">&#34;$who[$player] play first&#34;</span>;

<span style="color:#66d9ef">while</span> (@coins) {
    say <span style="color:#e6db74">&#34;coins: &#34;</span>, join( <span style="color:#e6db74">&#39;,&#39;</span>, @coins );
    <span style="color:#66d9ef">if</span> ( $player <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        <span style="color:#66d9ef">my</span> $choice <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;f&#39;</span>;
        <span style="color:#66d9ef">if</span> ( @coins <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> ) {
            <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34; pick first coin (f) or last coin (l)? &#34;</span>;
            $choice <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;STDIN&gt;</span>;
            chomp $choice;
            $choice <span style="color:#f92672">=</span> lc($choice);
        }

        <span style="color:#66d9ef">my</span> $coin <span style="color:#f92672">=</span> ( $choice <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;f&#39;</span> ) ? shift @coins : pop @coins;
        $humtot <span style="color:#f92672">+=</span> $coin;
        say <span style="color:#e6db74">&#34; you picked $coin, your total is now $humtot&#34;</span>;
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">my</span> $choice <span style="color:#f92672">=</span> pick_first_or_last(@coins);
        say <span style="color:#e6db74">&#34; I pick $choice coin&#34;</span>;

        <span style="color:#66d9ef">my</span> $coin <span style="color:#f92672">=</span> ( $choice <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;first&#39;</span> ) ? shift @coins : pop @coins;
        $comptot <span style="color:#f92672">+=</span> $coin;
        say <span style="color:#e6db74">&#34; I picked $coin, my total is now $comptot&#34;</span>;
    }

    <span style="color:#75715e"># switch players</span>
    $player <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> $player;
}
</code></pre></div><p>As I&rsquo;ve come to expect from Duncan, his solution is well designed and well documented, which is valuable for tasks like this requiring longer solutions.</p>
<h2 id="e-choroba2">E. Choroba</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/e-choroba/perl/ch-2.pl">E. Choroba&rsquo;s solution</a> includes a <code>My::Game</code> package using <a href="https://metacpan.org/pod/Moo"><code>Moo</code></a>, giving an OO interface into the game functions:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">{   <span style="color:#66d9ef">package</span> My::Game;
    <span style="color:#66d9ef">use</span> Moo;

    has [<span style="color:#e6db74">qw[ player1 player2 ]</span>] <span style="color:#f92672">=&gt;</span> (
        is <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;rw&#39;</span>, default <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>, init_arg <span style="color:#f92672">=&gt;</span> undef);
    has coins <span style="color:#f92672">=&gt;</span> (is <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;ro&#39;</span>, required <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>);
    has remaining <span style="color:#f92672">=&gt;</span> (is <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;rw&#39;</span>, lazy <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>, builder <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;coins&#39;</span>);
</code></pre></div><p>The <code>auto</code> method controls the computer&rsquo;s actions. Choroba realized that the £2 coin is the key, and implemented the same strategy we&rsquo;ve seen before:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">auto</span> {
        <span style="color:#66d9ef">my</span> ($self) <span style="color:#f92672">=</span> @_;
        <span style="color:#66d9ef">if</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> @{ $self<span style="color:#f92672">-&gt;</span>remaining }
            <span style="color:#f92672">||</span> $self<span style="color:#f92672">-&gt;</span>remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>
        ) {
            $self<span style="color:#f92672">-&gt;</span>turn(<span style="color:#e6db74">&#39;l&#39;</span>);
        } <span style="color:#66d9ef">elsif</span> ($self<span style="color:#f92672">-&gt;</span>remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>
                 <span style="color:#f92672">||</span> $self<span style="color:#f92672">-&gt;</span>remaining<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>
             ) {
            $self<span style="color:#f92672">-&gt;</span>turn(<span style="color:#e6db74">&#39;r&#39;</span>);
        } <span style="color:#66d9ef">else</span> {
            $self<span style="color:#f92672">-&gt;</span>turn(<span style="color:#e6db74">&#39;l&#39;</span>);
        };
    }
</code></pre></div><p>The <code>turn</code> method takes a turn (this works for the player or the computer):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">turn</span> {
        <span style="color:#66d9ef">my</span> ($self, $where) <span style="color:#f92672">=</span> @_;
        $where <span style="color:#f92672">=</span> lc substr $where, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">my</span> $pos <span style="color:#f92672">=</span> { l <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>, r <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> }<span style="color:#f92672">-&gt;</span>{$where};
        $self<span style="color:#f92672">-&gt;</span>player1($self<span style="color:#f92672">-&gt;</span>player1 <span style="color:#f92672">+</span> splice @{ $self<span style="color:#f92672">-&gt;</span>remaining }, $pos, <span style="color:#ae81ff">1</span>);
        $self<span style="color:#f92672">-&gt;</span>switch;
    }
</code></pre></div><p>The <code>switch</code> method changes the active player, to be called in between turns:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">switch</span> {
        <span style="color:#66d9ef">my</span> ($self) <span style="color:#f92672">=</span> @_;
        <span style="color:#66d9ef">my</span> $p <span style="color:#f92672">=</span> $self<span style="color:#f92672">-&gt;</span>player1;
        $self<span style="color:#f92672">-&gt;</span>player1($self<span style="color:#f92672">-&gt;</span>player2);
        $self<span style="color:#f92672">-&gt;</span>player2($p);
    }
</code></pre></div><p>Actually instantiating and using a <code>My::Game</code> object is quite simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> List::Util <span style="color:#e6db74">qw{ shuffle }</span>;
<span style="color:#66d9ef">my</span> @coins <span style="color:#f92672">=</span> shuffle(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">2</span>);

say <span style="color:#e6db74">&#34;@coins&#34;</span>;
say <span style="color:#e6db74">&#34;Input &#39;left&#39; or &#39;right&#39; (or just &#39;l&#39; or &#39;r&#39;).&#34;</span>;

<span style="color:#66d9ef">my</span> $starting_player <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> int rand <span style="color:#ae81ff">2</span>;
say <span style="color:#e6db74">&#34;Starting player: $starting_player&#34;</span>;

<span style="color:#66d9ef">my</span> $game <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;My::Game&#39;</span><span style="color:#f92672">-&gt;</span><span style="color:#66d9ef">new</span>(coins <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>@coins);
$game<span style="color:#f92672">-&gt;</span>auto <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> $starting_player;

<span style="color:#66d9ef">until</span> ($game<span style="color:#f92672">-&gt;</span>finished) {
    say $game<span style="color:#f92672">-&gt;</span>status;
    <span style="color:#66d9ef">my</span> $where;
    <span style="color:#66d9ef">do</span> {
        chomp( $where <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;&gt;</span> );
    } <span style="color:#66d9ef">until</span> $where <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^(l(eft)?|r(ight)?)$/i</span>;

    $game<span style="color:#f92672">-&gt;</span>turn($where);

    $game<span style="color:#f92672">-&gt;</span>auto <span style="color:#66d9ef">unless</span> $game<span style="color:#f92672">-&gt;</span>finished;
}
$game<span style="color:#f92672">-&gt;</span>switch <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> $starting_player;
say $game<span style="color:#f92672">-&gt;</span>status, $game<span style="color:#f92672">-&gt;</span>result;
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/03/perl-weekly-challenge-052-stepping-numbers-lucky-winner.html">052: Stepping Numbers &amp; Lucky Winner</a></p>
<h2 id="javier-luque2">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/javier-luque/perl/ch-2.pl">Javier Luque&rsquo;s solution</a> is one of the shortest at 34 lines. The computer greedily takes the largest coin on offer, and plays against itself:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Getopt::Long;

<span style="color:#75715e"># Optimal flag</span>
<span style="color:#66d9ef">my</span> $optimal <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
GetOptions (<span style="color:#e6db74">&#39;optimal&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>$optimal);

<span style="color:#75715e"># Some initialization variables</span>
<span style="color:#66d9ef">my</span> @coins <span style="color:#f92672">=</span> (<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">my</span> $players <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
<span style="color:#66d9ef">my</span> $player_turn <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">my</span> @totals <span style="color:#f92672">=</span> map { <span style="color:#ae81ff">0</span> } <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $players;

<span style="color:#75715e"># Play the game</span>
<span style="color:#66d9ef">while</span> (scalar(@coins) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
    <span style="color:#66d9ef">if</span> ( ($optimal <span style="color:#f92672">&amp;&amp;</span> $player_turn <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">||</span>
          $coins[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $coins[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] ) {
        $totals[$player_turn] <span style="color:#f92672">+=</span> shift @coins;
    } <span style="color:#66d9ef">else</span> {
        $totals[$player_turn] <span style="color:#f92672">+=</span> pop @coins;
    }

    <span style="color:#75715e"># Next turn</span>
    $player_turn <span style="color:#f92672">=</span> ($player_turn <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) % <span style="color:#960050;background-color:#1e0010">$</span>players;
}

<span style="color:#75715e"># Display the scores</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$players) {
    say <span style="color:#e6db74">&#34;Player $i total: &#34;</span> <span style="color:#f92672">.</span> $totals[$i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;p&#39;</span>;
}
</code></pre></div><p>In his blog, Javier acknowledges the greedy method isn&rsquo;t the optimal solution. It serves the purposes of this challenge, however.</p>
<p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/03/16/perl-weekly-challenge-052/">052 – Perl Weekly Challenge</a></p>
<h2 id="laurent-rosenfeld2">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/laurent-rosenfeld/perl/ch-2.pl">Laurent Rosenfeld&rsquo;s solution</a> also has a rather concise solution. His is a computer-vs-human game, whereby the computer makes the optimal move to try to capture the most valuable coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @coins <span style="color:#f92672">=</span> @ARGV <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ? @ARGV : (<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">2</span>);

<span style="color:#66d9ef">my</span> ($index200) <span style="color:#f92672">=</span> grep $coins[$_] <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#coins;
<span style="color:#66d9ef">my</span> @before <span style="color:#f92672">=</span> @coins[<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$index200<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
<span style="color:#66d9ef">my</span> @after <span style="color:#f92672">=</span> @coins[$index200<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#coins];
ask();
<span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> $move <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;STDIN&gt;</span>) {
    chomp $move;
    <span style="color:#66d9ef">last</span> <span style="color:#66d9ef">if</span> $move <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">my</span> $coin;
    <span style="color:#66d9ef">if</span> ($move <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;B&#34;</span>) {
        $coin <span style="color:#f92672">=</span> shift @before <span style="color:#e6db74">//</span> <span style="color:#ae81ff">200</span>;
    } <span style="color:#66d9ef">elsif</span> ($move <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;E&#34;</span>) {
        $coin <span style="color:#f92672">=</span> pop @after <span style="color:#e6db74">//</span> <span style="color:#ae81ff">200</span>;
    } <span style="color:#66d9ef">else</span> {
        say <span style="color:#e6db74">&#34;Invalid choice&#34;</span>; <span style="color:#66d9ef">next</span>;
    }
    <span style="color:#66d9ef">if</span> ($coin <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>) {
        say <span style="color:#e6db74">&#34;You win!&#34;</span>; <span style="color:#66d9ef">last</span>;
    }
    <span style="color:#66d9ef">if</span> (@before <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        say <span style="color:#e6db74">&#34;I pick the 200p coin at start and win&#34;</span>; <span style="color:#66d9ef">last</span>;
    } <span style="color:#66d9ef">elsif</span> (@after <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        say <span style="color:#e6db74">&#34;I pick the 200p coin at end and win&#34;</span>; <span style="color:#66d9ef">last</span>;
    }
    <span style="color:#66d9ef">if</span> (@before % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        $coin <span style="color:#f92672">=</span> shift @before;
    } <span style="color:#66d9ef">elsif</span> (@after %2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        $coin <span style="color:#f92672">=</span> pop @after;
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e"># no winning move, let&#39;s hope for a mistake</span>
        <span style="color:#66d9ef">if</span> (@before <span style="color:#f92672">&gt;</span> @after) {
            $coin <span style="color:#f92672">=</span> shift @before;
        } <span style="color:#66d9ef">else</span> {
            $coin <span style="color:#f92672">=</span> pop @after;
        }
    }
    ask();
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">ask</span> {
    say <span style="color:#e6db74">&#34;New situation = @before 200 @after&#34;</span>;
    say <span style="color:#e6db74">&#34;Pick a coin at beginning (B) or end (E)&#34;</span>;
}
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/03/perl-weekly-challenge-stepping-numbers-and-lucky-winner.html">Stepping Numbers and Lucky Winner</a></p>
<h2 id="lubos-kolouch2">Lubos Kolouch</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/lubos-kolouch/perl/ch-2.pl">Lubos Kolouch&rsquo;s solution</a> starts with a shuffled list of coins.</p>
<p>The <code>play_game</code> sub is the main loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">play_game</span> {

    <span style="color:#66d9ef">my</span> $who <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">while</span> (@deck) {
        $who <span style="color:#f92672">*=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
        play_round($who);
    }

    end_game;
}
</code></pre></div><p>That in turn calls <code>play_round</code>, where the current player takes their turn. Note the computer chooses randomly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">play_round</span> {

    <span style="color:#66d9ef">my</span> $who <span style="color:#f92672">=</span> shift;
    <span style="color:#66d9ef">my</span> $lr  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;

    $who <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>? $lr <span style="color:#f92672">=</span> get_player_input: $lr <span style="color:#f92672">=</span> $sides[ rand @sides ];

    <span style="color:#66d9ef">my</span> $draw <span style="color:#f92672">=</span> do_draw($lr);
    $scores{$who} <span style="color:#f92672">+=</span> $values{$draw};

    say $players{$who}
      <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39; has drawn from &#39;</span>
      <span style="color:#f92672">.</span> $lr
      <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39; and won &#39;</span>
      <span style="color:#f92672">.</span> $draw
      <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39; and has now score &#39;</span>
      <span style="color:#f92672">.</span> $scores{$who};

}
</code></pre></div><p>Despite the computer choosing randomly, I still managed to lose, because Lubos&rsquo; program never actually displays the list of coins. Perhaps unironically, Lubos might be the only one to implement a solution that could reasonably be called &ldquo;Lucky Winner&rdquo;. :-)</p>
<h2 id="mohammad-anwar2">Mohammad S Anwar</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/mohammad-anwar/perl/ch-2.pl">Mohammad S Anwar&rsquo;s solution</a> maintains state for both players inside of hash refs. Note that both &ldquo;Human&rdquo; and &ldquo;Machine&rdquo; will be played by the computer:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $table   <span style="color:#f92672">=</span> [ keys %$coins ];
<span style="color:#66d9ef">my</span> $players <span style="color:#f92672">=</span> {
    <span style="color:#ae81ff">0</span> <span style="color:#f92672">=&gt;</span> { <span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;Human&#34;</span>,   <span style="color:#e6db74">&#34;bank&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;coins&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[]</span> },
    <span style="color:#ae81ff">1</span> <span style="color:#f92672">=&gt;</span> { <span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;Machine&#34;</span>, <span style="color:#e6db74">&#34;bank&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;coins&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[]</span> },
};
</code></pre></div><p>The main loop starts with a random player making a greedy selection until the coins are gone:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $current <span style="color:#f92672">=</span> int rand(<span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">my</span> $coin;

<span style="color:#66d9ef">while</span> ($#$table) {
    <span style="color:#66d9ef">if</span> ($table<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $table<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]) {
        $coin <span style="color:#f92672">=</span> shift @$table;
    }
    <span style="color:#66d9ef">else</span> {
        $coin <span style="color:#f92672">=</span> pop @$table;
    }

    $players<span style="color:#f92672">-&gt;</span>{$current}<span style="color:#f92672">-&gt;</span>{bank} <span style="color:#f92672">+=</span> $coin;
    push @{$players<span style="color:#f92672">-&gt;</span>{$current}<span style="color:#f92672">-&gt;</span>{coins}}, $coins<span style="color:#f92672">-&gt;</span>{$coin};

    $current <span style="color:#f92672">=</span> ($current)?(<span style="color:#ae81ff">0</span>):(<span style="color:#ae81ff">1</span>);
}

$coin <span style="color:#f92672">=</span> shift @$table;
$players<span style="color:#f92672">-&gt;</span>{$current}<span style="color:#f92672">-&gt;</span>{bank} <span style="color:#f92672">+=</span> $coin;
push @{$players<span style="color:#f92672">-&gt;</span>{$current}<span style="color:#f92672">-&gt;</span>{coins}}, $coins<span style="color:#f92672">-&gt;</span>{$coin};

_declare_lucky_winner($players);
_show_coins($players);
</code></pre></div><p><strong>Blog</strong> › <a href="https://perlweeklychallenge.org/blog/weekly-challenge-052">BLOG: The Weekly Challenge #052</a></p>
<h2 id="roger-bell-west2">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/roger-bell-west/perl/ch-2.pl">Roger Bell West&rsquo;s solution</a> runs 8 times, each time making an array, <code>@c</code> containing two numbers, [0,7], [1,6], [2,5], &hellip;, [6,1], [7,0], on subsequent runs through the outer loop.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># see eventual blog post for why this is relevant</span>

<span style="color:#66d9ef">my</span> $coins <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;

<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $a ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $coins <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
    <span style="color:#66d9ef">my</span> @c <span style="color:#f92672">=</span> ( $a, $coins <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> $a );
    <span style="color:#66d9ef">while</span> ( ( $c[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">||</span> $c[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span> ) <span style="color:#f92672">&amp;&amp;</span> $c[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $c[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ) {
        @c <span style="color:#f92672">=</span> sort @c;
        $c[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">2</span>;
    }
    <span style="color:#66d9ef">my</span> $toplay <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">while</span> ( ( $c[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> $c[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">&amp;&amp;</span> $c[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $c[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ) {
        @c <span style="color:#f92672">=</span> sort @c;
        $c[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">--</span>;
        $toplay <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> $toplay;
    }
    @c <span style="color:#f92672">=</span> sort @c;
    <span style="color:#66d9ef">unless</span> ( $c[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ) {
        $toplay <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> $toplay;
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$a: $toplay wins\n&#34;</span>;
}
</code></pre></div><p>I don&rsquo;t know what the purpose of this script is. My guess is that it is trying to demonstrate the property that player 1 can always win by forcing player 2 to leave the most valuable coin (in this case, <code>0</code>) for player 1. I&rsquo;ll definitely be looking forward to Roger&rsquo;s eventual blog post to see how wrong I am.</p>
<h2 id="ruben-westerberg2">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/ruben-westerberg/perl/ch-2.pl">Ruben Westerberg&rsquo;s solution</a> has another randomly-choosing computer, but this one, I think I can beat!</p>
<pre><code>NEW GAME
Select left or right ends of list with the &lt; or  &gt; keys

5p, 1p, 2p, 10p, 20p, £1, 50p, £2

Computer picks &gt;

PICK IS &gt;
5p, 1p, 2p, 10p, 20p, £1, 50p

Select Left or Right
</code></pre><p>So much for that! As it turns out, the coins are also shuffled randomly, too. :-)</p>
<p>Here&rsquo;s the main loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;NEW GAME\n&#34;</span>;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Select left or right ends of list with the &lt; or  &gt; keys\n\n&#34;</span>;
<span style="color:#66d9ef">while</span> (@game) {
    <span style="color:#66d9ef">print</span> join <span style="color:#e6db74">&#34;, &#34;</span>,@game;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n\n&#34;</span>;
    <span style="color:#66d9ef">my</span> $pick;
    <span style="color:#66d9ef">my</span> $currentPlayer;
    <span style="color:#66d9ef">if</span>($computerTurnFlag) {
        ($pick)<span style="color:#f92672">=</span>pickSome([<span style="color:#e6db74">&#34;&lt;&#34;</span>,<span style="color:#e6db74">&#34;&gt;&#34;</span>],<span style="color:#ae81ff">1</span>);
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Computer picks $pick\n&#34;</span>;
        $currentPlayer<span style="color:#f92672">=\</span>@computer;
    }
    <span style="color:#66d9ef">else</span> {
        $currentPlayer<span style="color:#f92672">=\</span>@player;
        <span style="color:#66d9ef">until</span> ($pick) {

            <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Select Left or Right\n&#34;</span>;
            $pick<span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;STDIN&gt;</span>;
            chomp $pick;
            <span style="color:#66d9ef">if</span> (($pick <span style="color:#f92672">ne</span> <span style="color:#e6db74">&#34;&lt;&#34;</span> )<span style="color:#f92672">and</span>( $pick <span style="color:#f92672">ne</span> <span style="color:#e6db74">&#34;&gt;&#34;</span>)) {
                $pick<span style="color:#f92672">=</span>undef;
                <span style="color:#66d9ef">next</span>;
            }
            <span style="color:#66d9ef">last</span>;
        }
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Player picks $pick\n&#34;</span>;
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;PICK IS $pick\n&#34;</span>;
    <span style="color:#66d9ef">my</span> $val;
    $val<span style="color:#f92672">=</span>pop @game <span style="color:#66d9ef">if</span> $pick <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;&gt;&#34;</span>;
    $val<span style="color:#f92672">=</span>shift @game <span style="color:#66d9ef">if</span> $pick <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;&lt;&#34;</span>;
    push @$currentPlayer, $val;
    $computerTurnFlag<span style="color:#f92672">++</span>;
    $computerTurnFlag%<span style="color:#960050;background-color:#1e0010">=</span>2;

}
</code></pre></div><p>The <code>pickSome($array, $n)</code> sub picks <code>$n</code> elements from the <code>$array</code> ref:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">pickSome</span> {
    <span style="color:#66d9ef">my</span> ($in,$count)<span style="color:#f92672">=</span>@_;
    <span style="color:#66d9ef">my</span> @out;
    <span style="color:#66d9ef">my</span> @data<span style="color:#f92672">=</span>@$in;
    <span style="color:#75715e">#    print &#34;Data is: &#34;,join &#34;, &#34;, @data;</span>
    <span style="color:#75715e">#print &#34;\n&#34;;</span>
    <span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$count<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
        push @out,splice @data,int(rand(@data)),<span style="color:#ae81ff">1</span>;
    }
    <span style="color:#75715e">#print &#34;OUT is: &#34;, join &#34;, &#34;, @out;</span>
    <span style="color:#75715e">#print &#34;\n&#34;;</span>
    @out;
}
</code></pre></div><h2 id="ryan-thompson2">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/ryan-thompson/perl/ch-2.pl">My solution</a> was so long I felt compelled to write a manual (seen here with thanks to <strong>pod2markdown</strong>):</p>
<hr>
<h3 id="name">NAME</h3>
<p>ch-2.pl - Lucky Winner Simulator 9000</p>
<h3 id="synopsis">SYNOPSIS</h3>
<pre><code>ch-2.pl [options] [algorithm1 algorithm2 ...]
ch-2.pl --human=&lt;cpu_algorithm&gt;
ch-2.pl --help
</code></pre><h3 id="options">OPTIONS</h3>
<pre><code>--count=&lt;iter&gt;     Play &lt;iter&gt; games                   Default: 1000
--coins=&lt;N&gt;        Every game uses &lt;N&gt; coins           Default: 8
--maxcoin=&lt;N&gt;      Maximum coin value                  Default: 200
--help             Full help page
--human=&lt;cpu_alg&gt;  Human vs CPU, CPU uses &lt;cpu_alg&gt;
--seed=&lt;N&gt;         Use specific random number seed (integer)
--verbose          Enable extra output
--noverbose        Disable extra output
</code></pre><h1 id="algorithms">ALGORITHMS</h1>
<ul>
<li><code>human</code>: Human input. Only available with <code>--human</code> option.</li>
<li><code>bozo</code>: Real stupid algorithm; chooses left or right randomly.</li>
<li><code>worst</code>: Somehow even stupider. Always picks lowest option.</li>
<li><code>greedy</code>: Greedy algorithm. Always picks highest option, but doesn&rsquo;t look ahead.</li>
<li><code>ahead[135]</code>: Looks ahead <strong>1</strong>, <strong>3</strong>, or <strong>5</strong> turns, and picks the option that maximizes (<strong>my_score</strong> - <strong>their_score</strong>)</li>
</ul>
<hr>
<p>As you can see, it has two modes with <code>--human</code>, and without. With <code>--human</code>, you can play against the computer algorithm of your choice, from the <strong>ALGORITHMS</strong> section. Without <code>--human</code>, all algorithms are pitted against each other in a round-robin match, many times with random coins, and prints a leaderboard with the results. The <code>ahead</code> options win the most, but even <code>worst</code> manages to pick up a few games here and there.</p>
<p>You can see the code or my blog for more information. In the interest of keeping things short, I&rsquo;ll just show you a few snippets of the code.</p>
<p>The algorithms are all provided by the <code>get_algorithms</code> sub, which returns a dispatch table. The short ones, <code>bozo</code>, <code>worst</code>, and <code>greedy</code>, are all one-liners, so they fit right in, while the <code>ahead</code> ones are passed as either a sub ref, or a sub that returns a sub ref:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">get_algorithms</span> {
    (
        bozo    <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">sub</span> { rand <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.5</span> },
        worst   <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">sub</span> { $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $_[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] },
        greedy  <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">sub</span> { $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;</span> $_[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] },
        ahead1  <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\&amp;</span>ahead1,
        ahead3  <span style="color:#f92672">=&gt;</span> ahead(<span style="color:#ae81ff">3</span>),
        ahead5  <span style="color:#f92672">=&gt;</span> ahead(<span style="color:#ae81ff">5</span>),
    );
}
</code></pre></div><p><code>human</code> isn&rsquo;t included in that list, but it is indeed just another algorithm that is added to the dispatch table when <code>--human</code> is specified.</p>
<p>The <code>ahead</code> sub is the most complex (and most effective) algorithm. It returns a closure around <code>$n</code>, to a recursive sub that will look ahead <code>$n</code> moves every time it is called.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># Look ahead n moves</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">ahead</span> {
    <span style="color:#66d9ef">my</span> $n <span style="color:#f92672">=</span> shift;

    <span style="color:#66d9ef">sub</span> {
        <span style="color:#66d9ef">my</span> $ahead <span style="color:#f92672">=</span> <span style="color:#66d9ef">sub</span> {
            <span style="color:#66d9ef">my</span> ($depth, $us, $lr, @coins) <span style="color:#f92672">=</span> @_;
            <span style="color:#66d9ef">my</span> $val <span style="color:#f92672">=</span> $us <span style="color:#f92672">*</span> ($lr <span style="color:#f92672">==</span> LEFT ? shift @coins : pop @coins);
            <span style="color:#66d9ef">return</span> $val <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>$depth <span style="color:#f92672">or</span> @coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;

            <span style="color:#66d9ef">my</span> $f <span style="color:#f92672">=</span> $us <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> ? <span style="color:#f92672">\&amp;</span>min : <span style="color:#f92672">\&amp;</span>max;
            $val <span style="color:#f92672">+</span> $f<span style="color:#f92672">-&gt;</span>(
                map { __SUB__<span style="color:#f92672">-&gt;</span>($depth<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span>$us, $_, @coins) } LEFT, RIGHT
            );
        };

        $ahead<span style="color:#f92672">-&gt;</span>($n, <span style="color:#ae81ff">1</span>, LEFT,  @_) <span style="color:#f92672">&gt;</span>
        $ahead<span style="color:#f92672">-&gt;</span>($n, <span style="color:#ae81ff">1</span>, RIGHT, @_) ? LEFT : RIGHT;
    };
}
</code></pre></div><p>This is a bit of combinatorial game theory. <code>$ahead</code> (the inner sub) traverses a game tree, alternately adding and subtracting the maximum result from the nodes below. Depending on which player we are at in the current recursion depth, we need to either minimize or maximize the result.</p>
<p>Of course, this grows exponentially, so that&rsquo;s why I used smaller values of <code>$n</code>. Looking ahead 5 moves barely does any better than looking ahead 3 moves.  Looking ahead 1 move is already significantly better than greedy, which I guess would be a 0-move lookahead in this context.</p>
<pre><code>Leaderboard:
     ahead5:    7066 wins
     ahead3:    7037 wins
     ahead1:    6773 wins
     greedy:    6149 wins
       bozo:    2716 wins
      worst:     259 wins
</code></pre><p><strong>Blog</strong> › <a href="http://ry.ca/2020/03/lucky-winner/">Lucky Winner</a></p>
<h2 id="saiftynet2">Saif Ahmed</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/saiftynet/perl/ch-2.pl">Saif Ahmed&rsquo;s solution</a> also includes a shuffle, but I&rsquo;m not going to fall for that twice in one week.</p>
<p>After some setup, including the option to enter names for each player, Saif&rsquo;s game loop looks like this (actually, this is the inner loop; Saif runs multiple games):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">while</span> ( @coins <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ) {    <span style="color:#75715e"># make moves until no more coins</span>
        unshift @p1,
          move($player1)
          ? shift @coins
          : pop @coins;       <span style="color:#75715e"># move coin from pile to  player</span>
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;---$player1 finds a $p1[0]\n&#34;</span>;    <span style="color:#75715e"># report coin found</span>
        $p1Total <span style="color:#f92672">+=</span>
          coinValue( $p1[<span style="color:#ae81ff">0</span>] );    <span style="color:#75715e"># add the value of the coin to player1s total</span>
        unshift @p2,
          move($player2)
          ? shift @coins
          : pop @coins;           <span style="color:#75715e"># move coin from pile to  player</span>
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;---$player2 finds a $p2[0]\n&#34;</span>;    <span style="color:#75715e"># report coin found</span>
        $p2Total <span style="color:#f92672">+=</span>
          coinValue( $p2[<span style="color:#ae81ff">0</span>] );    <span style="color:#75715e"># add the value of the coin to player2s total</span>
    }
    <span style="color:#75715e"># game has ended, display reults</span>
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n$player1 has:  &#34;</span>, ( join <span style="color:#e6db74">&#34;, &#34;</span>, reverse @p1 ), <span style="color:#e6db74">&#34; total= &#34;</span>, $p1Total;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n$player2 has:  &#34;</span>, ( join <span style="color:#e6db74">&#34;, &#34;</span>, reverse @p2 ), <span style="color:#e6db74">&#34; total= &#34;</span>, $p2Total;
    <span style="color:#66d9ef">if</span> ( $p1Total <span style="color:#f92672">&gt;</span> $p2Total ) {
        $p1wins<span style="color:#f92672">++</span>;
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n* $player1 wins!!&#34;</span>;
        <span style="color:#66d9ef">next</span>;
    }
    $p2wins<span style="color:#f92672">++</span>;
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n* $player2 wins!!&#34;</span>;
</code></pre></div><p>The <code>move</code> sub will either prompt for input or make a random pick, depending on whose turn it is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">move</span> {
    <span style="color:#66d9ef">my</span> $mover  <span style="color:#f92672">=</span> shift;
    <span style="color:#66d9ef">my</span> $choice <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">if</span> ( $mover <span style="color:#f92672">!~</span> <span style="color:#e6db74">/Computer/</span> ) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n$mover pick end Left or Right (L or R)&#34;</span>
          <span style="color:#f92672">and</span> chomp( $choice <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;&gt;</span> )
          <span style="color:#66d9ef">while</span> $choice <span style="color:#f92672">!~</span> <span style="color:#e6db74">/[lr]/i</span>;
    }
    <span style="color:#66d9ef">else</span> {
        ( $choice <span style="color:#f92672">=</span> ( rand() <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">.5</span> ) ? <span style="color:#e6db74">&#34;Left&#34;</span> : <span style="color:#e6db74">&#34;Right&#34;</span> )
          <span style="color:#f92672">and</span> <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n$mover picks $choice\n&#34;</span>;
    }
    <span style="color:#66d9ef">return</span> $choice <span style="color:#f92672">=~</span><span style="color:#e6db74"> /l/i</span>;
}
</code></pre></div><h2 id="user-person2">User Person</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/user-person/perl/ch-2.pl">User Person&rsquo;s solution</a> is optimized for the specific coins from the task, to the extent they have defined a sub called <code>l2Index</code> that is dedicated to finding the position of the <code>L2</code> (£2) coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">l2Index</span> {
    <span style="color:#66d9ef">my</span> $ret <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
  LOOP:
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;=</span> $#coins; <span style="color:#f92672">++</span>$i) {
        <span style="color:#66d9ef">if</span> ($coins[$i] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;L2&#39;</span>) {
            $ret <span style="color:#f92672">=</span> $i;
            <span style="color:#66d9ef">last</span> LOOP;
        }
    }
    <span style="color:#66d9ef">return</span> $ret;
}
</code></pre></div><p>The <code>playerChoice</code> sub handles user input, with help from <a href="https://perldoc.perl.org/Term/ReadLine.html"><code>Term::ReadLine</code></a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Term::ReadLine;

<span style="color:#66d9ef">my</span> $term <span style="color:#f92672">=</span> Term::ReadLine<span style="color:#f92672">-&gt;</span><span style="color:#66d9ef">new</span>(<span style="color:#e6db74">&#39;input&#39;</span>);
$term<span style="color:#f92672">-&gt;</span>ornaments(<span style="color:#ae81ff">00</span>,<span style="color:#ae81ff">00</span>,<span style="color:#ae81ff">00</span>,<span style="color:#ae81ff">00</span>);

<span style="color:#75715e"># later</span>

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">playerChoice</span> {
    <span style="color:#66d9ef">my</span> $fl   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">my</span> $loop <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;

    <span style="color:#66d9ef">my</span> $prompt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Type &#39;f&#39; to choose the first coin. Type &#39;l&#39; to choose the last coin. Type &#39;q&#39; to quit:\n&#34;</span> ;
    <span style="color:#66d9ef">print</span> $prompt <span style="color:#66d9ef">if</span> scalar @coins <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>;

  ILOOP:
    <span style="color:#66d9ef">while</span> ($loop<span style="color:#f92672">--</span>) {

        <span style="color:#66d9ef">if</span> ( scalar @coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {  <span style="color:#75715e"># Don&#39;t ask when there&#39;s only one choice.</span>
            takeCoin(<span style="color:#e6db74">&#39;f&#39;</span>,<span style="color:#e6db74">&#39;player&#39;</span>);
            <span style="color:#66d9ef">next</span> ILOOP;
        }

        <span style="color:#66d9ef">my</span> $fl <span style="color:#f92672">=</span> $term<span style="color:#f92672">-&gt;</span>readline(<span style="color:#e6db74">&#39;&gt; &#39;</span>);

        <span style="color:#66d9ef">if</span> ($fl <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;f&#39;</span> <span style="color:#f92672">or</span> $fl <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;l&#39;</span>) {
            takeCoin($fl,<span style="color:#e6db74">&#39;player&#39;</span>);

        } <span style="color:#66d9ef">elsif</span> ($fl <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;q&#39;</span>) {
            exit;

        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Invalid choice.\n&#34;</span>;
            <span style="color:#f92672">++</span>$loop;
        }
    }
}
</code></pre></div><p>The computer player knows how to optimize its chances to get that valuable coin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">computerChoice</span> {
    <span style="color:#75715e"># Grabs L2 off the end when available</span>
    <span style="color:#75715e"># Doesn&#39;t grab the item before L2 to free it up for player to win.</span>
    <span style="color:#75715e"># Otherwise, grabs whichever end is greater.</span>
    <span style="color:#75715e"># It doesn&#39;t always get the highest points, but it wins when that&#39;s possible.</span>

    <span style="color:#66d9ef">my</span> $ind <span style="color:#f92672">=</span> l2Index();

    <span style="color:#66d9ef">if</span> (scalar @coins <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>) {   <span style="color:#75715e"># Without this statement computer always chooses last (third)</span>
        chooseGreater();        <span style="color:#75715e"># when protecting L2 ( e.g. [first], L2, [last] )</span>
                                <span style="color:#75715e"># even if first is greater.</span>
    } <span style="color:#66d9ef">else</span> {

        <span style="color:#66d9ef">if</span> ($ind <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> $ind <span style="color:#f92672">==</span> $#coins<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> ) {
            takeCoin(<span style="color:#e6db74">&#39;f&#39;</span>,<span style="color:#e6db74">&#39;computer&#39;</span>);

        } <span style="color:#66d9ef">elsif</span> ( $ind <span style="color:#f92672">==</span> $#coins <span style="color:#f92672">or</span> $ind <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
            takeCoin(<span style="color:#e6db74">&#39;l&#39;</span>,<span style="color:#e6db74">&#39;computer&#39;</span>);

        } <span style="color:#66d9ef">else</span> {
            chooseGreater();
        }
    }
}
</code></pre></div><p>With all that, User Person&rsquo;s game loop is very simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> (scalar @coins) {
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;@coins\n&#34;</span>;

    <span style="color:#66d9ef">if</span> ( $turn ) {
        playerChoice();
        <span style="color:#f92672">--</span>$turn;
    } <span style="color:#66d9ef">else</span> {
        computerChoice();
        <span style="color:#f92672">++</span>$turn;
    }
}
</code></pre></div><h2 id="wanderdoc2">Wanderdoc</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/wanderdoc/perl/ch-2.pl">Wanderdoc&rsquo;s solution</a> is another computer vs. computer match, with each greedily removing the most valuable coin at every turn:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> %result;

<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">1_000</span> ) {
    <span style="color:#66d9ef">my</span> @set     <span style="color:#f92672">=</span> shuffle keys %values;      <span style="color:#75715e"># :-)</span>
    <span style="color:#66d9ef">my</span> %players <span style="color:#f92672">=</span> ( PC <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[]</span>, ME <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[]</span>, );
    <span style="color:#66d9ef">while</span> (@set) {
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $player ( sort { $b <span style="color:#f92672">cmp</span> $a } keys %players )    <span style="color:#75715e"># PC first.</span>
        {
            <span style="color:#66d9ef">if</span> ( $set[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&gt;</span> $set[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] ) {
                push @{ $players{$player} }, shift @set;
            }

            <span style="color:#66d9ef">else</span> {
                push @{ $players{$player} }, pop @set;
            }
        }
    }

    <span style="color:#66d9ef">my</span> $winner <span style="color:#f92672">=</span>
      reduce { sum( @{ $players{$a} } ) <span style="color:#f92672">&gt;</span> sum( @{ $players{$b} } ) ? $a : $b }
    keys %players;

    $result{$winner}<span style="color:#f92672">++</span>;
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$_ =&gt; $result{$_}$/&#34;</span> <span style="color:#66d9ef">for</span> keys %result;
</code></pre></div><p>Wanderdoc runs 1000 games. <code>PC</code> is the first player, <code>ME</code> is the second player. Otherwise, they play the same. With this greedy algorithm, <code>PC</code> wins around 2/3 of the time, which is not surprising.</p>
<h2 id="yet-ebreo2">Yet Ebreo</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-052/yet-ebreo/perl/ch-2.pl">Yet Ebreo&rsquo;s solution</a> also pits the machine against itself. The <code>check_lr</code> sub recursively attempts to find the maximum score between the &ldquo;left&rdquo; and &ldquo;right&rdquo; options for the active player, and assumes the other player will play greedily:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">check_lr</span> {
    <span style="color:#66d9ef">my</span> ($arr,$turn,$lscore,$rscore) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">if</span> ($turn <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {

        $lscore <span style="color:#f92672">+=</span> $arr<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>];
        <span style="color:#66d9ef">my</span> @new_arr1 <span style="color:#f92672">=</span> @{$arr}[<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#{$arr}];
        <span style="color:#66d9ef">if</span> ($#new_arr1) {
            check_lr(<span style="color:#f92672">\</span>@new_arr1,<span style="color:#ae81ff">1</span>,$lscore,$rscore);
        }

        $rscore <span style="color:#f92672">+=</span> $arr<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">my</span> @new_arr2 <span style="color:#f92672">=</span> @{$arr}[<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#{$arr}<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">if</span> ($#new_arr2) {
            check_lr(<span style="color:#f92672">\</span>@new_arr2,<span style="color:#ae81ff">1</span>,$lscore,$rscore);
        }
        <span style="color:#66d9ef">if</span> ($rscore<span style="color:#f92672">&gt;</span>$rmax) {
            $rmax <span style="color:#f92672">=</span> $rscore;
        }
        <span style="color:#66d9ef">if</span> ($lscore<span style="color:#f92672">&gt;</span>$lmax) {
            $lmax <span style="color:#f92672">=</span> $lscore;
        }
        <span style="color:#66d9ef">return</span> $lmax<span style="color:#f92672">&gt;</span>$rmax?<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">1</span>;
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">my</span> @new_arr3;
        <span style="color:#66d9ef">if</span> ($arr<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">&gt;</span>$arr<span style="color:#f92672">-&gt;</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]) {
            @new_arr3 <span style="color:#f92672">=</span> @{$arr}[<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#{$arr}];
        } <span style="color:#66d9ef">else</span> {
            @new_arr3 <span style="color:#f92672">=</span> @{$arr}[<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#{$arr}<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        }
        <span style="color:#66d9ef">if</span>($#new_arr3) {
            check_lr(<span style="color:#f92672">\</span>@new_arr3,<span style="color:#ae81ff">0</span>,$lscore,$rscore);
        }
    }

}
</code></pre></div><p>The game loop is as follows. Note the second player plays randomly, while the first uses the above <code>check_lr</code> strategy:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say <span style="color:#e6db74">&#34;Original Array: @money\n&#34;</span>;
<span style="color:#66d9ef">my</span> @scores;
<span style="color:#66d9ef">while</span> (@money) {
    $rmax <span style="color:#f92672">=</span> $lmax <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">my</span> $ai_move <span style="color:#f92672">=</span> check_lr(<span style="color:#f92672">\</span>@money,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>);
    <span style="color:#66d9ef">if</span> ($ai_move <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        $scores[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+=</span> $money[<span style="color:#ae81ff">0</span>];
        $scores[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&gt;&gt; $money[0] &#34;</span>;
        shift @money;
    } <span style="color:#66d9ef">else</span> {
        $scores[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+=</span> $money[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        $scores[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&gt;&gt; $money[-1] &#34;</span>;
        pop @money;
    }
    <span style="color:#66d9ef">my</span> $random_move <span style="color:#f92672">=</span> int(rand(<span style="color:#ae81ff">2</span>));
    <span style="color:#66d9ef">if</span> ($random_move <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        $scores[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+=</span> $money[<span style="color:#ae81ff">0</span>];
        $scores[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&gt;&gt; $money[0] &#34;</span>;
        shift @money;
    } <span style="color:#66d9ef">else</span> {
        $scores[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+=</span> $money[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        $scores[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&gt;&gt; $money[-1] &#34;</span>;
        pop @money;
    }
}

say <span style="color:#e6db74">&#34;Optimized Score: $scores[0][0]&#34;</span>;
say <span style="color:#e6db74">&#34;Optimized Moves: $scores[0][1]\n&#34;</span>;

say <span style="color:#e6db74">&#34;Random Score:    $scores[1][0]&#34;</span>;
say <span style="color:#e6db74">&#34;Random Moves:    $scores[1][1]\n&#34;</span>;
</code></pre></div><hr>
<hr>
<h2 id="blogs">See Also</h2>
<h3 id="blogs-this-week">Blogs this week:</h3>
<p><strong>Cheok-Yin Fung</strong> › <a href="http://blogs.perl.org/users/c_y_fung/2020/03/cys-take-on-perl-weekly-challenge-052.html">CY&rsquo;s Take on Perl Weekly Challenge #052</a></p>
<p><strong>Dave Jacoby</strong> › <a href="https://jacoby.github.io/2020/03/16/minimax-british-coins-and-oldschool-ai-in-perl.html">Minimax, British Coins and Old-School AI in Perl</a></p>
<p><strong>E. Choroba</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/03/perl-weekly-challenge-052-stepping-numbers-lucky-winner.html">Stepping Numbers &amp; Lucky Winner</a></p>
<p><strong>Javier Luque</strong> › <a href="https://perlchallenges.wordpress.com/2020/03/16/perl-weekly-challenge-052/">052 – Perl Weekly Challenge</a></p>
<p><strong>Laurent Rosenfeld</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/03/perl-weekly-challenge-stepping-numbers-and-lucky-winner.html">Stepping Numbers and Lucky Winner</a></p>
<p><strong>Mohammad S Anwar</strong> › <a href="https://perlweeklychallenge.org/blog/weekly-challenge-052">BLOG: The Weekly Challenge #052</a></p>
<p><strong>Ryan Thompson</strong> › <a href="http://ry.ca/2020/03/stepping-numbers/">Stepping Numbers</a> | <a href="http://ry.ca/2020/03/lucky-winner/">Lucky Winner</a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

