<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Ryan Thompson › Raku Weekly Review: Challenge - #046"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/p6-review-challenge-046/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Ryan Thompson › Raku Weekly Review: Challenge - #046"/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Ryan Thompson › Raku Weekly Review: Challenge - #046">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/p6-review-challenge-046/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ryan Thompson › Raku Weekly Review: Challenge - #046</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }

        
        .toggle-links {
            margin: 15px 0;
            padding-left: 15px;
        }
        .toggle-links a {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 20px;
            background-color: #4285f4;
            color: white !important;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .toggle-links a:hover {
            background-color: #3367d6;
        }
        .arrow-icon {
            margin-left: 8px;
            font-size: 1.1em;
        }

    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

    
    document.addEventListener('DOMContentLoaded', function() {
        
        const showMoreLinkGC = document.querySelector('.show-more-gc');
        const showLessLinkGC = document.querySelector('.show-less-gc');
        const hiddenLinksGC = document.querySelectorAll('.hidden-link-gc');

        if (showMoreLinkGC) {
            showMoreLinkGC.addEventListener('click', function(e) {
                e.preventDefault();
                hiddenLinksGC.forEach(link  => {
                    link.style.display = 'list-item';
                });
                showMoreLinkGC.style.display = 'none';
                showLessLinkGC.style.display = 'inline-flex';
            });
        }

        if (showLessLinkGC) {
            showLessLinkGC.addEventListener('click', function(e) {
                e.preventDefault();
                hiddenLinksGC.forEach(link  => {
                    link.style.display = 'none';
                });
                showLessLinkGC.style.display = 'none';
                showMoreLinkGC.style.display = 'inline-flex';
            });
        }

        
        const showMoreLinkPWC = document.querySelector('.show-more-pwc');
        const showLessLinkPWC = document.querySelector('.show-less-pwc');
        const hiddenLinksPWC = document.querySelectorAll('.hidden-link-pwc');

        if (showMoreLinkPWC) {
            showMoreLinkPWC.addEventListener('click', function(e) {
                e.preventDefault();
                hiddenLinksPWC.forEach(link  => {
                    link.style.display = 'list-item';
                });
                showMoreLinkPWC.style.display = 'none';
                showLessLinkPWC.style.display = 'inline-flex';
            });
        }

        if (showLessLinkPWC) {
            showLessLinkPWC.addEventListener('click', function(e) {
                e.preventDefault();
                hiddenLinksPWC.forEach(link  => {
                    link.style.display = 'none';
                });
                showLessLinkPWC.style.display = 'none';
                showMoreLinkPWC.style.display = 'inline-flex';
            });
        }
    });

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Ryan Thompson › Raku Weekly Review: Challenge - #046</h2>
                    <div class="portfolio-meta">
                        <span>Thursday, Feb 20, 2020</span>|
                        <span> Tags:
                            raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/flip_500.png">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <p>Continues from <a href="/blog/p6-review-challenge-045/">previous week</a>.</p>
<p>Welcome to the Raku review for Week 046 of the Weekly Challenge! For a quick overview, go through the <a href="/blog/perl-weekly-challenge-046/">original tasks</a> and <a href="/blog/recap-challenge-046/">recap</a> of the weekly challenge.</p>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:rjt@cpan.org"><img src="http://ry.ca/misc/Email.svg" height="50" width="50"> Email</a> › Email me (Ryan) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="http://ry.ca/misc/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="http://ry.ca/misc/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<h3 id="task-1task1"><a href="#task1">Task 1</a></h3>
<p>[  <a href="#arne-sommer1">Arne Sommer</a>  | <a href="#javier-luque1">Javier Luque</a>  | <a href="#kevin-colyer1">Kevin Colyer</a>  | <a href="#laurent-rosenfeld1">Laurent Rosenfeld</a>  | <a href="#luca-ferrari1">Luca Ferrari</a>  | <a href="#mark-anderson1">Mark Anderson</a>  | <a href="#markus-holzer1">Markus Holzer</a>  | <a href="#noud1">Noud Aldenhoven</a>  | <a href="#roger-bell-west1">Roger Bell West</a>  | <a href="#ruben-westerberg1">Ruben Westerberg</a>  | <a href="#ryan-thompson1">Ryan Thompson</a>  | <a href="#simon-proctor1">Simon Proctor</a>  | <a href="#ulrich-rieke1">Ulrich Rieke</a>  ]</p>
<h3 id="task-2task2"><a href="#task2">Task 2</a></h3>
<p>[  <a href="#arne-sommer2">Arne Sommer</a>  | <a href="#colin-crain2">Colin Crain</a>  | <a href="#jaldhar-h-vyas2">Jaldhar H. Vyas</a>  | <a href="#javier-luque2">Javier Luque</a>  | <a href="#kevin-colyer2">Kevin Colyer</a>  | <a href="#laurent-rosenfeld2">Laurent Rosenfeld</a>  | <a href="#luca-ferrari2">Luca Ferrari</a>  | <a href="#mark-anderson2">Mark Anderson</a>  | <a href="#markus-holzer2">Markus Holzer</a>  | <a href="#noud2">Noud Aldenhoven</a>  | <a href="#roger-bell-west2">Roger Bell West</a>  | <a href="#ruben-westerberg2">Ruben Westerberg</a>  | <a href="#ryan-thompson2">Ryan Thompson</a>  | <a href="#simon-proctor2">Simon Proctor</a>  | <a href="#ulrich-rieke2">Ulrich Rieke</a>  ]</p>
<h3 id="blogsblogs"><a href="#blogs">Blogs</a></h3>
<hr>
<hr>
<h1 id="task1">Task #1 - Cryptic Message</h1>
<p>This task had us resolving &ldquo;unreliable transmissions&rdquo; that were sent repeatedly, each time with errors in different locations in the string, such as this one:</p>
<pre><code>P + 2 l ! a t o
1 e 8 0 R $ 4 u
5 - r ] + a &gt; /
P x w l b 3 k \
2 e 3 5 R 8 y u
&lt; ! r ^ ( ) k 0
</code></pre><p>That spells <code>PerlRaku</code>, which you can arrive at by noticing that only one character in each column will be repeated.</p>
<hr>
<h2 id="my-general-observations">My general observations</h2>
<p>Both example ciphers show that each plaintext character appears exactly twice in each column, and the other characters appear exactly once. Naturally, some hackers relied on this and printed all characters that appeared twice. Some hackers took a more permissive or general interpretation, and calculated the frequency of each character, printing whichever character appeared most often in each column.</p>
<hr>
<h2 id="arne-sommer1">Arne Sommer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/arne-sommer/raku/ch-1.p6">Arne Sommer&rsquo;s solution</a> accepts a string of rows separated by spaces, which he then splits to <code>@strings</code> (rows), calculates the <code>$max</code> row length, and iterates over the character indices:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">$string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;P+2l!ato 1e80R$4u 5-r]+a&gt;/ Pxwlb3k\ 2e35R8yu &lt;!r^()k0&#39;</span> <span style="color:#66d9ef">if</span> $another;
<span style="color:#66d9ef">my</span> @strings <span style="color:#f92672">=</span> $string<span style="color:#f92672">.</span>words;
<span style="color:#66d9ef">my</span> $max     <span style="color:#f92672">=</span> @strings<span style="color:#f92672">&gt;&gt;.</span>chars<span style="color:#f92672">.</span>max;
<span style="color:#66d9ef">my</span> @result;

<span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$max <span style="color:#f92672">-&gt;</span> $index {
  @result<span style="color:#f92672">.</span>push: @strings<span style="color:#f92672">.</span>map({ $_<span style="color:#f92672">.</span>substr($index,<span style="color:#ae81ff">1</span>) <span style="color:#e6db74">//</span> <span style="color:#e6db74">&#34;&#34;</span> })<span style="color:#f92672">.</span>repeated<span style="color:#f92672">.</span>unique;
}
say @result<span style="color:#f92672">.</span>join;
</code></pre></div><p>The <code>@result</code> is built up by taking the character at <code>$index</code> from each string, and looking for the <code>.repeated</code> characters. <code>.unique</code> ensures that if there are more than two of the same character, that only one will be returned. (e.g., <code>&lt;A x A y A&gt;.repeated.unique = (A)</code>, whereas <code>&lt;A x A y A&gt;.repeated = (A A)</code>).</p>
<h3 id="ambiguous-input">Ambiguous Input</h3>
<p>Arne also submitted a <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/arne-sommer/raku/cryptic">more in-depth solution</a> that better handles ambiguous input (i.e., more than one character is repeated). The main difference is the addition of a recursive <code>expand</code> routine as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">expand( <span style="color:#e6db74">&#34;&#34;</span>, @result );

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">expand</span> ( $current, @strings ) {
    <span style="color:#66d9ef">my</span> $copy <span style="color:#f92672">=</span> $current;

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>@strings<span style="color:#f92672">.</span>elems <span style="color:#f92672">-&gt;</span> $index {
        <span style="color:#66d9ef">my</span> $curr <span style="color:#f92672">=</span> @strings[$index];
        <span style="color:#66d9ef">if</span> $curr<span style="color:#f92672">.</span>elems <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> {
            expand( $copy <span style="color:#f92672">~</span>$_, @strings[ $index <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> Inf ] ) <span style="color:#66d9ef">for</span> @$curr;
            <span style="color:#66d9ef">return</span>;
        } <span style="color:#66d9ef">else</span> {
            $copy <span style="color:#f92672">~=</span> $curr;
        }
    } say $copy;
}
</code></pre></div><p><code>expand</code> runs on the <code>@result</code> from the first solution. If more than one character is repeated, <code>@result</code> would contain a sublist, e.g., we might get <code>(H (e u) l l o)</code>. The unmodified first solution would print <code>He ullo</code>, which is not ideal. So <code>expand</code> takes these sublists (<code>if $curr.elems &gt; 1</code>), and branches so that every possible result will be printed. In this case, <code>Hello</code> and <code>Hullo</code>, but in general the number of output lines will be the product of all sublist lengths. This is a good way of disambiguating results for an imperfect transmission method such as this.</p>
<p>Arne&rsquo;s solutions include some verbose output, which provides good introspection into how they work, so I recommend you try them out for yourself, and read Arne&rsquo;s excellent blog:</p>
<p><strong>Blog</strong> › <a href="https://raku-musings.com/cryptic-room.html">The Cryptic Raku Room</a></p>
<h2 id="javier-luque1">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/javier-luque/raku/ch-1.p6">Javier Luque&rsquo;s solution</a> accepts a multiline string, gets the length of the first line, and then starts building the frequency table:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#75715e"># Initialize the columns hash</span>
<span style="color:#66d9ef">my</span> @column_hash;
<span style="color:#66d9ef">my</span> ($first_line) <span style="color:#f92672">=</span> $message<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;\n&#34;</span>, <span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">my</span> $length <span style="color:#f92672">=</span> $first_line<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34; &#34;</span>)<span style="color:#f92672">.</span>join<span style="color:#f92672">.</span>chars;
@column_hash[<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $length <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> {};
<span style="color:#75715e"># Parse the cryptic message</span>
<span style="color:#66d9ef">for</span> ($message<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;\n&#34;</span>)) <span style="color:#f92672">-&gt;</span> $line {
    <span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> ($line<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34; &#34;</span>)) <span style="color:#f92672">-&gt;</span> $char {
        @column_hash[$i<span style="color:#f92672">++</span>]<span style="color:#f92672">.</span>{$char}<span style="color:#f92672">++</span>;
    }
}
</code></pre></div><p>The loop splits the input into lines, and then builds a <code>@column_hash</code>, which is a mapping of a character&rsquo;s count in a particular column. From there, each column is processed, and the most frequent character is appended to the <code>$output</code>:</p>
<pre><code># Sort
my $output = '';
for (@column_hash) -&gt; %column {
    $output = $output ~
        %column.keys.sort(
            { %column.{$^b} &lt;=&gt; %column.{$^a} }
        )[0];
}
say $output;
</code></pre><p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">PERL WEEKLY CHALLENGE – 046 – Perl Weekly Challenge</a></p>
<h2 id="kevin-colyer1">Kevin Colyer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/kevin-colyer/raku/ch-1.p6">Kevin Colyer&rsquo;s solution</a> also accepts a multiline string in <code>$m</code>, taking advantage of Raku&rsquo;s string builtin <code>.lines</code> to split it into <code>@m</code>. (Kevin uses <code>.words</code> as well, since his input has spaces between each character):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> %seen;
<span style="color:#66d9ef">my</span> $unscramble<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#66d9ef">my</span> @m;
<span style="color:#66d9ef">for</span> $m<span style="color:#f92672">.</span>lines {  @m<span style="color:#f92672">.</span>push( <span style="color:#f92672">.</span>words<span style="color:#f92672">.</span>list ) };
</code></pre></div><p>Now Kevin iterates from 0 to one less than the first row&rsquo;s length (<code>$m[0].elems</code>), to get his <code>$c</code>olumn index. He maintains a <code>%seen</code> frequency map for each column and appends the character seen twice to the <code>$unscramble</code>d output string:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>@m[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>elems <span style="color:#f92672">-&gt;</span> $c {
    <span style="color:#66d9ef">my</span> %seen;
    %seen{ @m[$_][$c] }<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>@m<span style="color:#f92672">.</span>elems;
    $unscramble<span style="color:#f92672">~=</span>%seen<span style="color:#f92672">.</span>grep( <span style="color:#f92672">*.</span>value<span style="color:#f92672">==</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">&gt;&gt;.</span>key;
}
</code></pre></div><h2 id="laurent-rosenfeld1">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/laurent-rosenfeld/raku/ch-1.p6">Laurent Rosenfeld&rsquo;s solution</a> also accepts a multiline string with space-separated characters, but uses a more complex <code>map</code> and <code>split</code> chain to turn it into an array of arrays (AoA), which he then transposes to a column-major representation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @AoA <span style="color:#f92672">=</span> map { <span style="color:#66d9ef">my</span> @a <span style="color:#f92672">=</span> split <span style="color:#e6db74">/\s+/</span>, $_; @a }, split <span style="color:#e6db74">/&lt;[\r\n]&gt;+/</span>, $garbled;
<span style="color:#66d9ef">my</span> @transposed;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> @AoA<span style="color:#f92672">.</span>end) <span style="color:#f92672">-&gt;</span> $i {
    @transposed[$_][$i] <span style="color:#f92672">=</span> @AoA[$i][$_] <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span> (@AoA[$i])<span style="color:#f92672">.</span>elems <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>Now, the results are easy; each <code>$line</code> in <code>@transposed</code> corresponds to a column in the original input, so Laurent can simply tally the characters and select the character that appears more than once (assuming there is no ambiguity):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @msg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#66d9ef">for</span> @transposed <span style="color:#f92672">-&gt;</span> $line {
    <span style="color:#66d9ef">my</span> BagHash $counter;
    $counter{$_}<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> @$line;
    push @msg, grep { $counter{$_} <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> }, keys $counter;
}
say join <span style="color:#e6db74">&#34;&#34;</span>, @msg;
</code></pre></div><p>I like the transposition approach.</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<h2 id="luca-ferrari1">Luca Ferrari</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/luca-ferrari/raku/ch-1.p6">Luca Ferrari&rsquo;s solution</a> accepts an array of strings with space-separated characters, in <code>@message</code>. Luca turns the input into an AoA, transposed at the same time:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @chars;
<span style="color:#66d9ef">my</span> $decoded;
<span style="color:#66d9ef">for</span> @message <span style="color:#f92672">-&gt;</span> $single<span style="color:#f92672">-</span>line {
    <span style="color:#66d9ef">for</span> $single<span style="color:#f92672">-</span>line<span style="color:#f92672">.</span>split( <span style="color:#e6db74">&#39;&#39;</span>, :skip<span style="color:#f92672">-</span>empty ) {
        <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span> $_<span style="color:#f92672">.</span>trim;
        @chars[ $+<span style="color:#f92672">+</span> ]<span style="color:#f92672">.</span>push: $_;
    }
}
</code></pre></div><p>As with Laurent&rsquo;s solution, all Luca has to do now is count the characters in each sublist and append the one that appears more than once:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> @chars <span style="color:#f92672">-&gt;</span> @line {
    <span style="color:#66d9ef">for</span> @line <span style="color:#f92672">-&gt;</span> $searching_for {
        <span style="color:#66d9ef">if</span> @line<span style="color:#f92672">.</span>grep( { $_ <span style="color:#f92672">eq</span> $searching_for} )<span style="color:#f92672">.</span>elems <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> {
            $decoded <span style="color:#f92672">~=</span> $searching_for;
            <span style="color:#66d9ef">last</span>;
        }
    }
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://fluca1978.github.io/2020/02/03/PerlWeeklyChallened_46.html">Encoded messages and open rooms</a></p>
<h2 id="mark-anderson1">Mark Anderson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/mark-anderson/raku/ch-1.p6">Mark Anderson&rsquo;s solution</a> accepts a multiline string with space-separated characters, and compactly turns that into an AoA:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @AoL;
<span style="color:#66d9ef">my</span> $result;
<span style="color:#66d9ef">for</span> $msg<span style="color:#f92672">.</span>split(<span style="color:#e6db74">/\n/</span>, :skip<span style="color:#f92672">-</span>empty) <span style="color:#f92672">-&gt;</span> $str {
    @AoL<span style="color:#f92672">.</span>push($str<span style="color:#f92672">.</span>trim<span style="color:#f92672">-</span>trailing<span style="color:#f92672">.</span>comb(<span style="color:#e6db74">/\S/</span>)<span style="color:#f92672">.</span>List);
}
</code></pre></div><p>Mark then transposes <code>@AoL</code> with <code>[Z]</code>, so each <code>$list</code> is a column. Then, Mark uses a regex on <code>$list</code>s string representation to find the repeated character:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> [Z] @AoL <span style="color:#f92672">-&gt;</span> $list {
    $list<span style="color:#f92672">.</span>Str <span style="color:#f92672">~~</span> <span style="color:#e6db74">/(\S) .* {} :my $letter = $0; $letter/</span>;
    $result <span style="color:#f92672">~=</span> $letter;
}
</code></pre></div><h2 id="markus-holzer1">Markus Holzer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/markus-holzer/raku/ch-1.p6">Markus Holzer&rsquo;s solution</a> accepts a multi-line string, uses <code>zip</code> to transpose it, and then uses the <code>Bag</code> representation of each column list to make finding the most frequent character very concise thanks to <code>maxpairs</code>, which returns the pair(s) with the maximum value:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">[<span style="color:#f92672">~</span>] zip(
    $encrypted<span style="color:#f92672">.</span>lines<span style="color:#f92672">.</span>map: <span style="color:#f92672">*.</span>words
)<span style="color:#f92672">.</span>map(
    <span style="color:#f92672">*.</span>Bag<span style="color:#f92672">.</span>maxpairs[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>key
);
</code></pre></div><p>Impressive.</p>
<h2 id="noud1">Noud Aldenhoven</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/noud/raku/ch-1.p6">Noud Aldenhoven&rsquo;s solution</a> accepts an AoA as input, and then <code>decrypt</code> works on a transposed version of that:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">decrypt</span>(@a) {
    <span style="color:#66d9ef">return</span> [<span style="color:#f92672">~</span>] ([Z] @a)<span style="color:#f92672">.</span>map({ select<span style="color:#f92672">-</span>double($_) });
}
</code></pre></div><p>The <code>select-double</code> routine takes a column list and returns the character that appears most frequently:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">select</span>-double(@a) {
    <span style="color:#66d9ef">for</span> @a <span style="color:#f92672">-&gt;</span> $elm {
        <span style="color:#66d9ef">if</span> (@a<span style="color:#f92672">.</span>grep($elm)<span style="color:#f92672">.</span>elems <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>) {
            <span style="color:#66d9ef">return</span> $elm;
        }
    }
}
</code></pre></div><p>This is a nice modular approach to the problem.</p>
<h2 id="roger-bell-west1">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/roger-bell-west/raku/ch-1.p6">Roger Bell West&rsquo;s solution</a> accepts strings from standard input, and puts those into a column-character frequency map (<code>@place</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @place;
<span style="color:#66d9ef">for</span> lines() {
  <span style="color:#f92672">.</span>chomp;
  <span style="color:#66d9ef">my</span> @k<span style="color:#f92672">=</span>comb(<span style="color:#e6db74">/\S/</span>,$_);
  map {@place[$_]{@k[$_]}<span style="color:#f92672">++</span>}, (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@k<span style="color:#f92672">.</span>end);
}
</code></pre></div><p>The putout is then printed character-wise by iterating over each column in <code>@place</code>, <code>sort</code>ing in decreasing numeric order and printing the first (most frequent) result:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> @place <span style="color:#f92672">-&gt;</span> %h {
  <span style="color:#66d9ef">my</span> @v<span style="color:#f92672">=</span>values %h;
  <span style="color:#66d9ef">my</span> @k<span style="color:#f92672">=</span>keys %h;
  <span style="color:#66d9ef">my</span> @i<span style="color:#f92672">=</span>sort {@v[$<span style="color:#960050;background-color:#1e0010">^</span>b] <span style="color:#e6db74">&lt;=&gt;</span> @v[$<span style="color:#960050;background-color:#1e0010">^</span>a]}, (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@v<span style="color:#f92672">.</span>end);
  <span style="color:#66d9ef">print</span> @k[@i[<span style="color:#ae81ff">0</span>]];
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><h2 id="ruben-westerberg1">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ruben-westerberg/raku/ch-1.p6">Ruben Westerberg&rsquo;s solution</a> accepts an AoA, and then iterates over each column index. The most frequent character key/value pair is fetched by taking a vertical slice of <code>@inComming</code> as a <code>Bag</code>, and then taking all pairs that appear twice. The <code>key</code> is the character itself, so that&rsquo;s what Ruben <code>push</code>es to the result:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @decoded;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@inComming[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">my</span> $col<span style="color:#f92672">=</span>@inComming[<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@inComming<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;$_]<span style="color:#f92672">.</span>Bag<span style="color:#f92672">.</span>grep({$_<span style="color:#f92672">.</span>value<span style="color:#f92672">==</span><span style="color:#ae81ff">2</span>});
    @decoded<span style="color:#f92672">.</span>push: $col<span style="color:#f92672">&gt;&gt;.</span>key;
}
put @decoded<span style="color:#f92672">.</span>join: <span style="color:#e6db74">&#34;&#34;</span>;
</code></pre></div><p>Ruben has done a great job of producing concise, expressive code that I was able to understand more or less instantly.</p>
<h2 id="ryan-thompson1">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ryan-thompson/raku/ch-1.p6">My solution</a> accepts an array of <code>@strings</code>, splits those into rows, and then maintains a column-character frequency map in <code>@col-count</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @col<span style="color:#f92672">-</span>count;
<span style="color:#66d9ef">for</span> @strings<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>split: <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#f92672">-&gt;</span> $row {
    @col<span style="color:#f92672">-</span>count[<span style="color:#f92672">.</span>key]{<span style="color:#f92672">.</span>value}<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">|</span>$row<span style="color:#f92672">.</span>pairs;
}
</code></pre></div><p>After that, I built up the result by sorting in decreasing numerical order by value, picking the <code>first</code> (most frequent) result, grabbing its key, and joining everything together:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">@col<span style="color:#f92672">-</span>count<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>sort(<span style="color:#f92672">-*.</span>value)<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>first<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>key<span style="color:#f92672">.</span>join;
</code></pre></div><p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/02/cryptic-message/">Cryptic Message</a></p>
<h2 id="simon-proctor1">Simon Proctor</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/simon-proctor/raku/ch-1.p6">Simon Proctor&rsquo;s solution</a> accepts an AoA in <code>$data</code>, doing the decoding with one statement (I&rsquo;ve added some whitespace):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"> zip( $data<span style="color:#f92672">.</span>List )
<span style="color:#f92672">.</span>map( { Bag<span style="color:#f92672">.</span><span style="color:#66d9ef">new</span>($_) } )
<span style="color:#f92672">.</span>map( <span style="color:#f92672">*.</span>pairs
       <span style="color:#f92672">.</span>sort( { $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>value <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>value } )
       <span style="color:#f92672">.</span>first
       <span style="color:#f92672">.</span>key )
<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;&#34;</span>)
</code></pre></div><p>Here again we see <code>zip</code> being used to transpose the matrix, and the <code>Bag</code> representation to enable <code>sort</code>ing by value. The <code>.first.key</code> is the most frequent character.</p>
<p>It&rsquo;s important to note that, unlike Perl&rsquo;s <code>cmp</code> (based on C&rsquo;s <code>strcmp</code>) which is a stringwise 3-way comparator, Raku&rsquo;s <code>cmp</code> is generic, so it will compare integers as integers, here.</p>
<h2 id="ulrich-rieke1">Ulrich Rieke</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/raku/ch-1.p6">Ulrich Rieke&rsquo;s solution</a> accepts an array of <code>@strings</code>, and then iterates through each column index, building up a <code>%letterfrequency</code> map for the current column:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> $len <span style="color:#f92672">=</span> @words[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>chars ;
<span style="color:#66d9ef">my</span> $decoded ;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) <span style="color:#f92672">-&gt;</span> $i {
    <span style="color:#66d9ef">my</span> %letterfrequency ;
    <span style="color:#66d9ef">for</span> @words <span style="color:#f92672">-&gt;</span> $word {
        %letterfrequency{ $word<span style="color:#f92672">.</span>substr( $i , <span style="color:#ae81ff">1</span> ) }<span style="color:#f92672">++</span> ;
    }
</code></pre></div><p>Following a reverse-numerical order sort, the first element of <code>@sorted</code> (the most frequent character) is appended to the <code>$decoded</code> output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">    <span style="color:#66d9ef">my</span> @sorted <span style="color:#f92672">=</span> %letterfrequency<span style="color:#f92672">.</span>keys<span style="color:#f92672">.</span>sort( {
        %letterfrequency{$<span style="color:#960050;background-color:#1e0010">^</span>b} <span style="color:#e6db74">&lt;=&gt;</span> %letterfrequency{$<span style="color:#960050;background-color:#1e0010">^</span>a} } ) ;
    $decoded <span style="color:#f92672">~=</span> @sorted[ <span style="color:#ae81ff">0</span> ] ;
}
</code></pre></div><hr>
<hr>
<h1 id="task2">Task #2 - Is The Room Open? (500 Doors)</h1>
<p>Here is Mohammad&rsquo;s description:</p>
<p>There are 500 rooms in a hotel with 500 employees having keys to all the rooms. The first employee opened main entrance door of all the rooms. The second employee then closed the doors of room numbers 2,4,6,8,10 and so on to 500. The third employee then closed the door if it was opened or opened the door if it was closed of rooms 3,6,9,12,15 and so on to 500. Similarly the fourth employee did the same as the third but only room numbers 4,8,12,16 and so on to 500. This goes on until all employees has had a turn.</p>
<p>Write a script to find out all the rooms still open at the end.</p>
<hr>
<h2 id="types-of-solutions">Types of Solutions</h2>
<h3 id="1-nested-loops">1. Nested Loops</h3>
<p>Most people solved this with some form of a nested loop. The outer loop for each employee (<code>i</code>), and the inner loop corresponds to each <code>1/i</code> door that employee will toggle. This results in an efficiency of O(n × (1/1 + 1/2 + ⋯ + 1/n)) ≈ O(n × log n). For a problem size of n = 500, that&rsquo;s absolutely fine.  However, with a little bit of math, it&rsquo;s possible to simplify things even more:</p>
<h3 id="2-square-numbers">2. Square Numbers</h3>
<p>Many people noticed that the doors left open are the square numbers (1², 2²=4, 3²=9, etc.). Some decided to implement this pattern as an algorithm, resulting in trivial code with O(sqrt(n)) complexity.</p>
<p>The main difficulty behind using this method is demonstrating its correctness, yet several people managed to do just that, with explanations or informal proofs of why <em>only</em> perfect square numbered doors would be open.</p>
<p>Correctness proofs are an important topic in computer science, so I&rsquo;m glad to see some effort being put into it here!</p>
<hr>
<p>Of course, neither of these solutions is necessarily &ldquo;better&rdquo; in the context of this challenge. The square numbers solution (2) is the result of analysis and math, while the looping solution (1) is a better showcase of the language features and coding ability. Both skills are tremendously important, and I&rsquo;m quite sure everyone I&rsquo;m reviewing today is capable of either method; it&rsquo;s just a matter of what they decide to submit.</p>
<hr>
<h2 id="arne-sommer2">Arne Sommer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/arne-sommer/raku/ch-2.p6">Arne Sommer&rsquo;s solution</a> uses nested loops to toggle the doors in <code>@open</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @open;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $employee {
    <span style="color:#66d9ef">for</span> ($employee, $employee <span style="color:#f92672">+</span> $employee <span style="color:#f92672">...</span> <span style="color:#ae81ff">500</span>) <span style="color:#f92672">-&gt;</span> $index {
        @open[$index] <span style="color:#f92672">=</span> <span style="color:#f92672">!</span> @open[$index];
    }
}
say <span style="color:#e6db74">&#34;Open rooms: { (1..500).grep({@open[$_] }).join(&#39;,&#39;) }.&#34;</span>;
</code></pre></div><p>The inner loop will only iterate over every <code>$employee</code>th index.</p>
<p><strong>Blog</strong> › <a href="https://raku-musings.com/cryptic-room.html">The Cryptic Raku Room</a></p>
<h2 id="colin-crain2">Colin Crain</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/colin-crain/raku/ch-2.p6">Colin Crain&rsquo;s solution</a> has an outer loop for each employee, but the inner loop builds a list of <code>@doors</code> that employee will toggle, and then applies it like a mask over <code>@hotel</code> using zip+XOR (<code>Z+^</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @hotel <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> xx $size;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$size) <span style="color:#f92672">-&gt;</span> $emp {
    <span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> map { $_ %% <span style="color:#960050;background-color:#1e0010">$</span>emp ?? <span style="color:#ae81ff">1</span> <span style="color:#f92672">!!</span> <span style="color:#ae81ff">0</span> }, ( <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$size );
    @hotel <span style="color:#f92672">=</span> @hotel Z<span style="color:#f92672">+^</span> @doors;
}
</code></pre></div><p>Then it&rsquo;s just a matter of printing the numbers of the <code>@hotel</code> rooms that are
open:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$size<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    printf <span style="color:#e6db74">&#34;room %3s is open\n&#34;</span>, $_<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> @hotel[$_];
}
</code></pre></div><h2 id="jaldhar-h-vyas2">Jaldhar H. Vyas</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/jaldhar-h-vyas/raku/ch-2.p6">Jaldhar H. Vyas&rsquo;s solution</a> uses a nested loop to toggle each door <em>iff</em> the employee number, <code>$i</code> divides the room number, <code>$j</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">constant $end <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> Bool @rooms[$end];
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..^</span> $end <span style="color:#f92672">-&gt;</span> $i {
    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..^</span> $end <span style="color:#f92672">-&gt;</span> $j {
        <span style="color:#66d9ef">if</span> ($j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) %% <span style="color:#960050;background-color:#1e0010">($</span>i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) {
            @rooms[$j] <span style="color:#f92672">=</span> <span style="color:#f92672">!</span>@rooms[$j];
        }
    }
}
</code></pre></div><p>Printing the results is accomplished similarly, taking care to work with the 0-based indexing set up in the previous section:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..^</span> $end <span style="color:#f92672">-&gt;</span> $i {
    <span style="color:#66d9ef">if</span> @rooms[$i] {
        <span style="color:#66d9ef">print</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">q{ }</span>;
    }
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;

</code></pre></div><h2 id="javier-luque2">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/javier-luque/raku/ch-2.p6">Javier Luque&rsquo;s solution</a> uses a nested loop as well:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @doors;
@doors[<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>) <span style="color:#f92672">-&gt;</span> $employee {
    <span style="color:#66d9ef">for</span> ($employee <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) <span style="color:#f92672">-&gt;</span> $door {
        <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">unless</span> $door % <span style="color:#960050;background-color:#1e0010">$</span>employee <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
        @doors[$door] <span style="color:#f92672">=</span> (@doors[$door]) ?? <span style="color:#ae81ff">0</span> <span style="color:#f92672">!!</span> <span style="color:#ae81ff">1</span>;
    }
}
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>) <span style="color:#f92672">-&gt;</span> $i {
    say <span style="color:#e6db74">&#34;Door: &#34;</span> <span style="color:#f92672">~</span> $i <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34; is open.&#34;</span>
        <span style="color:#66d9ef">if</span> (@doors[$i]);
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">046 – Perl Weekly Challenge</a></p>
<h2 id="kevin-colyer2">Kevin Colyer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/kevin-colyer/raku/ch-2.p6">Kevin Colyer&rsquo;s solution</a> does a nested loop as well, but optimizes the inner loop by incrementing <code>$i</code> by the <code>$e</code>mployee number:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> Int @doors <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> xx <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $e {
    <span style="color:#66d9ef">my</span> $i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">while</span> $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">500</span> {
        @doors[$i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> @doors[$i];
        $i<span style="color:#f92672">+=</span>$e;
    }
}
say @doors<span style="color:#f92672">.</span>sum;
</code></pre></div><p>Kevin outputs <code>@doors.sum</code>, which effectively counts how many doors are open.  I modified that line to read <code>@doors.pairs.grep(*.value)».key</code>, and Kevin&rsquo;s code does indeed find the correct doors, though there was never really any doubt.</p>
<h2 id="laurent-rosenfeld2">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/laurent-rosenfeld/raku/ch-2.p6">Laurent Rosenfeld&rsquo;s solution</a> does the efficient nested looping method as well:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> xx MAX <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; <span style="color:#75715e"># (first employee)</span>
<span style="color:#66d9ef">my</span> $start <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">..</span>MAX {
    $start<span style="color:#f92672">++</span>;
    <span style="color:#66d9ef">my</span> $door <span style="color:#f92672">=</span> $start;
    <span style="color:#66d9ef">while</span> $door <span style="color:#f92672">&lt;=</span> MAX {
        @rooms[$door] <span style="color:#f92672">=</span> @rooms[$door] ?? <span style="color:#ae81ff">0</span> <span style="color:#f92672">!!</span> <span style="color:#ae81ff">1</span>;
        $door <span style="color:#f92672">+=</span> $start;
    }
}
say join <span style="color:#e6db74">&#34; &#34;</span>, @rooms[<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>MAX];
</code></pre></div><p>Laurent opted to print a string of 1s and 0s (1 = open, 0 = closed). In his blog, Laurent took the time to do some interesting analysis of this problem.</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<h2 id="luca-ferrari2">Luca Ferrari</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/luca-ferrari/raku/ch-2.p6">Luca Ferrari&rsquo;s solution</a> stores his door status in a <code>%rooms</code> hash, but the resulting code is similar to array-based nested loop solutions:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> %rooms <span style="color:#f92672">=</span> ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $room<span style="color:#f92672">-</span>count)<span style="color:#f92672">.</span>map: <span style="color:#f92672">*</span> <span style="color:#f92672">=&gt;</span> False;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $room<span style="color:#f92672">-</span>count <span style="color:#f92672">-&gt;</span> $employee {
    %rooms{ $_ } <span style="color:#f92672">=</span> <span style="color:#f92672">!</span> %rooms{ $_ } <span style="color:#66d9ef">if</span> $_ %% <span style="color:#960050;background-color:#1e0010">$</span>employee <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $room<span style="color:#f92672">-</span>count;
}
</code></pre></div><p>Since <code>%rooms</code> is a hash, the room numbers (keys) will be in random order, so
they must be sorted:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say <span style="color:#e6db74">&#34;Room $_ is Open&#34;</span> <span style="color:#66d9ef">if</span> %rooms{ $_ } <span style="color:#66d9ef">for</span> %rooms<span style="color:#f92672">.</span>keys<span style="color:#f92672">.</span>sort: <span style="color:#f92672">*.</span>Int <span style="color:#e6db74">&lt;=&gt;</span> <span style="color:#f92672">*.</span>Int;
</code></pre></div><p><strong>Blog</strong> › <a href="https://fluca1978.github.io/2020/02/03/PerlWeeklyChallened_46.html">Encoded messages and open rooms</a></p>
<h2 id="mark-anderson2">Mark Anderson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/mark-anderson/raku/ch-2.p6">Mark Anderson&rsquo;s solution</a> has a little fun with control flow in the nested loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> <span style="color:#f92672">\</span>open <span style="color:#f92672">=</span> True;
<span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> open xx <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $emp {
    NEXT {
        <span style="color:#66d9ef">for</span> $emp, $emp<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">...</span> <span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $door {
            @doors[$door<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] ?<span style="color:#f92672">^=</span> open;
        }
    }
    say $emp <span style="color:#66d9ef">if</span> @doors[$emp<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
}
</code></pre></div><p>Mark also uses a special sequence to loop over <code>$emp</code>th door in the inner loop. Finally, you&rsquo;ll notice the output line is inside the top-level loop; this works because <code>$emp-1</code>'s door will never be toggled once it is <code>$emp</code>'s turn through the loop.</p>
<h2 id="markus-holzer2">Markus Holzer</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/markus-holzer/raku/ch-2.p6">Markus Holzer&rsquo;s solution</a> makes note of the fact that only the square numbered doors will be open (check the link for his informal proof). He then offers three ways to generate the list of square numbers below 500:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say <span style="color:#e6db74">&#34;Open rooms: &#34;</span>, ( <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span> )<span style="color:#f92672">.</span>grep: <span style="color:#f92672">*.&amp;</span>is<span style="color:#f92672">-</span>open;
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is</span>-open( $room ) { $room<span style="color:#f92672">.</span>sqrt<span style="color:#f92672">.</span>narrow <span style="color:#f92672">~~</span> Int }
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say <span style="color:#e6db74">&#34;Open rooms: &#34;</span>, (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span><span style="color:#f92672">.</span>sqrt<span style="color:#f92672">.</span>Int)<span style="color:#f92672">.</span>map: <span style="color:#f92672">*</span> <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say <span style="color:#e6db74">&#34;Open rooms: &#34;</span>, (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span><span style="color:#f92672">.</span>sqrt<span style="color:#f92672">.</span>Int)<span style="color:#f92672">&gt;&gt;</span><span style="color:#960050;background-color:#1e0010">²</span>; <span style="color:#75715e"># nicest idiom by jnthn</span>
</code></pre></div><p><code>jnthn</code>, of course is <a href="http://www.jnthn.net/">Jonathan Worthington</a> (<a href="https://github.com/jnthn">GitHub</a>).</p>
<h2 id="noud2">Noud Aldenhoven</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/noud/raku/ch-2.p6">Noud Aldenhoven&rsquo;s solution</a> also prints out a list of square numbers, and also includes an informal proof in the comments of his solution. Here is the code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say <span style="color:#e6db74">&#34;Open rooms:&#34;</span>;
say $_<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>(<span style="color:#ae81ff">500</span><span style="color:#f92672">.</span>sqrt);
</code></pre></div><p>Noud&rsquo;s blog contains essentially the same proof, but with better typesetting than you can get in a Raku source file:</p>
<p><strong>Blog</strong> › <a href="https://www.noudaldenhoven.nl/wordpress/?p=288">Is the room open?</a></p>
<h2 id="roger-bell-west2">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/roger-bell-west/raku/ch-2.p6">Roger Bell West&rsquo;s solution</a> loops efficiently, thanks to the C-style inner <code>loop</code>, which advances the index by the current employee <code>$n</code>umber:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @rooms<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> xx <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $n {
  loop (<span style="color:#66d9ef">my</span> $k<span style="color:#f92672">=</span>$n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> ; $k <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">500</span> ; $k<span style="color:#f92672">+=</span>$n) {
    @rooms[$k]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">-</span>@rooms[$k];
  }
}
map {say $_<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>}, grep {@rooms[$_]<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>}, (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@rooms<span style="color:#f92672">.</span>end);
</code></pre></div><h2 id="ruben-westerberg2">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ruben-westerberg/raku/ch-2.p6">Ruben Westerberg&rsquo;s solution</a> generates an intermediate <code>@index</code> array, which is essentially a mask of doors to toggle for the current employee (<code>$i</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @doors<span style="color:#f92672">=</span>False xx <span style="color:#ae81ff">500</span>; <span style="color:#75715e">#doors initally closed</span>
@doors[$_]<span style="color:#f92672">=!</span>@doors[$_] <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">499</span>; <span style="color:#75715e">#First person opens all</span>
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) <span style="color:#f92672">-&gt;</span> $i {
    <span style="color:#66d9ef">my</span> @index<span style="color:#f92672">=</span>($i, {$_<span style="color:#f92672">+</span>$i} <span style="color:#f92672">...</span> <span style="color:#f92672">*</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">500</span>)<span style="color:#f92672">.</span>grep(<span style="color:#f92672">*</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">500</span>)<span style="color:#f92672">.</span>map: <span style="color:#f92672">*-</span><span style="color:#ae81ff">1</span>;
    @doors[$_]<span style="color:#f92672">=!</span>@doors[$_] <span style="color:#66d9ef">for</span> @index;
}
put @doors<span style="color:#f92672">&gt;&gt;.</span>Num;
</code></pre></div><p>Ruben&rsquo;s <code>@doors</code> is an array of <code>Bool</code>s, so he coerces each to a <code>Num</code> in order to output a string of 1s (open) and 0s (closed).</p>
<h2 id="ryan-thompson2">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ryan-thompson/raku/ch-2.p6">My submission</a> includes two solutions. The first is to simply output the square numbers directly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$doors<span style="color:#f92672">.</span>sqrt<span style="color:#f92672">.</span>Int) <span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">**</span><span style="color:#960050;background-color:#1e0010">»</span> <span style="color:#ae81ff">2</span>;
</code></pre></div><p>As justification for the above method, I provided an informal correctness proof in my blog, linked below.</p>
<p>For completeness, I decided to also submit a looping solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> %doors;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$doors <span style="color:#f92672">-&gt;</span> $m {
    %doors{$m<span style="color:#f92672">*</span>$_} <span style="color:#f92672">^^=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$doors<span style="color:#f92672">/</span>$m;
}
say %doors<span style="color:#f92672">.</span>grep(<span style="color:#f92672">*.</span>value)<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>key<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>Int<span style="color:#f92672">.</span>sort;
</code></pre></div><p>The looping is optimal, as I only loop over every <code>$m</code> doors (<code>$m</code> is the current employee). For the output, I simply pull out all doors with a value and sort them numerically.</p>
<p>As a dispassionate reviewer of my own code a week later, I don&rsquo;t know why I used a hash, here. An array would have been cleaner, avoiding a potentially costly <code>sort</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku">say %doors<span style="color:#f92672">.</span>grep(<span style="color:#f92672">*.</span>value)<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>key<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>Int<span style="color:#f92672">.</span>sort; <span style="color:#75715e"># &lt;-- This</span>
say @doors<span style="color:#f92672">.</span>pairs<span style="color:#f92672">.</span>grep(<span style="color:#f92672">*.</span>value)<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>key;     <span style="color:#75715e"># &lt;-- Becomes this</span>
</code></pre></div><p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/02/500-doors/">Is the Room Open? (500 Doors)</a></p>
<h2 id="simon-proctor2">Simon Proctor</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/simon-proctor/raku/ch-2.p6">Simon Proctor&rsquo;s solution</a> loops optimally, thanks to the increment in the <code>while</code> loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @doors<span style="color:#f92672">-</span>open <span style="color:#f92672">=</span> <span style="color:#ae81ff">501</span> xx False;
<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $inc {
    <span style="color:#66d9ef">my</span> $cur <span style="color:#f92672">=</span> $inc;
    <span style="color:#66d9ef">while</span> $cur <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">500</span> {
        @doors<span style="color:#f92672">-</span>open[$cur] <span style="color:#f92672">=</span> <span style="color:#f92672">!</span> @doors<span style="color:#f92672">-</span>open[$cur];
        $cur <span style="color:#f92672">+=</span> $inc;
    }
}
</code></pre></div><p>Since Simon added a dummy element zero, for 501 elements in total, he can work directly with 1-based indexing, which simplifies everything, including the output loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span> <span style="color:#f92672">-&gt;</span> $door {
    say <span style="color:#e6db74">&#34;$door is Open&#34;</span> <span style="color:#66d9ef">if</span> @doors<span style="color:#f92672">-</span>open[$door];
}
</code></pre></div><h2 id="ulrich-rieke2">Ulrich Rieke</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/raku/ch-2.p6">Ulrich Rieke&rsquo;s solution</a> begins by
defining a custom <code>flip</code> routine, that returns the opposite of the <code>open</code> or
<code>closed</code> keyword passed in:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flip</span>( $state ) {
    <span style="color:#66d9ef">return</span> $state <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;open&#34;</span> ?? <span style="color:#e6db74">&#34;closed&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;open&#34;</span>  ;
}
</code></pre></div><p>The main body of Ulrich&rsquo;s solution is a familiar nested loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @current <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;open&#34;</span> xx <span style="color:#ae81ff">500</span> ;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) <span style="color:#f92672">-&gt;</span> $i {
    <span style="color:#66d9ef">if</span> ( $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">251</span> ) {
        <span style="color:#66d9ef">for</span> ($i , <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> $i  <span style="color:#f92672">...</span> <span style="color:#ae81ff">500</span> ) <span style="color:#f92672">-&gt;</span> $j {
            @current[ $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] <span style="color:#f92672">=</span> flip( @current[ $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] ) ;
        }
    }
    <span style="color:#66d9ef">else</span> {
        @current[ $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] <span style="color:#f92672">=</span> flip( @current[ $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] ) ;
    }
}
</code></pre></div><p>At this point, <code>@current</code> is an array of strings, <code>closed</code> or <code>open</code>,
accordingly. So Ulrich then zips that into <code>@doors</code> to map the <code>open</code>/<code>closed</code>
state to the room number:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> @current Z (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) ;
</code></pre></div><p>That is a neat way to do it. I would normally use <code>@current.pairs</code> (or <code>@current.antipairs</code> in this case), but it&rsquo;s always nice to consider another way to do the same thing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-raku" data-lang="raku"><span style="color:#66d9ef">for</span> @doors <span style="color:#f92672">-&gt;</span> $pair {
    say <span style="color:#e6db74">&#34;door {$pair[ 1 ]} is open!&#34;</span> <span style="color:#66d9ef">if</span> $pair[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;open&#34;</span> ;
}
</code></pre></div><hr>
<hr>
<h2 id="blogs">See Also</h2>
<h3 id="blogs-this-week">Blogs this week:</h3>
<p><strong>Arne Sommer</strong> › <a href="https://raku-musings.com/cryptic-room.html">The Cryptic Raku Room</a></p>
<p><strong>Javier Luque</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">046 – Perl Weekly Challenge</a></p>
<p><strong>Laurent Rosenfeld</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<p><strong>Luca Ferrari</strong> › <a href="https://fluca1978.github.io/2020/02/03/PerlWeeklyChallened_46.html">Encoded messages and open rooms</a></p>
<p><strong>Noud Aldenhoven</strong> › <a href="https://www.noudaldenhoven.nl/wordpress/?p=288">Is the room open?</a></p>
<p><strong>Ryan Thompson</strong> › <a href="http://www.ry.ca/2020/02/cryptic-message/">Cryptic Message</a> | <a href="http://www.ry.ca/2020/02/500-doors/">Is the Room Open? (500 Doors)</a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

