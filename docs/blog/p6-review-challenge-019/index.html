<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Laurent Rosenfeld Weekly Review: Challenge - 019"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/p6-review-challenge-019/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Laurent Rosenfeld Weekly Review: Challenge - #019."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #019.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/p6-review-challenge-019/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 019</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 019</h2>
                    <div class="portfolio-meta">
                        <span>Wednesday, Oct 9, 2019</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/p6-review-challenge-019.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="task-1-five-weekends-in-a-month">Task #1: Five Weekends in a Month</h2>
<p>This is derived from my <a href="http://blogs.perl.org/users/laurent_r/2019/07/perl-weekly-challenge-19-weekends-and-wrapping-lines.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-019/">Week 19 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Write a script to display months from the year 1900 to 2019 where you find 5 weekends i.e. 5 Friday, 5 Saturday and 5 Sunday.</em></p>
<h2 id="my-solution">My Solution</h2>
<p>My first idea was to loop over each month in the range 1900-2019. For each month, find the first Friday and then count the number of Sundays after that in the month. Then, even before I started to code that, it came to my mind that I didn&rsquo;t need to loop over all the days of the month, but just to count how many days there were in the month after the first Friday: there will five weekends if there are more than 29 days (4 weeks plus 1 day) after that first Friday of the month.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">use</span> v6;

<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1900</span><span style="color:#f92672">..</span><span style="color:#ae81ff">2019</span> <span style="color:#f92672">-&gt;</span> $year {
    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">12</span> <span style="color:#f92672">-&gt;</span> $month {
        <span style="color:#66d9ef">my</span> $day <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">my</span> $date <span style="color:#f92672">=</span> Date<span style="color:#f92672">.</span><span style="color:#66d9ef">new</span>($year, $month, $day);
        <span style="color:#66d9ef">my</span> $last<span style="color:#f92672">-</span>day<span style="color:#f92672">-</span>of<span style="color:#f92672">-</span>month <span style="color:#f92672">=</span>
            $date<span style="color:#f92672">.</span>later(month <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>earlier(day <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>);
        <span style="color:#f92672">++</span>$date <span style="color:#66d9ef">until</span> $date<span style="color:#f92672">.</span>day<span style="color:#f92672">-</span>of<span style="color:#f92672">-</span>week <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span>;
        say $year, <span style="color:#e6db74">&#34;-&#34;</span>, $month<span style="color:#f92672">.</span>fmt(<span style="color:#e6db74">&#34;%02d&#34;</span>), <span style="color:#e6db74">&#34; has 5 weekends&#34;</span>
            <span style="color:#66d9ef">if</span> $last<span style="color:#f92672">-</span>day<span style="color:#f92672">-</span>of<span style="color:#f92672">-</span>month <span style="color:#f92672">-</span> $date <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">29</span>;
    }
}
</code></pre></div><p>That works fine:</p>
<pre><code>1901-03 has 5 weekends
1902-08 has 5 weekends
1903-05 has 5 weekends
1904-01 has 5 weekends
...
(lines omitted for brevity)
...
2016-01 has 5 weekends
2016-07 has 5 weekends
2017-12 has 5 weekends
2019-03 has 5 weekends
</code></pre>
<p>Then, I started to check the result and looked at a calendar, and it immediately became obvious to me that it is actually even much simpler than that: to have 5 full weekends (Friday through Sunday), a month needs to have 31 days (so January, March, May, etc.) <em>and</em> to start with a Friday. So this is my new simpler script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">use</span> v6;

<span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1900</span><span style="color:#f92672">..</span><span style="color:#ae81ff">2019</span> <span style="color:#f92672">-&gt;</span> $year {
    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">12</span> <span style="color:#f92672">-&gt;</span> $month {
        say <span style="color:#e6db74">&#34;$year-{$month.fmt(&#34;</span>%02d<span style="color:#e6db74">&#34;)} has 5 weekends.&#34;</span>
            <span style="color:#66d9ef">if</span> Date<span style="color:#f92672">.</span><span style="color:#66d9ef">new</span>($year, $month, <span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>day<span style="color:#f92672">-</span>of<span style="color:#f92672">-</span>week <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span>;
    }
}
</code></pre></div><p>This prints the same as before, there no point repeating the output.</p>
<h2 id="alternative-solutions">Alternative Solutions</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/arne-sommer/perl6/ch-1.p6">Arne Sommer</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/fjwhittle/perl6/ch-1.p6">Francis Whittle</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/jo-christian-oterhals/perl6/ch-1.p6">Jo Christian Oterhals</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/noud/perl6/ch-1.p6">Noud</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/ozzy/perl6/ch-1.p6">Ozzy</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/feng-chang/perl6/ch-1.p6">Feng Chang</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/jaldhar-h-vyas/perl6/ch-1.p6">Jaldhar H. Vyas</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/roger-bell-west/perl6/ch-1.p6">Roger Bell West</a>, and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/ruben-westerberg/perl6/ch-1.p6">Ruben Westerberg</a> also all picked up that only months with 31 days and starting on a Friday can contain five full weekends. The main difference between their solutions is that some (like me) hard-coded the months with 31 days, where others used the <code>day-in-months</code> method to let the program find out. Strangely, none of those who used the <code>day-in-months</code> method thought about caching the list of eligible months in an array to speed up the rest of the process, so they ended up making many more checks than really needed. Having said that, I should add that all this is very fast and most of the time taken is for printing out the results.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/randy-lauen/perl6/ch-1.p6">Randy Lauen</a> also knows about months with 31 sdays starting on a Friday, but his solution is quite original as he created a role with two methods (including <code>has-five-full-weekends</code>) to fulfill the requirement. Interesting and instructive approach, worth looking at, but perhaps a little bit over-engineered for such a simple task, in my humble opinion.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/athanasius/perl6/ch-1.p6">Athanasius</a> has also found out that a month needs to have 31 days to be able to have five full weekends, but looked at whether the 29th day of each such month is a Friday to decide whether there are five weekends in that month. This is obviously equivalent to finding whether the first day of the month is a Friday, but a bit unexpected.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/joelle-maslak/perl6/ch-1.p6">Joelle Maslak</a> took another equivalent approach: for a month to have five full weekends, the month must have 31 days and <em>end on a Sunday</em>.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/simon-proctor/perl6/ch-1.p6">Simon Proctor</a> used a different approach actually counting the number of weekends for each month.</p>
<h2 id="task-2-wrapping-lines">Task #2: Wrapping Lines</h2>
<p>This is derived from my <a href="http://blogs.perl.org/users/laurent_r/2019/07/perl-weekly-challenge-19-weekends-and-wrapping-lines.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-019/">Week 19 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Write a script that can wrap the given paragraph at a specified column using the <a href="https://en.wikipedia.org/wiki/Line_wrap_and_word_wrap#Minimum_number_of_lines">greedy algorithm</a>.</em></p>
<p>The greedy algorithm does not try to balance successive lines: it just stores as much as it can from the text into the current line, and then moves to the next line.</p>
<p>For this, we will suppose our <code>wrap</code> subroutine receives a line of text as a parameter and return a string wrapped to fit a given maximal width. We will also suppose that the input text is plain ASCII, some changes may have to be done for Unicode text.</p>
<h2 id="my-solution-1">My Solution</h2>
<p>The most typical way to solve such a problem is usually to split the input into words and to add words to a line until it goes over the maximal width; at this point, the script removes the last word (or doesn&rsquo;t add it is the line would get too long), produces the line and starts the new iteration with the current word. As we will see below, all challengers except Francis J. Whittle (and myself) used some variation of that algorithm.</p>
<p>I tend to think it will be more efficient to look for a space backward (with the <code>rindex</code> built-in function) from the maximal length position, because this will be doing less string manipulations:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">use</span> v6;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">wrap</span> (Str $line is copy, Int $width) {
    <span style="color:#66d9ef">my</span> $out <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
    <span style="color:#66d9ef">while</span> ($line) {
        <span style="color:#66d9ef">return</span> $out <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;$line\n&#34;</span> <span style="color:#66d9ef">if</span> $line<span style="color:#f92672">.</span>chars <span style="color:#f92672">&lt;</span> $width;
        <span style="color:#66d9ef">my</span> $pos <span style="color:#f92672">=</span> rindex $line, <span style="color:#e6db74">&#39; &#39;</span>, $width <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
        $out <span style="color:#f92672">=</span> $out <span style="color:#f92672">~</span> substr($line, <span style="color:#ae81ff">0</span>, $pos) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
        $line <span style="color:#f92672">=</span> substr $line, $pos<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
    }
    <span style="color:#66d9ef">return</span> $out;
}

<span style="color:#66d9ef">my</span> $in <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dolor sed viverra ipsum nunc aliquet bibendum enim. In massa tempor nec feugiat. Nunc aliquet bibendum enim facilisis gravida. Nisl nunc mi ipsum faucibus vitae aliquet nec ullamcorper. Amet luctus venenatis lectus magna fringilla.&#34;</span>;

say wrap $in, $_ <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">35</span>;
</code></pre></div><p>Note that the <code>$out</code> variable is always either the empty string or a string ending with a new line character, so that I can always add a string of <code>$width</code> or less characters to it.</p>
<p>This produces the following output:</p>
<pre><code>$ perl6 wrap.p6
Lorem ipsum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna
aliqua. Dolor sed viverra ipsum nunc aliquet bibendum enim.
In massa tempor nec feugiat. Nunc aliquet bibendum enim
facilisis gravida. Nisl nunc mi ipsum faucibus vitae
aliquet nec ullamcorper. Amet luctus venenatis lectus magna
fringilla.

Lorem ipsum dolor sit amet,
consectetur adipiscing elit, sed
do eiusmod tempor incididunt ut
labore et dolore magna aliqua.
Dolor sed viverra ipsum nunc
aliquet bibendum enim. In massa
tempor nec feugiat. Nunc aliquet
bibendum enim facilisis gravida.
Nisl nunc mi ipsum faucibus vitae
aliquet nec ullamcorper. Amet
luctus venenatis lectus magna
fringilla.
</code></pre>
<h2 id="alternative-solutions-1">Alternative Solutions</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/arne-sommer/perl6/ch-2.p6">Arne Sommer</a> used multi <code>MAIN</code> subroutines to handle both string and file input parameters. Otherwise, his solution consists in looping over the words, building the current line and &ldquo;flushing&rdquo; it if the new word would make the line length too large.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/jo-christian-oterhals/perl6/ch-2.p6">Jo Christian Oterhals</a> also provided for different input parameters and proceeded to split the input in words and simply outputs the words; at the same time, the script maintains a <code>$space-left</code> variable: whenever a word (plus a space) is longer than this variable, the script outputs a new line character. <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/ozzy/perl6/ch-2.p6">Ozzy</a>,  <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/randy-lauen/perl6/ch-2.p6">Randy Lauen</a>, and Jaldhar H. Vyas](<a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/jaldhar-h-vyas/perl6/ch-2.p6">https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/jaldhar-h-vyas/perl6/ch-2.p6</a>) also split the input into words and maintained a <code>space-left</code> variable to figure out when to add a new line. <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/simon-proctor/perl6/ch-2.p6">Simon Proctor</a>, Roger Bell West](<a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/roger-bell-west/perl6/ch-2.p6),">https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/roger-bell-west/perl6/ch-2.p6),</a> <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/ruben-westerberg/perl6/ch-2.p6,">Ruben Westernerg</a> and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/athanasius/perl6/ch-2.p6">Athanasius</a> essentially did the same method (except that their space left variables are called, respectively, <code>$left</code>, <code>$s</code>, <code>$rem</code>, and <code>remaining</code>). Note that Athanasius&rsquo;s script is fairly elaborate, as it first splits the input into paragraphs and then splits the paragraphs into words.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/noud/perl6/ch-2.p6">Noud</a>, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/feng-chang/perl6/ch-2.p6">Feng Chang</a>, and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/joelle-maslak/perl6/ch-2.p6">Joelle Maslak</a> split the input into words and concatenated each word into a line. When adding a new word to the line would make the line too long, the script outputs the current line and starts the new line with the current word.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-019/fjwhittle/perl6/ch-2.p6">Francis J. Whittle</a>&lsquo;s fairly original solution also provides for the possibility of taking a string or a file as input parameter, and then uses a single relatively complex regex (with three alternatives) as a parameter to the <code>comb</code> built-in function to process the input. For a single paragraph, part of the regex might look like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#e6db74">/ \s * &lt;( &lt;-[ \n ]&gt; ** { 1..($column-1) } \S )&gt; [ \s+ || $ ] /</span>
</code></pre></div><p>which looks for up to the specified <code>$column</code> minus 1 non-newline characters, followed by one non-whitespace character and followed by trailing whitespace or the end of the input string (in case you don&rsquo;t know these capture markers, note that spaces before <code>&lt;(</code> or after  <code>)&gt;</code> will not be part of the overall capture). The above regex will not handle properly words which are longer than the maximal line length, so the next alternative in Francis&rsquo;s complete regex cuts such words at the line length limit. For an input of several paragraphs, the regex gets again slightly more complicated. Quite impressive, I must say. I really advise you to read his code and/or his blog. IMHO, this is the best of all the P6 solutions suggested for this challenge.</p>
<p>Note that Joelle and one or two other challengers decided to abort the script if it found a single word longer than the line length limit.</p>
<h2 id="enter-damian-conway">Enter Damian Conway</h2>
<p>Damian Conway blogged about this challenge in <a href="http://blogs.perl.org/users/damian_conway/2019/08/greed-is-good-balance-is-better-beauty-is-best.html">Greed is good, balance is better, beauty is best.</a>. His basic solution is somewhat similar to Francis: it uses the <code>comb</code> built-in with a regex to split the input into lines of less than the maximal length and then joins those lines with a new line character. The beauty of his solution is that it consists in one single statement:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span> (:$width = 80) {
    $<span style="color:#960050;background-color:#1e0010">*</span>IN<span style="color:#f92672">.</span>slurp<span style="color:#f92672">.</span>words
        <span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#39; &#39;</span>)
        <span style="color:#f92672">.</span>comb(<span style="color:#e6db74">/ . ** {1..$width}  )&gt;  [&#39; &#39; | $] /</span>)
        <span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;\n&#34;</span>)
        <span style="color:#f92672">.</span>say
}
</code></pre></div><p>But, Damian continues, this does not work properly with extremely long words: first, some words are decapitated and the balance of the lines really looks bad (go to his blog and see his hilariously absurd examples). Damian proceeds to show how to cut too long words (but not too close to either end) and to add hyphens.</p>
<p>Even with that problem solved, Damian complains that the greedy algorithm still produces ugly unbalanced paragraphs. So, he turns to the algorithm suggested by Donald Knuth and Michael Plass in the article <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/spe.4380111102">Breaking paragraphs into lines</a> for the Tex typesetting system. The result looks much better, but the algorithm is much slower.</p>
<p>I will not try to summarize the rest of Damian&rsquo;s lengthly blog, for two reasons: it becomes slightly off-topic compared to the original challenge (which certainly does not mean that it is not interesting), and it would be almost impossible to summarize it anyway without either quoting most of it or losing most of the meat of it. Damian&rsquo;s piece is really interesting and well written, follow <a href="http://blogs.perl.org/users/damian_conway/2019/08/greed-is-good-balance-is-better-beauty-is-best.html">the link</a>. and read it.</p>
<h2 id="see-also">See Also</h2>
<p>See also the following blog posts:</p>
<ul>
<li>Arne Sommer: <a href="https://perl6.eu/word-wrapped-weekends.html">https://perl6.eu/word-wrapped-weekends.html</a></li>
<li>Francis Whittle: <a href="https://rage.powered.ninja/2019/07/29/best-months.html">https://rage.powered.ninja/2019/07/29/best-months.html</a></li>
<li>Jo Christian Oterhals: <a href="https://medium.com/@jcoterhals/perl-6-small-stuff-21-its-a-date-or-learn-from-an-overly-complex-solution-to-a-simple-task-cf469252724f">https://medium.com/@jcoterhals/perl-6-small-stuff-21-its-a-date-or-learn-from-an-overly-complex-solution-to-a-simple-task-cf469252724f</a></li>
<li>Jaldhar H. Vyas: <a href="https://www.braincells.com/perl/2019/08/perl_weekly_challenge_week_19.html">https://www.braincells.com/perl/2019/08/perl_weekly_challenge_week_19.html</a></li>
<li>Roger Bell West: <a href="https://blog.firedrake.org/archive/2019/08/Perl_Weekly_Challenge_19.html">https://blog.firedrake.org/archive/2019/08/Perl_Weekly_Challenge_19.html</a></li>
<li>Damian Conway: <a href="http://blogs.perl.org/users/damian_conway/2019/08/greed-is-good-balance-is-better-beauty-is-best.html">http://blogs.perl.org/users/damian_conway/2019/08/greed-is-good-balance-is-better-beauty-is-best.html</a></li>
</ul>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important.</p>
<p>If you want to participate to the Perl Weekly Challenge, please connect to <a href="https://perlweeklychallenge.org/">this site</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

