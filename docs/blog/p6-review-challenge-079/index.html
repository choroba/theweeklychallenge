<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Andrew Shitov Weekly Review: Challenge - 079"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/p6-review-challenge-079/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Andrew Shitov Weekly Review: Challenge - #079."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Andrew Shitov Weekly Review: Challenge - #079.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/p6-review-challenge-079/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Andrew Shitov Weekly Review: Challenge - 079</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Andrew Shitov Weekly Review: Challenge - 079</h2>
                    <div class="portfolio-meta">
                        <span>Tuesday, Sep 29, 2020</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/p6-review-challenge-079.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:andy@shitov.ru"><img src="/images/blog/Email.svg" height="50" width="50"> Email</a> › Email me (Andrew) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="/images/blog/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="/images/blog/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<hr>
<br>
<p>Welcome to the <strong>Raku Review</strong> for <strong>Week 079</strong> of <strong>The Weekly Challenge!</strong>. For a quick overview, go through the <a href="/blog/perl-weekly-challenge-079/"><strong>original tasks</strong></a> and <a href="/blog/recap-challenge-079/"><strong>recap</strong></a> of the weekly challenge.</p>
<br>
<h2 id="task-1-count-set-bits">Task 1. Count Set Bits</h2>
<p>This week, the participants were solving a variation of the classical problem of counting bits in a range of numbers. There are different approaches ranging from straightforward bit-by-bit testing to using formulae, and we have a variety of solutions submitted.</p>
<h3 id="counting-the-bits">Counting the bits</h3>
<p>The most direct method is to check all the bits in the number and repeat the procedure for all the numbers from <code>1</code> to <code>$N</code>. Here is a possible way to do that that we see in the solution by <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/gugod/raku/ch-1.raku#L10">Kang-min Liu</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    $c <span style="color:#f92672">+=</span> ($n % 2);
    $n div<span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</code></pre></div><p>Another way is to use bitwise operations, as <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/roger-bell-west/raku/ch-1.p6#L16">Roger Bell_West did it</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    $bits <span style="color:#f92672">+=</span> $k <span style="color:#f92672">+&amp;</span> <span style="color:#ae81ff">1</span>;
    $k <span style="color:#f92672">+&gt;=</span> <span style="color:#ae81ff">1</span>;
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/wambash/raku/ch-1.raku#L3">Jan Krnavek used</a> the <a href="https://docs.raku.org/routine/polymod"><code>polymod</code> method</a> to get all the remainders after dividing a number by modulo 2:</p>
<pre><code>1 .. $n
andthen .map: |*.polymod(2 xx *)
andthen .sum
</code></pre>
<h3 id="binary-representation">Binary representation</h3>
<p>In Raku, you can easily convert any number to a string with its binary representation by calling the <code>base</code> method on it: <code>$n.base(2)</code>. Alternatively, you can use a formatting string, for example: <code>$n.fmt('%b')</code>. Having such a string, you can count all <code>1</code>s in it. Again, there is more than one way to do it. Let us briefly look at the examples found in the submitted programs.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/ash/raku/ch-1a.raku#L20">My solution</a> with a regex:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    [<span style="color:#f92672">+</span>] ((<span style="color:#f92672">.</span>base(<span style="color:#ae81ff">2</span>) <span style="color:#f92672">~~</span> m:g<span style="color:#e6db74">/1/</span>)<span style="color:#f92672">.</span>elems <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$n)
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/mark-anderson/raku/ch-1.raku">Mark Anderson</a> with a non-default argument to <code>comb</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$N)<span style="color:#f92672">.</span>map(<span style="color:#f92672">*.</span>base(<span style="color:#ae81ff">2</span>))<span style="color:#f92672">.</span>comb(<span style="color:#e6db74">/1/</span>)<span style="color:#f92672">.</span>elems
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/simon-proctor/raku/ch-1.raku">Simon Proctor</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    [<span style="color:#f92672">+</span>] (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$N)<span style="color:#f92672">.</span>race<span style="color:#f92672">.</span>map( <span style="color:#f92672">*.</span>base(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>comb )<span style="color:#f92672">.</span>flat
</code></pre></div><p>Notice a good idea to use <code>race</code> here, as we can make the computations faster and we don’t care about the order.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/arne-sommer/raku/ch-1.raku">Arne Sommer</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$N)<span style="color:#f92672">.</span>map({ $_<span style="color:#f92672">.</span>fmt(<span style="color:#e6db74">&#39;%b&#39;</span>) })<span style="color:#f92672">&gt;&gt;.</span>comb<span style="color:#f92672">.</span>flat<span style="color:#f92672">.</span>sum
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/colin-crain/raku/ch-1.raku#L69">Colin Crain</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> $tot <span style="color:#f92672">+=</span> <span style="color:#f92672">.</span>base(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>comb<span style="color:#f92672">.</span>sum <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$input;
</code></pre></div><p>Once again, let me point out how easily Raku switches between the string and numeric representations. The topic variable in this <code>for</code> loop is a number which is then converted to a string and is split into separate characters, which then are treated as numbers in the final summation.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/jaldhar-h-vyas/raku/ch-1.p6">Jaldhar H. Vyas</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> $total <span style="color:#f92672">=</span> [<span style="color:#f92672">+</span>] (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $N)<span style="color:#f92672">.</span>map({ sprintf(<span style="color:#e6db74">&#34;%b&#34;</span>, $_) <span style="color:#f92672">~~</span> m:g<span style="color:#e6db74">/ 1 /</span>; });
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/laurent-rosenfeld/raku/ch-1.sh">Laurent Rosenfeld</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    [<span style="color:#f92672">+</span>] map { <span style="color:#f92672">.</span>fmt(<span style="color:#e6db74">&#34;%b&#34;</span>)<span style="color:#f92672">.</span>comb<span style="color:#f92672">.</span>sum }, <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>@<span style="color:#960050;background-color:#1e0010">*</span>ARGS[<span style="color:#ae81ff">0</span>]
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/mohammad-anwar/raku/ch-1.raku">Mohammad S Anwar</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$n)<span style="color:#f92672">.</span>map( <span style="color:#f92672">-&gt;</span> $i { $c <span style="color:#f92672">+=</span> [<span style="color:#f92672">+</span>] $i<span style="color:#f92672">.</span>base(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>comb; });
</code></pre></div><p>A pointy block <code>-&gt; $i { . . . }</code> often helps to introduce a named variable instead of <code>$_</code>, but you can always use a <a href="https://docs.raku.org/language/variables#index-entry-$$CIRCUMFLEX_ACCENT">placeholder variable</a> such as <code>$^n</code>.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/jeongoon/raku/ch-1.raku#L8">Myoungjin Jeon</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    [<span style="color:#f92672">+</span>] (<span style="color:#f92672">.</span>base(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>indices(<span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>elems <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$_[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</code></pre></div><p>All these methods are good for small numbers and for prototyping. You can also use them as a mean to get the test answer if you want to implement a more sophisticated algorithm and check its correctness.</p>
<h3 id="using-formulae-or-observations">Using formulae or observations</h3>
<p>There is a sequence known under its number <a href="https://oeis.org/A000788">A000788</a>: <em>Total number of 1&rsquo;s in binary expansions of 0, &hellip;, n</em>, which is exactly the sequence what we use in this task. Well, except for the final modulo operation. On the website of The OEIS Foundation, you can find quite a few different algorithms, both recursive and not, which give the result without the need to test each and every bit in all the numbers.</p>
<p>You can also notice that in the sequence of numbers, the least significant bit (2<sup>0</sup>) flips every two numbers. The next bit (2<sup>1</sup>) flips every four times, the third bit (2<sup>2</sup>) flips every eight numbers, and so on. I used this fact in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/ash/raku/ch-1.raku">my main solution</a>.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/juliodcs/raku/ch-1.raku#L16">Julio de Castro</a> used the built-in <a href="https://docs.raku.org/routine/msb">method called <code>msb</code></a> for detecting the most significant bit and to count its flips:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">ms</span>-flips(UInt:D \number) returns UInt:D {
        number <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> ?? <span style="color:#ae81ff">1</span> <span style="color:#f92672">!!</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> number<span style="color:#f92672">.</span>msb <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">**</span> (number<span style="color:#f92672">.</span>msb <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    }
</code></pre></div><p>Such programs are much more efficient comparing to those using bare bit testing, but of course, it is not always clear how they achieve the result :-)</p>
<p>Let me show the complete text of the <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/markus-holzer/raku/ch-1.raku">program by Markus Holzer</a> that also uses sigil-less variables to speed it up:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    unit <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>( Int \N );

    my Int \t = 2;
    my Int \r = 0;
    my Int \n = N;

    while n {
        <span style="color:#66d9ef">my</span> Int <span style="color:#f92672">\</span>a <span style="color:#f92672">=</span> t <span style="color:#f92672">+&gt;</span> <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">my</span> Int <span style="color:#f92672">\</span>s <span style="color:#f92672">=</span> N <span style="color:#f92672">+&amp;</span> ( t <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> );
        <span style="color:#66d9ef">my</span> Int <span style="color:#f92672">\</span>d <span style="color:#f92672">=</span> N div t;

        r :<span style="color:#f92672">=</span> r <span style="color:#f92672">+</span>  d <span style="color:#f92672">*</span> a;
        r :<span style="color:#f92672">=</span> r <span style="color:#f92672">+</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> s <span style="color:#f92672">-</span> a <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> s <span style="color:#f92672">&gt;</span> a;
        t :<span style="color:#f92672">=</span> t <span style="color:#f92672">+&lt;</span> <span style="color:#ae81ff">1</span>;
        n :<span style="color:#f92672">=</span> n <span style="color:#f92672">+&gt;</span> <span style="color:#ae81ff">1</span>;
    }

    say r % 1000000007;
</code></pre></div><p>Notice that we do not loop over the whole range between <code>1</code> and <code>N</code> but only over the list of powers of two not exceeding <code>N</code>.</p>
<p>Another interesting solution has been submitted by Athanasius, here is <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/athanasius/raku/ch-1.raku#L140">it’s main part</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> UInt $total<span style="color:#f92672">-</span>count<span style="color:#f92672">-</span>set<span style="color:#f92672">-</span>bit <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

    loop (<span style="color:#66d9ef">my</span> UInt $bit <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $bit <span style="color:#f92672">&lt;=</span> $N; $bit <span style="color:#f92672">+&lt;=</span> <span style="color:#ae81ff">1</span>)
    {
        $total<span style="color:#f92672">-</span>count<span style="color:#f92672">-</span>set<span style="color:#f92672">-</span>bit <span style="color:#f92672">+=</span> ($N <span style="color:#f92672">+&gt;</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+&amp;</span> <span style="color:#f92672">+^</span>($bit <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);

        $total<span style="color:#f92672">-</span>count<span style="color:#f92672">-</span>set<span style="color:#f92672">-</span>bit <span style="color:#f92672">+=</span> ($N <span style="color:#f92672">+&amp;</span> (($bit <span style="color:#f92672">+&lt;</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)) <span style="color:#f92672">-</span> ($bit <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
            <span style="color:#66d9ef">if</span> $N <span style="color:#f92672">+&amp;</span> $bit;
    }
</code></pre></div><p>If you want to explore the different approaches and compare there properties, I would recommend you to examine the file <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/markus-holzer/raku/bench.raku">bench.raku</a> where Markus Holzer collected different implementations.</p>
<h3 id="video-review">Video review</h3>
<p>The full review of Task 1 is available on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aR_pPcU_4f8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps for quick access to the review of each solution.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=75s">01:15</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=283s">04:43</a> - Rakulius</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=393s">06:33</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=452s">07:32</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=426s">07:06</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=638s">10:38</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=688s">11:28</a> - Mohammad S Anwar</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=760s">12:40</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=873s">14:33</a> - Ulrich Rieke</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=980s">16:20</a> - Jaldhar H. Vyas</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1056s">17:36</a> - Kang-min Liu</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1133s">18:53</a> - Roger Bell_West</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1213s">20:13</a> - Jan Krnavek</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1469s">24:29</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1577s">26:17</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1715s">28:35</a> - Julio de Castro</li>
<li><a href="https://www.youtube.com/watch?v=aR_pPcU_4f8&amp;t=1841s">30:41</a> - Myoungjin Jeon</li>
</ul>
<h2 id="task-2-trapped-rain-water">Task 2. Trapped rain water</h2>
<p>The participants showed a number of inventive approaches to the problem. To test the solution, you not only have to work on one of the sample set but also try to create a histogram where one of its sides is open and cannot keep water. For example, <code>2, 1, 4, 1, 2, 2</code>. Some of the submitted solutions print incorrect results for such inputs.</p>
<p>In one of the methods, you scan the histogram along its horizontal coordinate and look left and right to find the smallest wall that is visible from that position. That level is the maximum level that can be filled with water. Now just subtract the height at the current position, and here you are, you know the height of the water pole at this position.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/wambash/raku/ch-2.raku">Jan Krnavek’s solution</a> demonstrates this approach extremely clearly:</p>
<pre><code>sub trapped-rain-water ( +@n ) {
    @n.pairs
    andthen .map: { (@n[0.. .key].max min @n[.key..*].max) - .value }\
    andthen .sum
}
</code></pre>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/mark-anderson/raku/ch-2.raku#L35">Mark Andreson uses regexes</a> to find those unit cells that can keep water.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">while</span> @ints<span style="color:#f92672">.</span>join <span style="color:#f92672">~~</span> m:c($pos)<span style="color:#e6db74">/ (\d)(\d+)(\d) &lt;?{ $0 &gt; $1.comb.all &lt; $2 }&gt; /</span> {
        $sum <span style="color:#f92672">+=</span> (($0, $2)<span style="color:#f92672">.</span>min <span style="color:#e6db74">&lt;&lt;-&gt;</span><span style="color:#f92672">&gt;</span> $1<span style="color:#f92672">.</span>comb)<span style="color:#f92672">.</span>sum;
        $pos <span style="color:#f92672">=</span> $/<span style="color:#f92672">.</span>to <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    }
</code></pre></div><p>Water can be trapped within those areas where there are higher walls on the right and left sides. Using the language of regexes, Mark formulates it in the following way: <code>/ (\d)(\d+)(\d) &lt;?{ $0 &gt; $1.comb.all &lt; $2 }&gt; /</code>. The sequence of brick piles <code>\d+</code> must be surrounded by two walls which are higher than all of the inner blocks: <code>$0 &gt; $1.comb.all &lt; $2</code>. (This solution works for the hights not bigger than 9, but you can probably modify the program to use Unicode one-characters digits such as <code>⑪</code>. Raku is great in its ability to correctly evaluate constructions such as <code>⑪.Int</code>.)</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-079/colin-crain/raku/ch-2.raku#L58">Colin Crain finds</a> the peaks inside the histogram and then computes the free area between them:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">for</span> (@input<span style="color:#f92672">.</span>min<span style="color:#f92672">..</span>@input<span style="color:#f92672">.</span>max)<span style="color:#f92672">.</span>reverse <span style="color:#f92672">-&gt;</span> $level {
        <span style="color:#66d9ef">my</span> @peaks <span style="color:#f92672">=</span> @input<span style="color:#f92672">.</span>keys<span style="color:#f92672">.</span>grep({ @input[$_] <span style="color:#f92672">&gt;=</span> $level });
        $vol <span style="color:#f92672">+=</span> ($_[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">for</span> @peaks<span style="color:#f92672">.</span>rotor(<span style="color:#ae81ff">2</span><span style="color:#f92672">=&gt;-</span><span style="color:#ae81ff">1</span>);

        <span style="color:#f92672">.</span> <span style="color:#f92672">.</span> <span style="color:#f92672">.</span>
    }
</code></pre></div><p>Let me stop here as all the solutions are really interesting this week, and I would have to repeat the whole review from the video below to describe their best features.</p>
<h3 id="video-review-1">Video review</h3>
<p>The full review of Task 2 is available on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1vnhtIiWkjo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps to the reviews of the individual solutions:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=73s">01:13</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=240s">04:00</a> - Jan Krnavek</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=443s">07:23</a> - Kang-min Liu</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=517s">08:37</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=830s">13:50</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=1223s">20:23</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=1920s">32:00</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=2319s">38:39</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=2517s">41:57</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=2816s">46:56</a> - Jaldhar H. Vyas</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=2933s">48:53</a> - Julio de Castro</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=3463s">57:43</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=3586s">59:46</a> - Mohammad S Anwar</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=3757s">01:02:37</a> - Myoungjin Jeon</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=4161s">01:09:21</a> - Roger Bell_West</li>
<li><a href="https://www.youtube.com/watch?v=1vnhtIiWkjo&amp;t=4329s">01:12:09</a> - Ulrich Rieke</li>
</ul>
<br>
<p>If you want to participate in <strong>The Weekly Challenge</strong>, please contact us at <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

