<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge: BLOG: The Weekly Challenge #055"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/weekly-challenge-055/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/blog/weekly-challenge-055.jpg"/>
    <meta property="og:description" content="Blog for the weekly challenge #055."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/blog/weekly-challenge-055.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Blog for the weekly challenge #055.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/weekly-challenge-055/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BLOG: The Weekly Challenge #055</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>BLOG: The Weekly Challenge #055</h2>
                    <div class="portfolio-meta">
                        <span>Sunday, Apr 12, 2020</span>|
                        <span> Tags:
                            Perl, Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/weekly-challenge-055.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <p>The <strong><a href="/blog/perl-weekly-challenge-055">Perl Weekly Challenge - 055</a></strong> was the most difficult week for me ever since I started contributing. Usually I submit my <strong>Perl</strong> and <strong>Raku</strong> by Wednesday but this time, I was working overtime and could only finished by Sunday afternoon. I must confess that I didn&rsquo;t realise it was going to be as this difficult when I came up with the challenge. I am happy that I did it at the end of the day. This time, I submitted <strong>unit test</strong> version of both tasks in <strong>Perl</strong> and <strong>Raku</strong>. I always start with standalone app keeping in mind that this would be re-used in unit test script. I try to get the meaty subroutines drafted first then it just becomes a very thin wrapper around to get both standalone app and unit test script. My initial plan was to use <strong>bit operator</strong> to solve the <strong>Flip Binary</strong> task. Having spent couple of hours fighting, I gave up in the end. Eventually I hacked shamelessly as string to get the job done. I followed the standard pattern and solved the task in <strong>Perl</strong> first then jumped on <strong>Raku</strong>.</p>
<hr>
<hr>
<h1 id="perl">PERL</h1>
<hr>
<hr>
<h2 id="task-1-flip-binary">Task #1: Flip Binary</h2>
<p>Since I already made my mind that I am going to treat it as plain string to keep it simple. I came up with the follow two subroutines <strong>sub flip_binary()</strong> and <strong>sub flipped_binary()</strong>. The <strong>sub flip_binary()</strong> does most of the work on the given binary string. I used good old friend <strong>substr()</strong> to do core task. There are two calls to <strong>substr()</strong>, first to extract a character at the given index and second call to replace the extracted character with its flipped copy. At the end we call <strong>sub flipped_binary()</strong> to return all copy of binary string with maximum <strong>1s</strong>. There is plenty of scope for improvement as far as the <strong>sub flipped_binary()</strong> is concerned. I was running out of time, so decided not to spend too much time on one task.</p>
<hr>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flip_binary</span> {
    <span style="color:#66d9ef">my</span> ($binary_str) <span style="color:#f92672">=</span> @_;

    die <span style="color:#e6db74">&#34;ERROR: Missing binary string.\n&#34;</span>
        <span style="color:#66d9ef">unless</span> defined $binary_str;
    die <span style="color:#e6db74">&#34;ERROR: Invalid binary string [$binary_str].\n&#34;</span>
        <span style="color:#66d9ef">unless</span> ($binary_str <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^[01]+$/</span>);

    <span style="color:#66d9ef">my</span> $result <span style="color:#f92672">=</span> {};
    <span style="color:#66d9ef">my</span> $size <span style="color:#f92672">=</span> length($binary_str);
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $left (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $size) {
        <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $right ($left <span style="color:#f92672">..</span> $size) {
            <span style="color:#66d9ef">my</span> $_binary_str <span style="color:#f92672">=</span> $binary_str;
            <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i ($left <span style="color:#f92672">..</span> $right) {
                <span style="color:#f92672">--</span>$i;
                <span style="color:#66d9ef">my</span> $c <span style="color:#f92672">=</span> substr($_binary_str, $i, <span style="color:#ae81ff">1</span>);
                $c <span style="color:#f92672">=</span> ($c) ? (<span style="color:#ae81ff">0</span>) : (<span style="color:#ae81ff">1</span>);
                substr($_binary_str, $i, <span style="color:#ae81ff">1</span>, $c);
            }
            $result<span style="color:#f92672">-&gt;</span>{ sprintf(<span style="color:#e6db74">&#34;%s (%s,%s)&#34;</span>, $_binary_str, $left, $right) } <span style="color:#f92672">=</span> ($_binary_str <span style="color:#f92672">=~</span> tr<span style="color:#e6db74">/1/</span><span style="color:#ae81ff">1</span><span style="color:#f92672">/</span>);
        }
    }

    <span style="color:#66d9ef">return</span> flipped_binary($result);
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flipped_binary</span> {
    <span style="color:#66d9ef">my</span> ($result) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> $v;
    <span style="color:#66d9ef">my</span> @r;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $k (sort { $result<span style="color:#f92672">-&gt;</span>{$b} <span style="color:#e6db74">&lt;=&gt;</span> $result<span style="color:#f92672">-&gt;</span>{$a} } sort keys %$result) {
        <span style="color:#66d9ef">if</span> (defined $v) {
            <span style="color:#66d9ef">if</span> ($result<span style="color:#f92672">-&gt;</span>{$k} <span style="color:#f92672">==</span> $v) {
                push @r, $k;
            }
        }
        <span style="color:#66d9ef">else</span> {
            $v <span style="color:#f92672">=</span> $result<span style="color:#f92672">-&gt;</span>{$k};
            push @r, $k;
        }
    }

    <span style="color:#66d9ef">return</span> join (<span style="color:#e6db74">&#34; | &#34;</span>, @r);
}
</code></pre></div><p>With help of the above subroutines, it was piece of cake to build a standalone app. Technically it is just 2 lines script.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;

<span style="color:#66d9ef">my</span> $binary_str <span style="color:#f92672">=</span> $ARGV[<span style="color:#ae81ff">0</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">&#34;101&#34;</span>;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$binary_str =&gt; &#34;</span>, flip_binary($binary_str), <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p>Now it is time to get the unit test script. Here also we are going to use the same above subroutines. With the time constraint, I could only have 3 test cases, sufficient enough to test the code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;

<span style="color:#66d9ef">use</span> Test::More;

is (flip_binary(<span style="color:#e6db74">&#34;10001&#34;</span>), <span style="color:#e6db74">&#34;11111 (2,4)&#34;</span>);
is (flip_binary(<span style="color:#e6db74">&#34;10101&#34;</span>), <span style="color:#e6db74">&#34;10111 (4,4) | 11011 (2,4) | 11101 (2,2)&#34;</span>);
is (flip_binary(<span style="color:#e6db74">&#34;00101&#34;</span>), <span style="color:#e6db74">&#34;11011 (1,4) | 11101 (1,2)&#34;</span>);

done_testing;
</code></pre></div><hr>
<h2 id="task-2-wave-array">Task #2: Wave Array</h2>
<hr>
<hr>
<p>The <strong>Wave Array</strong> gave me really hard time. My first impression was it would be cake walk but it turned out to be a nightmare. Like the <strong>Flip Binary</strong> task, here also I came up with two handy subroutines i.e. <strong>sub fetch_wave_arrary()</strong> and <strong>sub is_wave()</strong> to the deal with the meat of the task. Of the two, the <strong>sub is_wave()</strong> does the most work. If you look at the end result, it appears so simple but to get there was very time consuming. The <strong>sub fetch_wave_array()</strong> is responsible to create all possible arrays with the given <strong>$N</strong> and go through each to find out the real wave array. In the end it returns the list of wave arrays.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">fetch_wave_array</span> {
    <span style="color:#66d9ef">my</span> ($N) <span style="color:#f92672">=</span> @_;

    die <span style="color:#e6db74">&#34;ERROR: Invalid array size [$N]\n&#34;</span> <span style="color:#66d9ef">unless</span> ($N <span style="color:#f92672">=~</span><span style="color:#e6db74"> /^\d+$/</span> <span style="color:#f92672">&amp;&amp;</span> $N <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>);

    <span style="color:#66d9ef">my</span> $iter <span style="color:#f92672">=</span> permutations([ <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$N ]);
    <span style="color:#66d9ef">my</span> $wave <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
    <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> $array <span style="color:#f92672">=</span> $iter<span style="color:#f92672">-&gt;</span><span style="color:#66d9ef">next</span>) {
        push @$wave, $array <span style="color:#66d9ef">if</span> is_wave($array);
    }

    <span style="color:#66d9ef">return</span> $wave;
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is_wave</span> {
    <span style="color:#66d9ef">my</span> ($array) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> $is_wave <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#$array) {
        ($i % 2)
        ?
        ($array<span style="color:#f92672">-&gt;</span>[$i] <span style="color:#f92672">&lt;=</span> $array<span style="color:#f92672">-&gt;</span>[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
        :
        ($array<span style="color:#f92672">-&gt;</span>[$i] <span style="color:#f92672">&gt;=</span> $array<span style="color:#f92672">-&gt;</span>[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
        <span style="color:#f92672">and</span> <span style="color:#66d9ef">next</span>;

        $is_wave <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">last</span>;
    }

    <span style="color:#66d9ef">return</span> $is_wave;
}
</code></pre></div><p>Having done the hard work, the standalone app is very light weight script. I used the very handy <strong>CPAN</strong> module <strong><a href="https://metacpan.org/pod/Algorithm::Combinatorics">Algorigthm::Combinatorics</a></strong>. It provides utility function <strong>permutations()</strong> that we used to generate all possible arrays with given set of elements.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;

<span style="color:#66d9ef">use</span> Algorithm::Combinatorics <span style="color:#e6db74">qw(permutations)</span>;

<span style="color:#66d9ef">my</span> $N <span style="color:#f92672">=</span> $ARGV[<span style="color:#ae81ff">0</span>] <span style="color:#e6db74">//</span> <span style="color:#ae81ff">4</span>;

<span style="color:#66d9ef">my</span> $wave <span style="color:#f92672">=</span> fetch_wave_array($N);
map { <span style="color:#66d9ef">print</span> sprintf(<span style="color:#e6db74">&#34;[%s]\n&#34;</span>, join(<span style="color:#e6db74">&#34;,&#34;</span>, @$_)) } @$wave;
</code></pre></div><p>Similarly, unit test script is not far behind standalone app. Using <strong>Test::Deep</strong>, we could compare the data structures quickly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;

<span style="color:#66d9ef">use</span> Test::More;
<span style="color:#66d9ef">use</span> Test::Deep;
<span style="color:#66d9ef">use</span> Algorithm::Combinatorics <span style="color:#e6db74">qw(permutations)</span>;

<span style="color:#66d9ef">my</span> $unit_tests <span style="color:#f92672">=</span> {
    <span style="color:#ae81ff">1</span> <span style="color:#f92672">=&gt;</span> [ [<span style="color:#ae81ff">1</span>] ],
    <span style="color:#ae81ff">2</span> <span style="color:#f92672">=&gt;</span> [ [<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>] ],
    <span style="color:#ae81ff">3</span> <span style="color:#f92672">=&gt;</span> [ [<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>], [<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>] ],
    <span style="color:#ae81ff">4</span> <span style="color:#f92672">=&gt;</span> [ [<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>], [<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>], [<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>] ],
};

<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $size (sort { $a <span style="color:#e6db74">&lt;=&gt;</span> $b } keys %$unit_tests) {
    cmp_deeply(fetch_wave_array($size), $unit_tests<span style="color:#f92672">-&gt;</span>{$size}, <span style="color:#e6db74">&#34;array size $size.&#34;</span>);
}

done_testing;
</code></pre></div><hr>
<hr>
<h1 id="raku">RAKU</h1>
<hr>
<hr>
<h2 id="task-1-flip-binary-1">Task #1: Flip Binary</h2>
<hr>
<p>Talking about <strong>Raku</strong> solutions is always fun and it goes through so much experimentations. Just like <strong>Perl</strong> solutions, I decided to define the core subroutines first i.e. <strong>sub flip-binary(Str)</strong> and <strong>sub flipped-binary(Hash)</strong>. Let me share my fight with <strong>Raku</strong> when working with <strong>sub flip-binary(Str)</strong>. For the first time, I used the method <strong>substr()</strong>. Luckily it is not much different than similar function <strong>substr()</strong> in <strong>Perl</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">   <span style="color:#66d9ef">my</span> $c <span style="color:#f92672">=</span> $_binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>substr($i, <span style="color:#ae81ff">1</span>);
</code></pre></div><p>The actual trouble started when I wanted to replace the character using the same <strong>substr()</strong> in <strong>Raku</strong>. Having looked at official documentation, I was still lost. I decided to throw the question to the friends at the official Twitter handle <code>@PerlWChallenge</code>. Within minutes I had the solution, thanks to <strong>JJ Merelo</strong> and it is called <strong>substr-rw()</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">   $_binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>substr<span style="color:#f92672">-</span>rw($i, <span style="color:#ae81ff">1</span>) <span style="color:#f92672">=</span> $c;
</code></pre></div><p>The big find of this task was the line below. I am told by default <strong>$i</strong> is readonly, so you can&rsquo;t manipulate. In my code below, I wanted to do <strong>&ndash;$i</strong> and I kept getting the error it is readonly. So I asked again friends at the Twitter handle <code>@PerlWChallenge</code> and got the response by <code>Elizabeth Mattijsen @liztormato</code> as below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">   <span style="color:#66d9ef">for</span> $left <span style="color:#f92672">..</span> $right <span style="color:#f92672">-&gt;</span> $i is copy {
</code></pre></div><p>Other than that it was smooth run. Now it was time to return all wave binary strings with maximum <strong>1s</strong>. To do this in <strong>Perl</strong>, I sort the hash, containing binary string with count of <strong>1s</strong>, by values first and then by keys. I wanted to do the same in <strong>Raku</strong> but had no clue how to do it. So once again, I popped the question on the Twitter handle. I didn&rsquo;t have to wait too long for the solution, <code>PawgChamp (@Mrofnet)</code> proposed the magical one-liner like below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">   <span style="color:#66d9ef">for</span> %result<span style="color:#f92672">.</span>sort({ $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>value <span style="color:#e6db74">&lt;=&gt;</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>value <span style="color:#f92672">||</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>key <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>key }) <span style="color:#f92672">-&gt;</span> $pair {
</code></pre></div><p>However, I am still not happy with the quality. For now, it does the job.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flip</span>-binary(Str $binary-str) {

    <span style="color:#66d9ef">my</span> %result;
    <span style="color:#66d9ef">my</span> $size <span style="color:#f92672">=</span> $binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>chars;
    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $size <span style="color:#f92672">-&gt;</span> $left {
        <span style="color:#66d9ef">for</span> $left <span style="color:#f92672">..</span> $size <span style="color:#f92672">-&gt;</span> $right {
            <span style="color:#66d9ef">my</span> $_binary<span style="color:#f92672">-</span>str <span style="color:#f92672">=</span> $binary<span style="color:#f92672">-</span>str;
            <span style="color:#66d9ef">for</span> $left <span style="color:#f92672">..</span> $right <span style="color:#f92672">-&gt;</span> $i is copy {
                <span style="color:#f92672">--</span>$i;
                <span style="color:#66d9ef">my</span> $c <span style="color:#f92672">=</span> $_binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>substr($i, <span style="color:#ae81ff">1</span>);
                $c <span style="color:#f92672">=</span> ($c <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;1&#34;</span>) ?? (<span style="color:#ae81ff">0</span>) <span style="color:#f92672">!!</span> (<span style="color:#ae81ff">1</span>);
                $_binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>substr<span style="color:#f92672">-</span>rw($i, <span style="color:#ae81ff">1</span>) <span style="color:#f92672">=</span> $c;
            }

            <span style="color:#66d9ef">my</span> $k <span style="color:#f92672">=</span> sprintf(<span style="color:#e6db74">&#34;%s (%s,%s)&#34;</span>, $_binary<span style="color:#f92672">-</span>str, $left, $right);
            <span style="color:#66d9ef">my</span> $v <span style="color:#f92672">=</span> $_binary<span style="color:#f92672">-</span>str<span style="color:#f92672">.</span>comb(<span style="color:#e6db74">&#34;1&#34;</span>)<span style="color:#f92672">.</span>elems;
            %result{$k} <span style="color:#f92672">=</span> $v;
        }
    }

    <span style="color:#66d9ef">return</span> flipped<span style="color:#f92672">-</span>binary(%result);
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flipped</span>-binary(%result) {

    <span style="color:#66d9ef">my</span> Int $value;
    <span style="color:#66d9ef">my</span> @r;
    <span style="color:#66d9ef">for</span> %result<span style="color:#f92672">.</span>sort({ $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>value <span style="color:#e6db74">&lt;=&gt;</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>value <span style="color:#f92672">||</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>key <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>key }) <span style="color:#f92672">-&gt;</span> $pair {

        <span style="color:#66d9ef">my</span> $_k <span style="color:#f92672">=</span> $pair<span style="color:#f92672">.</span>keys;
        <span style="color:#66d9ef">my</span> $_v <span style="color:#f92672">=</span> $pair<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>Str<span style="color:#f92672">.</span>Int;

        <span style="color:#66d9ef">if</span> defined $value {
            <span style="color:#66d9ef">if</span> $_v <span style="color:#f92672">==</span> $value {
                push @r, $_k;
            }
        }
        <span style="color:#66d9ef">else</span> {
            $value <span style="color:#f92672">=</span> $_v;
            push @r, $_k;
        }
    }

    <span style="color:#66d9ef">return</span> @r<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34; | &#34;</span>);
}
</code></pre></div><p>Having done the handy subroutines, it is time to create standalone app. For the first time, I am using <strong>multi</strong> operator with <strong>MAIN()</strong>. Having seen how others have used it to get the <strong>Usage</strong> bit generated. It is so easy with the power of <strong>Raku</strong> as you can seen below. The <strong>MAIN()</strong> also handles the data validation without any extra effort.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#75715e">#!/usr/bin/env perl6</span>

<span style="color:#66d9ef">use</span> v6<span style="color:#f92672">.</span>c;

multi <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>(*@) is hidden-from-USAGE {
    say $<span style="color:#960050;background-color:#1e0010">*</span>USAGE;
    say <span style="color:#e6db74">&#34;\nERROR: Invalid binary string !!!&#34;</span>;
}

multi <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>(Str :$binary-str where { <span style="color:#e6db74">m/^ &lt;[01]&gt;+ $/</span> }) {
    say ($binary<span style="color:#f92672">-</span>str, flip<span style="color:#f92672">-</span>binary($binary<span style="color:#f92672">-</span>str))<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34; =&gt; &#34;</span>);
}
</code></pre></div><p>Lets do unit test script in <strong>Raku</strong>, it turned to be one-liner and nothing much to talk about.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#75715e">#!/usr/bin/env perl6</span>

<span style="color:#66d9ef">use</span> Test;

<span style="color:#66d9ef">my</span> $unit<span style="color:#f92672">-</span>tests <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;10001&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;11111 (2,4)&#34;</span>,
    <span style="color:#e6db74">&#34;10101&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;10111 (4,4) | 11011 (2,4) | 11101 (2,2)&#34;</span>,
    <span style="color:#e6db74">&#34;00101&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;11011 (1,4) | 11101 (1,2)&#34;</span>
};

is(flip<span style="color:#f92672">-</span>binary($_), $unit<span style="color:#f92672">-</span>tests{$_}, <span style="color:#e6db74">&#34;Tesing binary $_&#34;</span>) <span style="color:#66d9ef">for</span> $unit<span style="color:#f92672">-</span>tests<span style="color:#f92672">.</span>keys;

done<span style="color:#f92672">-</span>testing;
</code></pre></div><hr>
<h2 id="task-2-wave-array-1">Task #2: Wave Array</h2>
<hr>
<p>For the <strong>Wave Array</strong> task, I created two subroutines i.e. <strong>sub fetch-wave-array(Int)</strong> and <strong>sub is-wave(Array)</strong>. For the <strong>sub is-wave(Array)</strong>, I was looking for <strong>Raku</strong> code for <strong>$i % 2 == 1</strong> as in <strong>Perl</strong>. I didn&rsquo;t have struggle much for this and found this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">   ($i mod <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</code></pre></div><p>Rest of the code are below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">fetch</span>-wave-array($size) {
    die <span style="color:#e6db74">&#34;ERROR: Invalid array size [$size]\n&#34;</span>
        <span style="color:#66d9ef">unless</span> ($size <span style="color:#f92672">~~</span> <span style="color:#e6db74">/^\d+$/</span> <span style="color:#f92672">&amp;&amp;</span> $size <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>);

    <span style="color:#66d9ef">my</span> @N <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $size)<span style="color:#f92672">.</span>permutations();
    <span style="color:#66d9ef">my</span> @wave <span style="color:#f92672">=</span> ();
    <span style="color:#66d9ef">for</span> @N <span style="color:#f92672">-&gt;</span> @array {
        push @wave, @array <span style="color:#66d9ef">if</span> is<span style="color:#f92672">-</span>wave(@array);
    }

    <span style="color:#66d9ef">return</span> @wave;
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is</span>-wave(@array) {

    <span style="color:#66d9ef">my</span> $is<span style="color:#f92672">-</span>wave <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> @array<span style="color:#f92672">.</span>elems<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">-&gt;</span> $i {
        ($i mod <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
        ??
        (@array[$i] <span style="color:#f92672">&lt;=</span> @array[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
        <span style="color:#f92672">!!</span>
        (@array[$i] <span style="color:#f92672">&gt;=</span> @array[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
        <span style="color:#f92672">and</span> <span style="color:#66d9ef">next</span>;

        $is<span style="color:#f92672">-</span>wave <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">last</span>;
    }

    <span style="color:#66d9ef">return</span> $is<span style="color:#f92672">-</span>wave;
}
</code></pre></div><p>Time to do standarlone app for <strong>Wave Array</strong> task. It doesn&rsquo;t warrant any explanation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#75715e">#!/usr/bin/env perl6</span>

<span style="color:#66d9ef">use</span> v6<span style="color:#f92672">.</span>c;

multi <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>(*@) is hidden-from-USAGE {
    say $<span style="color:#960050;background-color:#1e0010">*</span>USAGE;
    say <span style="color:#e6db74">&#34;\nERROR: Invalid array size !!!&#34;</span>;
}

multi <span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>(Int :$N = 4) {
    <span style="color:#66d9ef">my</span> @wave <span style="color:#f92672">=</span> fetch<span style="color:#f92672">-</span>wave<span style="color:#f92672">-</span>array($N);
    @wave<span style="color:#f92672">.</span>map({ <span style="color:#66d9ef">print</span> sprintf(<span style="color:#e6db74">&#34;[%s]\n&#34;</span>, join(<span style="color:#e6db74">&#34;,&#34;</span>, @$_)) });
}
</code></pre></div><p>Same goes for unit test script. Did you notice the expected the results in the <strong>$unit-tests</strong>. I tried really hard to match with <strong>[ [1] ]</strong> but for some strange reason beyond my knowledge, it expects it to be <strong>[ (1,), ]</strong>. It is plain ugly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#75715e">#!/usr/bin/env perl6</span>

<span style="color:#66d9ef">use</span> Test;

<span style="color:#66d9ef">my</span> $unit<span style="color:#f92672">-</span>tests <span style="color:#f92672">=</span> :{
    <span style="color:#ae81ff">1</span> <span style="color:#f92672">=&gt;</span> [ (<span style="color:#ae81ff">1</span>,), ],
    <span style="color:#ae81ff">2</span> <span style="color:#f92672">=&gt;</span> [ (<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>), ],
    <span style="color:#ae81ff">3</span> <span style="color:#f92672">=&gt;</span> [ (<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>), (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>) ],
    <span style="color:#ae81ff">4</span> <span style="color:#f92672">=&gt;</span> [ (<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>), (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>), (<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>), (<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>) ]
};

<span style="color:#66d9ef">for</span> $unit<span style="color:#f92672">-</span>tests<span style="color:#f92672">.</span>keys<span style="color:#f92672">.</span>sort <span style="color:#f92672">-&gt;</span> $size {
    is<span style="color:#f92672">-</span>deeply(fetch<span style="color:#f92672">-</span>wave<span style="color:#f92672">-</span>array($size), $unit<span style="color:#f92672">-</span>tests{$size}, <span style="color:#e6db74">&#34;array size $size&#34;</span>);
}

done<span style="color:#f92672">-</span>testing;
</code></pre></div><p>That&rsquo;s it for this week. Speak to you soon.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

