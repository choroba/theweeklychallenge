<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #042.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 042</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 042</h2>
                    <div class="portfolio-meta">
                        <span>Monday, Jan 20, 2020</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/p6-review-challenge-042.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="task-1-octal-numbers">Task #1: Octal Numbers</h2>
<p>This is derived in part from my <a href="http://blogs.perl.org/users/laurent_r/2020/01/perl-weekly-challenge-42-octal-numbers-and-balanced-parentheses.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-042/">Week 42 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Write a script to print decimal number 0 to 50 in Octal Number System.</em></p>
<p><em>For example:</em></p>
<pre><code>Decimal 0 = Octal 0
Decimal 1 = Octal 1
Decimal 2 = Octal 2
[ ... ]
</code></pre>
<h2 id="my-solution">My solution</h2>
<p>Raku has a <a href="https://docs.raku.org/routine/base">base</a> method to convert a number into a string representation in any base between 2 and 36.</p>
<p>With this, it is so easy that we can use a one-liner:</p>
<pre><code>$ perl6 -e 'say &quot;Decimal: $_ \t=  Octal &quot;, .base(8) for 0..50;'
Decimal: 0      =  Octal 0
Decimal: 1      =  Octal 1
Decimal: 2      =  Octal 2
Decimal: 3      =  Octal 3
Decimal: 4      =  Octal 4
Decimal: 5      =  Octal 5
Decimal: 6      =  Octal 6
Decimal: 7      =  Octal 7
Decimal: 8      =  Octal 10
Decimal: 9      =  Octal 11
[ ... Lines omitted for brevity ... ]
Decimal: 45     =  Octal 55
Decimal: 46     =  Octal 56
Decimal: 47     =  Octal 57
Decimal: 48     =  Octal 60
Decimal: 49     =  Octal 61
Decimal: 50     =  Octal 62
</code></pre>
<h2 id="alternative-solutions">Alternative Solutions</h2>
<h3 id="using-the-basemethod">Using the <code>base</code>method</h3>
<p>Many challengers used the same <a href="https://docs.raku.org/routine/base">base</a> method as I did, as follows:</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/arne-sommer/raku/ch-1.p6">Arne Sommer</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">say <span style="color:#e6db74">&#34;Decimal $_ = Octal { $_.base(8) }&#34;</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span><span style="color:#ae81ff">51</span>;
</code></pre></div><p>[Daniel Mita]&lsquo;<a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/daniel-mita/raku/ch-1.sh">https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/daniel-mita/raku/ch-1.sh</a>) did it in the form of a one-liner:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">raku <span style="color:#f92672">-</span>e <span style="color:#e6db74">&#39;.base(8).say for ^51&#39;</span>
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/markus-holzer/raku/ch-1.p6">Markus Holzer</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#f92672">.</span>base(<span style="color:#ae81ff">8</span>)<span style="color:#f92672">.</span>say <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span><span style="color:#ae81ff">51</span>
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/simon-proctor/raku/ch-1.p6">Simon Proctor</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">for</span> $start<span style="color:#f92672">-</span>val<span style="color:#f92672">..</span>$end<span style="color:#f92672">-</span>val <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">\</span>val {
    say <span style="color:#e6db74">&#34;Decimal {val} = Octal {val.base(8)}&#34;</span>;
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/ulrich-rieke/raku/ch-1.p6">Ulrich Rieke</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">50</span>) <span style="color:#f92672">-&gt;</span> $i {
  say <span style="color:#e6db74">&#34;Decimal $i = Octal &#34;</span> <span style="color:#f92672">~</span> $i<span style="color:#f92672">.</span>base(<span style="color:#ae81ff">8</span>)<span style="color:#f92672">.</span>Str ;
}
</code></pre></div><h3 id="using-a-format-string">Using a Format String</h3>
<p>Many other challengers used the <code>%o</code> option of the <code>printf</code>, <code>sprintf</code>, and <code>fmt</code> routines (which I also used in my Perl 5 solution):</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/burkhard-nickels/raku/ch-1.p6">Burkhard Nickels</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">50</span>) {
    printf(<span style="color:#e6db74">&#34;Decimal: %d - Octal: %o\n&#34;</span>,$_,$_);
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/noud/raku/ch-1.p6">Noud Aldenhoven</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">say $_<span style="color:#f92672">.</span>fmt(<span style="color:#e6db74">&#34;Decimal $_ = Octal %o&#34;</span>) <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span><span style="color:#ae81ff">51</span>;
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/jaldhar-h-vyas/raku/ch-1.sh">Jaldhar H. Vyas</a> came back to the challenge after a pause. Welcome back, Jaldhar. He wrote a Raku one-liner along the same lines:</p>
<pre><code>perl6 -e '[0 .. 50].map({ printf(&quot;Decimal %d = Octal %o\n&quot;, $_, $_) });'
</code></pre>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/javier-luque/raku/ch-1.p6">Javier Luque</a> used a format string (<code>%o</code>option) to do the job:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">to</span>-octal(Int $i) {
    <span style="color:#66d9ef">return</span> sprintf(<span style="color:#e6db74">&#39;%o&#39;</span>, $i);
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/roger-bell-west/raku/ch-1.p6">Roger Bell West</a> also used a format string:</p>
<p>for (0..50) {
printf(&lsquo;Decimal %d = Octal %o&rsquo; ~ &ldquo;\n&rdquo;,$_,$_);
}</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/ryan-thompson/raku/ch-1.p6">Ryan Thompson</a> also used a format string:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">say (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">50</span>)<span style="color:#f92672">.</span>fmt(<span style="color:#e6db74">&#39;Decimal %1$2d = Octal %2o&#39;</span>, <span style="color:#e6db74">&#34;\n&#34;</span>);
</code></pre></div><h3 id="doing-it-the-hard-way">Doing it the Hard Way</h3>
<p>Two challengers decided to implement a full conversion algorithm:</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/kevin-colyer/raku/ch-1.p6">Kevin Colyer</a> knows that there are easier ways to do it, but decided to roll his own version, perhaps for the fun of the exercise. He did it in the old assembly language (or C hacker) way:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">dec</span>-to-oct(Int $n is copy) returns Str {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#66d9ef">if</span> $n<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">my</span> Str $o <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">while</span> $n<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span> {
        $o<span style="color:#f92672">=</span> $n <span style="color:#f92672">+&amp;</span> <span style="color:#ae81ff">7</span> <span style="color:#f92672">~</span> $o; <span style="color:#75715e"># add lower three bits</span>
        $n<span style="color:#f92672">=</span> $n <span style="color:#f92672">+&gt;</span> <span style="color:#ae81ff">3</span>     ; <span style="color:#75715e"># shift off lower three bits</span>
    }
    <span style="color:#66d9ef">return</span> $o;
}

say <span style="color:#e6db74">&#34;Decimal $_ = Octal {dec-to-oct($_)} is sprintf conversion {sprintf &#34;</span>%o<span style="color:#e6db74">&#34;, $_}&#34;</span> <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span><span style="color:#ae81ff">51</span>;
</code></pre></div><p>Just in case you don&rsquo;t know or don&rsquo;t remember (I didn&rsquo;t and had to look it up), <code>+&amp;</code> is the numeric bitwise <code>AND</code> operator, and <code>+&gt;</code> is the integer bit shift to the right.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/colin-crain/raku/ch-1.p6">Colin Crain</a> used the standard CS integer division and remainder to compute octal numbers. Even though this is not required in the task, Colin even expanded the definition domain to Z (inclluding negative integers):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span> () {

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">50</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">50</span> {
        printf <span style="color:#e6db74">&#34;Decimal %3d = Octal %3d\n&#34;</span>, $_, octal($_) ;
    }
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">octal</span> ( $dec is copy ){
    <span style="color:#66d9ef">my</span> $out <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">my</span> $sign <span style="color:#f92672">=</span> $dec <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> ?? <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;&#34;</span>;
    $dec <span style="color:#f92672">.=</span> abs;
    <span style="color:#66d9ef">my</span> $rem;
    <span style="color:#66d9ef">while</span> ( $dec <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ) {
        $rem <span style="color:#f92672">=</span> $dec % 8;
        $dec <span style="color:#f92672">=</span> ($dec<span style="color:#f92672">/</span><span style="color:#ae81ff">8</span>)<span style="color:#f92672">.</span>floor;
        $out <span style="color:#f92672">=</span> $rem <span style="color:#f92672">~</span> $out;
    }
    $out <span style="color:#f92672">=</span> $sign <span style="color:#f92672">~</span> $out;
    <span style="color:#66d9ef">return</span> $out ?? $out <span style="color:#f92672">!!</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">## needs to output 0 for 0</span>
}
</code></pre></div><p>Colin provides a long comment explaining his algorithm, please follow the link if you want further explanations.</p>
<hr>
<h2 id="task-2-balanced-parentheses">Task #2: Balanced Parentheses</h2>
<hr>
<p>This is derived in part from my <a href="http://blogs.perl.org/users/laurent_r/2020/01/perl-weekly-challenge-42-octal-numbers-and-balanced-parentheses.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-042/">Week 42 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Write a script to generate a string with random number of ( and ) brackets. Then make the script validate the string if it has balanced brackets.</em></p>
<p><em>For example:</em></p>
<pre><code>() - OK
(()) - OK
)( - NOT OK
())() - NOT OK
</code></pre>
<p>Well, I have a slight problem with this task requirement. A script generating a random number of random brackets will almost never generate balanced brackets, except when the maximal number of brackets is really small (say 2 or 4). So, I changed the task to writing a script that checks that strings passed to it have properly balanced parentheses.</p>
<h2 id="my-solutions">My Solutions</h2>
<h3 id="balanced-parentheses-using-a-grammar">Balanced Parentheses Using a Grammar</h3>
<p>I admit that this may be slight technological overkill, but seeing such a task leads me immediately to use grammars, which are naturally capable to manage such tasks, since their rules can easily be called recursively to parse any number of nested parentheses. So, this is my first solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">use</span> v6;

grammar Parens {
    token TOP { <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> <span style="color:#e6db74">&lt;paren-expr&gt;</span><span style="color:#f92672">+</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> }
    token paren<span style="color:#f92672">-</span>expr { <span style="color:#f92672">|</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> <span style="color:#e6db74">&lt;paren-pair&gt;</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span>
                       <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> <span style="color:#e6db74">&lt;paren-expr&gt;</span><span style="color:#f92672">+</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> <span style="color:#e6db74">&#39;)&#39;</span> }
    token paren<span style="color:#f92672">-</span>pair { [ <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#f92672">\</span>s<span style="color:#f92672">*</span> <span style="color:#e6db74">&#39;)&#39;</span> ]<span style="color:#f92672">+</span> }
}

<span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#34;()&#34;</span>, <span style="color:#e6db74">&#34;(  )&#34;</span>, <span style="color:#e6db74">&#34;(())&#34;</span>, <span style="color:#e6db74">&#34;( ( ))&#34;</span>, <span style="color:#e6db74">&#34;)(&#34;</span>, <span style="color:#e6db74">&#34;())()&#34;</span>,
    <span style="color:#e6db74">&#34;((( ( ()))))&#34;</span>,  <span style="color:#e6db74">&#34;()()()()&#34;</span>, <span style="color:#e6db74">&#34;(())(())&#34;</span> <span style="color:#f92672">-&gt;</span> $expr {
    say <span style="color:#e6db74">&#34;$expr - &#34;</span>, Parens<span style="color:#f92672">.</span>parse($expr) ?? <span style="color:#e6db74">&#34;OK&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;NOT OK&#34;</span>;
}
</code></pre></div><p>The <code>TOP</code> token is any strictly positive number of <code>paren-expr</code>. A <code>paren-expr</code> is either a <code>paren-pair</code> or an opening parenthesis, followed by, recursively, another <code>paren-expr</code>, followed by a closing parenthesis. Note that this could most probably have been made simpler (only two tokens instead of three) if we had decided to remove all spaces of the string before parsing.</p>
<p>This script displays the following output:</p>
<pre><code>$ perl6 parens.p6
() - OK
(  ) - OK
(()) - OK
( ( )) - OK
)( - NOT OK
())() - NOT OK
((( ( ())))) - OK
()()()() - OK
(())(()) - OK
</code></pre>
<h3 id="balanced-parentheses-using-a-stack">Balanced Parentheses Using a Stack</h3>
<p>As I said, using grammars for such a simple task might be considered over-engineering. We had recently a challenge about reverse Polish notation that led us to use a stack. Recursion and stacks are intimately related. We could use a stack to perform the same task: push to the stack if we get a <code>(</code>, and pop from the stack if we get a <code>)</code>, unless the stack is empty; and, at the end, check that the stack is empty. Some people might think that this approach is conceptually simpler than a grammar. But I tend to think this is wrong. Except for a small typo, my grammar approach worked the first time I tested it. Not only is the stack code below significantly longer, but I had to debug the stack approach below for about 15 minutes before it got right:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">use</span> v6;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">check</span>-parens (Str $expr) {
    <span style="color:#66d9ef">my</span> @stack;
    <span style="color:#66d9ef">my</span> $s <span style="color:#f92672">=</span> $expr;
    $s <span style="color:#f92672">~~</span> s:g<span style="color:#e6db74">/\s+/</span><span style="color:#f92672">/</span>; <span style="color:#75715e"># remove spaces;</span>
    <span style="color:#66d9ef">for</span> $s<span style="color:#f92672">.</span>comb {
        when <span style="color:#e6db74">&#39;(&#39;</span> { push @stack, $_; }
        when <span style="color:#e6db74">&#39;)&#39;</span> {
            say <span style="color:#e6db74">&#34;$expr: NOT OK&#34;</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">unless</span> @stack;
            pop @stack;
        }
        default { say $s }
    }
    say <span style="color:#e6db74">&#34;$expr: &#34;</span>, @stack<span style="color:#f92672">.</span>elems ?? <span style="color:#e6db74">&#34;NOT OK&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;OK&#34;</span>;
}
<span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#34;()&#34;</span>, <span style="color:#e6db74">&#34;(  )&#34;</span>, <span style="color:#e6db74">&#34;(())&#34;</span>, <span style="color:#e6db74">&#34;( ( ))&#34;</span>, <span style="color:#e6db74">&#34;)(&#34;</span>, <span style="color:#e6db74">&#34;())()&#34;</span>,
    <span style="color:#e6db74">&#34;((( ( ()))))&#34;</span>,  <span style="color:#e6db74">&#34;()()()()&#34;</span>, <span style="color:#e6db74">&#34;(())(())&#34;</span> {
        check<span style="color:#f92672">-</span>parens($_)
}
</code></pre></div><p>This is the output:</p>
<pre><code>$ perl6 parens.p6
(): OK
(  ): OK
(()): OK
( ( )): OK
)(: NOT OK
())(): NOT OK
((( ( ())))): OK
()()()(): OK
(())(()): OK
</code></pre>
<h3 id="replacing-the-stack-by-a-counter">Replacing the Stack by a Counter</h3>
<p>In fact, we don&rsquo;t really need a stack, as we can use a simple counter starting at 0, which we increment when we get an opening parenthesis, and decrement when we get a closing parenthesis. If we get a closing parenthesis when the counter is 0, or if the counter is not 0 at the end of the parsing, then the parens are not properly balanced. The <code>check-parens</code> subroutine is rewritten as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">check</span>-parens (Str $expr) {
    <span style="color:#66d9ef">my</span> $count;
    <span style="color:#66d9ef">my</span> $s <span style="color:#f92672">=</span> $expr;
    $s <span style="color:#f92672">~~</span> s:g<span style="color:#e6db74">/\s+/</span><span style="color:#f92672">/</span>; <span style="color:#75715e"># remove spaces;</span>
    <span style="color:#66d9ef">for</span> $s<span style="color:#f92672">.</span>comb {
        when <span style="color:#e6db74">&#39;(&#39;</span> { $count<span style="color:#f92672">++</span> }
        when <span style="color:#e6db74">&#39;)&#39;</span> {
            say <span style="color:#e6db74">&#34;$expr: NOT OK&#34;</span> <span style="color:#f92672">and</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">unless</span> $count;
            $count<span style="color:#f92672">--</span>;
        }
        default { say $s }
    }
    say <span style="color:#e6db74">&#34;$expr: &#34;</span>, $count ?? <span style="color:#e6db74">&#34;NOT OK&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;OK&#34;</span>;
}
</code></pre></div><p>The output is the same as before.</p>
<h2 id="alternative-solutions-1">Alternative Solutions</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/arne-sommer/raku/ch-2.p6">Arne Sommer</a> suggested a solution in which the most important element is a counter that is incremented for an opening parenthesis and decremented for a closing parenthesis, much along the idea of my last solution above:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is</span>-balanced ($brackets)
{
  <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $brackets<span style="color:#f92672">.</span>chars % 2; <span style="color:#75715e"># An odd number</span>
  <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $brackets<span style="color:#f92672">.</span>substr(<span style="color:#ae81ff">0</span>,  <span style="color:#ae81ff">1</span>) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;)&#39;</span>;
  <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $brackets<span style="color:#f92672">.</span>substr(<span style="color:#f92672">*-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;(&#39;</span>;

  <span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

  <span style="color:#66d9ef">for</span> $brackets<span style="color:#f92672">.</span>comb <span style="color:#f92672">-&gt;</span> $char
  {
    <span style="color:#66d9ef">if</span>    $char <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;(&#39;</span> { $count<span style="color:#f92672">++</span>; }
    <span style="color:#66d9ef">elsif</span> $char <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;)&#39;</span> { $count<span style="color:#f92672">--</span>; }
    <span style="color:#66d9ef">else</span> { die <span style="color:#e6db74">&#34;Illegal character $char&#34;</span>; }

    <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $count <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e"># Unbalanced inside</span>
  }

  <span style="color:#66d9ef">return</span> $count <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/daniel-mita/raku/ch-2.p6">Daniel Mita</a> used a counter much in the same way as my last solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

<span style="color:#66d9ef">for</span> roll <span style="color:#f92672">&lt;</span>( )<span style="color:#f92672">&gt;</span>: (<span style="color:#f92672">^</span>$parens)<span style="color:#f92672">.</span>pick {
  <span style="color:#f92672">.</span>say;
  when <span style="color:#e6db74">&#39;(&#39;</span> { $count<span style="color:#f92672">++</span> }
  when <span style="color:#e6db74">&#39;)&#39;</span> { die <span style="color:#e6db74">&#39;close before open&#39;</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">--</span>$count <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> }
}

<span style="color:#66d9ef">if</span> $count {
  die <span style="color:#e6db74">&#34;$count unclosed&#34;</span>;
}

<span style="color:#e6db74">&#39;balanced&#39;</span><span style="color:#f92672">.</span>say;
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/kevin-colyer/raku/ch-2.p6">Kevin Colyer</a> also used a counter (<code>$open</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">match</span>-brackets(Str $t) {
    <span style="color:#75715e"># can never match condition</span>
    <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $t<span style="color:#f92672">.</span>chars <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>;

    <span style="color:#75715e"># loop counting +1 for open -1 for close.</span>

    <span style="color:#75715e"># zero sum is matching</span>
    <span style="color:#75715e"># positive sum is non matching</span>
    <span style="color:#75715e"># negative is always non matching (and quick exit)</span>
    <span style="color:#66d9ef">my</span> $open<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$t<span style="color:#f92672">.</span>chars <span style="color:#f92672">-&gt;</span> $i {
        $open<span style="color:#f92672">++</span> <span style="color:#66d9ef">if</span> $t<span style="color:#f92672">.</span>substr($i,<span style="color:#ae81ff">1</span>) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;(&#39;</span>;
        $open<span style="color:#f92672">--</span> <span style="color:#66d9ef">if</span> $t<span style="color:#f92672">.</span>substr($i,<span style="color:#ae81ff">1</span>) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;)&#39;</span>;
        <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $open <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>;
    }
    <span style="color:#66d9ef">return</span> $open <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ?? True <span style="color:#f92672">!!</span> False ;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/noud/raku/ch-2.p6">Noud Aldenhoven</a> also used a counter:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced</span>($brackets) {
    <span style="color:#66d9ef">my</span> $c <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> $brackets<span style="color:#f92672">.</span>comb() <span style="color:#f92672">-&gt;</span> $b {
        <span style="color:#66d9ef">if</span> ($b <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;(&#39;</span>) {
            $c<span style="color:#f92672">++</span>;
        } <span style="color:#66d9ef">elsif</span> (<span style="color:#f92672">--</span>$c <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">return</span> False;
        }
    }
    <span style="color:#66d9ef">return</span> $c <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/simon-proctor/raku/ch-2.p6">Simon Proctor</a> also used a counter:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced</span>( Str \brackets ) {
    <span style="color:#66d9ef">my</span> @list <span style="color:#f92672">=</span> brackets<span style="color:#f92672">.</span>comb(<span style="color:#e6db74">&#34;&#34;</span>);
    <span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> @list <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">\</span>bracket {
        given bracket {
            when <span style="color:#e6db74">&#34;(&#34;</span> {
                $count<span style="color:#f92672">++</span>;
            }
            when <span style="color:#e6db74">&#34;)&#34;</span> {
                $count<span style="color:#f92672">--</span>;
            }
        }
        <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> $count <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>;
    }
    <span style="color:#66d9ef">return</span> $count <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/ulrich-rieke/raku/ch-2.p6">Ulrich Rieke</a> implemented two separate counters:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">validateBrackets</span>( Str $term --&gt; Bool) {
  <span style="color:#66d9ef">if</span> ( $term <span style="color:#f92672">~~</span> <span style="color:#e6db74">/^ &#39;)&#39; | &#39;(&#39; $/</span> ) {
      <span style="color:#66d9ef">return</span> False ;
  }
  <span style="color:#66d9ef">return</span> countLetter( $term , <span style="color:#e6db74">&#39;(&#39;</span>) <span style="color:#f92672">==</span> countLetter( $term , <span style="color:#e6db74">&#39;)&#39;</span>) ;
}
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">countLetter</span>( Str $term , Str $letter --&gt; Int) {
  <span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> ;
  <span style="color:#66d9ef">for</span> ( $term<span style="color:#f92672">.</span>comb) <span style="color:#f92672">-&gt;</span> $let {
      <span style="color:#66d9ef">if</span> ( $let <span style="color:#f92672">eq</span> $letter ) {
    $count<span style="color:#f92672">++</span> ;
      }
  }
  <span style="color:#66d9ef">return</span> $count ;
}
</code></pre></div><p>I&rsquo;m afraid Ulrich&rsquo;s code returns the wrong answer for some input strings. For example, it appears it would validate a string such as <code>&quot;())(()&quot;</code>, where as it is improperly balanced (even though it has the same number of opening and closing parentheses), as it starts with one opening parenthesis, followed by two closing parentheses, so that the second closing parentheses has no matching opening parenthesis <em>prior to</em> it..</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/markus-holzer/raku/ch-2.p6">Markus Holzer</a> didn&rsquo;t quite use a grammar, but nonetheless used the grammar main building blocks, named rules (in this case, more precisely, tokens), to solve the problem:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">test</span>-string( $string )
{
    <span style="color:#66d9ef">my</span> token opening<span style="color:#f92672">-</span>brace { <span style="color:#f92672">\</span>( };
    <span style="color:#66d9ef">my</span> token closing<span style="color:#f92672">-</span>brace { <span style="color:#f92672">\</span>) };
    <span style="color:#66d9ef">my</span> token balanced<span style="color:#f92672">-</span>braces {
        ( <span style="color:#e6db74">&lt;opening-brace&gt;</span><span style="color:#f92672">+</span> ) <span style="color:#e6db74">&lt;closing-brace&gt;</span> <span style="color:#f92672">**</span> { $0<span style="color:#f92672">.</span>chars }
    };
    so $string <span style="color:#f92672">~~</span> <span style="color:#e6db74">/^ &lt;balanced-braces&gt; $/</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/burkhard-nickels/raku/ch-2.p6">Burhhard Nickels</a> used a recursive <code>balanced_brackets</code> subroutine that removes a <code>()</code> pair each time it is called. When all such pairs have been removed (it is no longer found), then we know that the initial string was a properly balanced if there is no opening or closing parenthesis found. Phew, it took me a few minutes to understand the logic of his algorithm (essentially because I had originally missed that the found parentheses pairs are removed from the string and thought that they were just being matched).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced_brackets</span> ($arg) {
    <span style="color:#66d9ef">my</span> $str <span style="color:#f92672">=</span> $arg;  <span style="color:#75715e"># Cannot assign to a read-only.</span>
    <span style="color:#66d9ef">my</span> $found <span style="color:#f92672">=</span> ($str <span style="color:#f92672">~~</span> <span style="color:#e6db74">s/\(\)//</span>);
    <span style="color:#66d9ef">my</span> $ok;
    <span style="color:#66d9ef">if</span> ($found) {
        $ok <span style="color:#f92672">=</span> balanced_brackets($str);
        <span style="color:#66d9ef">return</span> $ok;
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">if</span> ( $str <span style="color:#f92672">~~</span> <span style="color:#e6db74">/\(|\)/</span> ) { <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>; }
        <span style="color:#66d9ef">else</span> { <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>; }
    }
}
</code></pre></div><p>In this case, I would think that a simple loop to remove the parentheses pairs would have been more natural and simpler that a recursive subroutine.</p>
<p>Note also that Burhhard is making a copy of the input parameter, because subroutine parameters are read-only by default. This is perfectly correct, but Raku offers some features making this simpler: you can use some traits (<code>is rw</code> or <code>is copy</code>) in the signature to make a parameter mutable or to make it a copy of the argument passed to the subroutine. So,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced_brackets</span> ($arg) {
    <span style="color:#66d9ef">my</span> $str <span style="color:#f92672">=</span> $arg;  <span style="color:#75715e"># Cannot assign to a read-only.</span>
</code></pre></div><p>could be replaced by something like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced_brackets</span> ($str is copy) {
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/colin-crain/raku/ch-2.p6">Colin Crain</a> used essentially the same technique of eliminating progressively all <code>()</code> pairs with a regex substitution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">validate</span> (Str:D $orig) {
    <span style="color:#66d9ef">my</span> $str <span style="color:#f92672">=</span> $orig;
    <span style="color:#66d9ef">unless</span> $str<span style="color:#f92672">.</span>chars %% 2 { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;IMBALANCED - odd number of parens&#34;</span>};

    <span style="color:#66d9ef">while</span> $str <span style="color:#f92672">~~</span> <span style="color:#e6db74">s/\((.*?)\)/$0/</span> { ; }

    <span style="color:#66d9ef">return</span> ($str<span style="color:#f92672">.</span>chars <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) ?? <span style="color:#e6db74">&#34;PARENS BALANCED&#34;</span> <span style="color:#f92672">!!</span> <span style="color:#e6db74">&#34;IMBALANCED - $str unmatched&#34;</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/roger-bell-west/raku/ch-2.p6">Roger Bell West</a> also used the same approach with regex substitutions to eliminate <code>()</code> pairs:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">while</span> ($s <span style="color:#f92672">~~</span> s:g<span style="color:#e6db74">/\(\)/</span><span style="color:#f92672">/</span>) {
}
<span style="color:#66d9ef">if</span> ($s) {
  say <span style="color:#e6db74">&#34;Invalid: $s&#34;</span>;
} <span style="color:#66d9ef">else</span> {
  say <span style="color:#e6db74">&#34;Valid.&#34;</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/ryan-thompson/raku/ch-2.p6">Ryan Thompson</a> also used a regex substitution to eliminate <code>()</code> pairs, and did it in a very concise manner:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">balanced</span>( Str $str is copy --&gt; Bool ) {
    Nil <span style="color:#66d9ef">while</span> $str <span style="color:#f92672">~~</span> s:g<span style="color:#e6db74">/&#39;()&#39;/</span><span style="color:#f92672">/</span>;
    $str<span style="color:#f92672">.</span>chars <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/jaldhar-h-vyas/raku/ch-2.p6">Jaldhar H. Vyas</a> used a stack, in spirit much similar to my second solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">isBalanced</span>(@brackets) {
    <span style="color:#66d9ef">my</span> @stack;
    (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..^</span> @brackets<span style="color:#f92672">.</span>elems)<span style="color:#f92672">.</span>map({
        <span style="color:#66d9ef">if</span> @brackets[$_] <span style="color:#f92672">~~</span> <span style="color:#e6db74">&#39;(&#39;</span> {
            @stack<span style="color:#f92672">.</span>push( <span style="color:#e6db74">&#39;(&#39;</span> );
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>@stack<span style="color:#f92672">.</span>elems {
                <span style="color:#66d9ef">return</span> False;
            }
            @stack<span style="color:#f92672">.</span>pop;
        }
    });
    <span style="color:#66d9ef">return</span> @stack<span style="color:#f92672">.</span>elems <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/javier-luque/raku/ch-2.p6">Javier Luque</a> used a counter:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">validate</span>-string(Str $word) {
    <span style="color:#66d9ef">my</span> $open_p;
    <span style="color:#66d9ef">for</span> $word<span style="color:#f92672">.</span>comb <span style="color:#f92672">-&gt;</span> $letter {
        $open_p<span style="color:#f92672">++</span> <span style="color:#66d9ef">if</span> ($letter <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;(&#39;</span>);
        $open_p<span style="color:#f92672">--</span> <span style="color:#66d9ef">if</span> ($letter <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;)&#39;</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> ($open_p <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>);
    }
    <span style="color:#66d9ef">return</span> ($open_p <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>);
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/ruben-westerberg/raku/ch-2.p6">Ruben Westerberg</a> built an array <code>@v</code> of counters and then checked that none of the counter was below 0 and that the last one was equal to 0:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">my</span> $maxLength<span style="color:#f92672">=</span>@<span style="color:#960050;background-color:#1e0010">*</span>ARGS[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">//</span><span style="color:#ae81ff">20</span>; <span style="color:#75715e">#If no max on command line use 20</span>
<span style="color:#66d9ef">while</span> <span style="color:#ae81ff">1</span> {
    <span style="color:#66d9ef">my</span> $str<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#75715e">#make a random length string of upto $maxLength long</span>
    $str<span style="color:#f92672">~=</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">.</span>rand()<span style="color:#f92672">+</span><span style="color:#ae81ff">40</span>)<span style="color:#f92672">.</span>round<span style="color:#f92672">.</span>chr <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$maxLength<span style="color:#f92672">.</span>rand<span style="color:#f92672">.</span>Int;
    <span style="color:#66d9ef">my</span> @v<span style="color:#f92672">=</span> [<span style="color:#f92672">\+</span>] $str<span style="color:#f92672">.</span>comb<span style="color:#f92672">.</span>map({(ord($_)<span style="color:#f92672">-</span><span style="color:#ae81ff">40</span>)<span style="color:#f92672">*-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>});

    <span style="color:#66d9ef">if</span> @v[<span style="color:#f92672">*-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> <span style="color:#f92672">!</span>@v<span style="color:#f92672">.</span>grep(<span style="color:#f92672">*</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
        put <span style="color:#e6db74">&#34;balanced: $str&#34;</span>;
        sleep <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">next</span>;
    }
    say <span style="color:#e6db74">&#34;unbalanced: $str&#34;</span>;
}
</code></pre></div><h2 id="see-also">SEE ALSO</h2>
<p>Not less than six blog posts (besides mine) this time:</p>
<ul>
<li>
<p>Arne Sommer: <a href="https://raku-musings.com/octal-brace.html;">https://raku-musings.com/octal-brace.html;</a></p>
</li>
<li>
<p>Burkhard Nickels: <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/burkhard-nickels/perl/ch-2.pod;">https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-042/burkhard-nickels/perl/ch-2.pod;</a></p>
</li>
<li>
<p>Jaldhar M. Vyas: <a href="https://www.braincells.com/perl/2020/01/perl_weekly_challenge_week_42.html;">https://www.braincells.com/perl/2020/01/perl_weekly_challenge_week_42.html;</a></p>
</li>
<li>
<p>Javier Luque: <a href="https://perlchallenges.wordpress.com/2020/01/06/perl-weekly-challenge-042/;">https://perlchallenges.wordpress.com/2020/01/06/perl-weekly-challenge-042/;</a></p>
</li>
<li>
<p>Ryan J. Thompson: <a href="http://www.ry.ca/2020/01/octal-representation/">http://www.ry.ca/2020/01/octal-representation/</a>.</p>
</li>
<li>
<p>Ryan J. Thompson: <a href="http://www.ry.ca/2020/01/balanced-parentheses/">http://www.ry.ca/2020/01/balanced-parentheses/</a>.</p>
</li>
</ul>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important (send me an e-mail or just raise an issue against this GitHub page).</p>
<p>If you want to participate to the Perl Weekly Challenge, please connect to <a href="https://perlweeklychallenge.org/">this site</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2024
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

