<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Advent Calendar - December 21, 2023"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/advent-calendar-2023-12-21/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Advent Calendar - December 21, 2023."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 21, 2023.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/advent-calendar-2023-12-21/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 21, 2023</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }

        
        .toggle-links {
            margin: 15px 0;
            padding-left: 15px;
        }
        .toggle-links a {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 20px;
            background-color: #4285f4;
            color: white !important;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .toggle-links a:hover {
            background-color: #3367d6;
        }
        .arrow-icon {
            margin-left: 8px;
            font-size: 1.1em;
        }

    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

    
    document.addEventListener('DOMContentLoaded', function() {
        
        const showMoreLinkGC = document.querySelector('.show-more-gc');
        const showLessLinkGC = document.querySelector('.show-less-gc');
        const hiddenLinksGC = document.querySelectorAll('.hidden-link-gc');

        showMoreLinkGC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksGC.forEach(link  => {
                link.style.display = 'list-item';
            });
            showMoreLinkGC.style.display = 'none';
            showLessLinkGC.style.display = 'inline-flex';
        });

        showLessLinkGC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksGC.forEach(link  => {
                link.style.display = 'none';
            });
            showLessLinkGC.style.display = 'none';
            showMoreLinkGC.style.display = 'inline-flex';
        });

        
        const showMoreLinkPWC = document.querySelector('.show-more-pwc');
        const showLessLinkPWC = document.querySelector('.show-less-pwc');
        const hiddenLinksPWC = document.querySelectorAll('.hidden-link-pwc');

        showMoreLinkPWC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksPWC.forEach(link  => {
                link.style.display = 'list-item';
            });
            showMoreLinkPWC.style.display = 'none';
            showLessLinkPWC.style.display = 'inline-flex';
        });

        showLessLinkPWC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksPWC.forEach(link  => {
                link.style.display = 'none';
            });
            showLessLinkPWC.style.display = 'none';
            showMoreLinkPWC.style.display = 'inline-flex';
        });
    });

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 21, 2023</h2>
                    <div class="portfolio-meta">
                        <span>Thursday, Dec 21, 2023</span>|
                        <span> Tags:
                            Perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/2023-12-21.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h2 id="advent-calendar-2023blogadvent-calendar-2023"><a href="/blog/advent-calendar-2023"><strong>Advent Calendar 2023</strong></a></h2>
<h3 id="-nbsp-day-20blogadvent-calendar-2023-12-20-nbsp--nbsp-day-21-nbsp--nbsp-day-22blogadvent-calendar-2023-12-22-nbsp-">|   <a href="/blog/advent-calendar-2023-12-20"><strong>Day 20</strong></a>   |   <strong>Day 21</strong>   |   <a href="/blog/advent-calendar-2023-12-22"><strong>Day 22</strong></a>   |</h3>
<hr>
<p>The gift is presented by <code>Yves Orton</code>. Today he is talking about his solution to <a href="/blog/perl-weekly-challenge-237"><strong>The Weekly Challenge - 237</strong></a>. This is re-produced for <code>Advent Calendar 2023</code> from the original <a href="https://github.com/demerphq/perlweeklychallenge-club/tree/master/challenge-237/demerphq#readme"><strong>post</strong></a>.</p>
<hr>
<br>
<h2 id="seize-the-day---simple-rules-the-day">Seize The Day - Simple Rules The Day</h2>
<hr>
<p>My solution was based on using <code>Time::Local</code> to compute the epoch for noon on the first day of the month, and then stepping forward by day until the required day of week has been found, and then stepping forward by week until the required repetition of that day has been found, or we ran off the end of the calender month. Using noon instead of midnight is IMO a prudent guard against issues related leap seconds, but probably isn&rsquo;t really necessary but doesn&rsquo;t hurt either.</p>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> Time::Local <span style="color:#e6db74">qw(timegm_posix)</span>;

<span style="color:#75715e"># Seize The Day</span>
<span style="color:#75715e">#</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">mday_for_week_dow</span> {
    <span style="color:#66d9ef">my</span> ($year_num, $month, $week, $dow)<span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> $time <span style="color:#f92672">=</span> timegm_posix( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">1</span>, $month, $year_num );
    <span style="color:#66d9ef">my</span> ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst);

    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
        ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)<span style="color:#f92672">=</span> gmtime($time);
        <span style="color:#66d9ef">last</span> <span style="color:#66d9ef">if</span> $wday <span style="color:#f92672">==</span> $dow;
        $time <span style="color:#f92672">+=</span> (<span style="color:#ae81ff">24</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>);
    }
    <span style="color:#66d9ef">for</span> (;$week;$week<span style="color:#f92672">--</span>) {
        ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)<span style="color:#f92672">=</span> gmtime($time);
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> $mon <span style="color:#f92672">!=</span> $month;
        $time <span style="color:#f92672">+=</span> (<span style="color:#ae81ff">24</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">7</span>;
    }
    <span style="color:#66d9ef">return</span> $mday<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
}

<span style="color:#66d9ef">my</span> @day_name<span style="color:#f92672">=</span> <span style="color:#e6db74">qw(Sun Mon Tue Wed Thu Fri Sat)</span>;
<span style="color:#66d9ef">my</span> @month_name<span style="color:#f92672">=</span> <span style="color:#e6db74">qw(Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec)</span>;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">num_suffix</span> {
    <span style="color:#66d9ef">my</span> ($n)<span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">return</span> $n <span style="color:#f92672">.</span> ($n <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> ? <span style="color:#e6db74">&#34;st&#34;</span> : $n <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> ? <span style="color:#e6db74">&#34;nd&#34;</span> : $n <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span> ? <span style="color:#e6db74">&#34;rd&#34;</span> : <span style="color:#e6db74">&#34;th&#34;</span>);
}

<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $tuple (
    [<span style="color:#ae81ff">2024</span>,  <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>],
    [<span style="color:#ae81ff">2025</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>],
    [<span style="color:#ae81ff">2026</span>,  <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">3</span>],

) {
    <span style="color:#66d9ef">my</span> ($year, $month, $week, $dow)<span style="color:#f92672">=</span> @$tuple;
    <span style="color:#66d9ef">my</span> $mday <span style="color:#f92672">=</span> mday_for_week_dow($year, $month<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, $week, $dow);
    printf <span style="color:#e6db74">&#34;The %s %s of %s %s %s\n&#34;</span>,
          num_suffix($week),
          $day_name[$dow],
          $year,
          $month_name[$month<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>],
          $mday ? <span style="color:#e6db74">&#34;is the &#34;</span><span style="color:#f92672">.</span>num_suffix($mday) : <span style="color:#e6db74">&#34;does not exist&#34;</span>;
}
</code></pre></div><br>
<h2 id="maximise-greatness---permutation-misdirection">Maximise Greatness - Permutation Misdirection</h2>
<hr>
<p><code>Task #2</code> is more difficult and IMO more interesting. The problem is stated as the following: <code>&quot;Maximise Greatness: You are given an array of integers. Write a script to permute the give[n] array such that you get the maximum possible greatness. To determine greatness, [count pairs that satisfy] nums[i] &lt; perm[i] where 0 &lt;= i &lt; nums.length&quot;</code>, and then gives the example of</p>
<pre><code>Input: @nums = (1, 3, 5, 2, 1, 3, 1)
Output: 4

One possible permutation: (2, 5, 1, 3, 3, 1, 1)
which returns 4 greatness as below:
nums[0] &lt; perm[0]
nums[1] &lt; perm[1]
nums[3] &lt; perm[3]
nums[4] &lt; perm[4]
</code></pre>
<br>
<p>I think this is a fun little problem and a good example of the kind of problem that gets posed in the perl-weekly challenge. Simple input, simple output, simple description, but a deeper problem than it might seem at first blush.</p>
<p>The reason I say deeper is that way the problem is stated it makes it seem like we need to compute a permutation, and that the solution to the problem might be <code>O(N!)</code> or <code>O(N**2)</code>. But on closer inspection we can see that we need not compute a permutation at all, and we only need to do so if we want to visually debug that our answer is correct. It actually turns out that all we need to do is find the count of the most frequently occuring number in the array. The maximum greatness will be the number of elements in the array minus the count of the most frequently occuring element in the array.</p>
<p>A complete proof of this is a bit beyond this document. But we can get the general idea by considering a sorted array. Lets say we have an array with duplicates, such that <code>A[0] &lt; A[1] &lt; A[2] ... &lt; A[n-1]</code>. It is obvious that the maximum element in the array is the only one that cannot be paired with something larger than it. We can view this as a rotation of the array:</p>
<br>
<pre><code>| 1, 2, 3 |
| 2, 3, 1 | &lt;- rotate left by 1.
| X  X    | &lt;- Which columns satisfy the constraint
</code></pre>
<br>
<p>In this case it is obvious that the maximum greatness is 1 less than number of elements in the array, and 1 is the count of the most frequently occuring element. If we then duplicate one of the elements and we rotate the array by different numbers of elements we can see maximum is the same regardless of which element is duplicated, and that the rotating any more than the number of duplicates causes the number of pairs that satisify the constraint to reduce.</p>
<br>
<pre><code>| 1, 1, 2, 3 | 1, 2, 2, 3 | 1, 2, 3, 3 |
| 1, 2, 3, 1 | 2, 2, 3, 1 | 2, 3, 3, 1 | &lt;- rotate 1
| X  X       | X     X    | X  X       |

| 1, 1, 2, 3 | 1, 2, 2, 3 | 1, 2, 3, 3 |
| 2, 3, 1, 1 | 2, 3, 1, 2 | 3, 3, 1, 2 | &lt;- rotate 2
| X  X       | X  X       | X  X       |

| 1, 1, 2, 3 | 1, 2, 2, 3 | 1, 2, 3, 3 |
| 3, 1, 1, 2 | 3, 1, 2, 2 | 3, 1, 2, 3 | &lt;- rotate 3
| X          | X          | X          |
</code></pre>
<br>
<p>The same pattern holds if the array contains two sets of duplicated numbers, the maximum number of pairs is found when the rotation matches the count of the most frequently repeated element:</p>
<br>
<pre><code>| 1, 1, 2, 2, 3 | 1, 2, 2, 3, 3 | 1, 1, 2, 3, 3 |
| 1, 2, 2, 3, 1 | 2, 2, 3, 3, 1 | 1, 2, 3, 3, 1 | &lt;- rotate left by 1
  X  X          | X     X       |    X  X       |

| 1, 1, 2, 2, 3 | 1, 2, 2, 3, 3 | 1, 1, 2, 3, 3 |
| 2, 2, 3, 1, 1 | 2, 3, 3, 1, 2 | 2, 3, 3, 1, 1 | &lt;- rotate left by 2
| X  X  X       | X  X  X       | X  X  X       |

| 1, 1, 2, 2, 3 | 1, 2, 2, 3, 3 | 1, 1, 2, 3, 3 |
| 2, 3, 1, 1, 2 | 3, 3, 1, 2, 2 | 3, 3, 1, 1, 2 | &lt;- rotate left by 3
| X  X          | X  X          | X  X          |
</code></pre>
<br>
<p>And lastly consider what happens when we have <code>1 unique element</code>, <code>1 pair</code>, and <code>1 triplicate</code>:</p>
<br>
<pre><code>| 1, 2, 2, 3, 3, 3 | 1, 1, 2, 2, 2, 3 | 1, 1, 1, 2, 3, 3 |
| 2, 2, 3, 3, 3, 1 | 1, 2, 2, 2, 3, 1 | 1, 1, 2, 3, 3, 1 | &lt;- rotate 1
| X     X          |    X        X    |       X  X       |

| 1, 2, 2, 3, 3, 3 | 1, 1, 2, 2, 2, 3 | 1, 1, 1, 2, 3, 3 |
| 2, 3, 3, 3, 1, 2 | 2, 2, 2, 3, 1, 1 | 1, 2, 3, 3, 1, 1 | &lt;- rotate 2
| X  X  X          | X  X     X       |    X  X  X       |

| 1, 2, 2, 3, 3, 3 | 1, 1, 2, 2, 2, 3 | 1, 1, 1, 2, 3, 3 |
| 3, 3, 3, 1, 2, 2 | 2, 2, 3, 1, 1, 2 | 2, 3, 3, 1, 1, 1 | &lt;- rotate 3
| X  X  X          | X  X  X          | X  X  X          |

| 1, 2, 2, 3, 3, 3 | 1, 1, 2, 2, 2, 3 | 1, 1, 1, 2, 3, 3 |
| 3, 3, 1, 2, 2, 3 | 2, 3, 1, 1, 2, 2 | 3, 3, 1, 1, 1, 2 | &lt;- rotate 4
| X  X             | X  X             | X  X             |
</code></pre>
<br>
<p>In each case we can see that the maximum greatness is determined only by the number of elements in the array and the count of the most frequent element. Note, that there may actually be two rotations of a sorted array that produce the maximum greatness, that of the count of the most frequent element, and that of the count of the second most frequent element. If the counts differ then there will be two possible rotations that give the maximum greatness.</p>
<p>The last point to observe is that if we must produce a permutation that would produce the maximum greatness then we can produce an array <code>S</code> of the indexes of the input array such that <code>A[S[i]] &lt;= A[S[i+1]]</code>. We can then solve for the sorted array by rotating it left by the count of the most frequent element, and then use <code>S</code> to <code>map</code> the solution into the appropriate order for the actual input array.</p>
<p>Thus if we are to compute the maximum greatness alone we can do so in <code>O(N)</code> steps. If we are to produce a permutation of the input array would produce that maximum greatness we can do so in <code>O(N log2 N)</code> steps.</p>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;

<span style="color:#75715e"># Maximum greatness. Given an array of integers compute</span>
<span style="color:#75715e"># the maximum number of pairs that satisfy $A[$i] &lt; $A[$j]</span>
<span style="color:#75715e"># where each possible value of $i and $j is used only once.</span>
<span style="color:#75715e"># If $permute is passed in then treat it as an array ref</span>
<span style="color:#75715e"># which is to be populated with the permutation of $array</span>
<span style="color:#75715e"># that would produce that maximum number of pairs.</span>

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">maximum_greatness</span> {
    <span style="color:#66d9ef">my</span> ($array, $permute) <span style="color:#f92672">=</span> @_;

    <span style="color:#75715e"># Compute the number of occurrences of each unique value, keeping</span>
    <span style="color:#75715e"># track of the maximum number of occurrences. If the array was large</span>
    <span style="color:#75715e"># and the number of duplicates high we might get better performance</span>
    <span style="color:#75715e"># by doing two loops, first over the array itself, and then over the</span>
    <span style="color:#75715e"># values in the result. But for arrays with few or no duplicated</span>
    <span style="color:#75715e"># values this will be faster.</span>

    <span style="color:#66d9ef">my</span> %seen;
    <span style="color:#66d9ef">my</span> $max <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    $seen{$value}<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> @$array;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $value (@$array) {
        <span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> <span style="color:#f92672">++</span>$seen{$value};
        $max <span style="color:#f92672">=</span> $count <span style="color:#66d9ef">if</span> $max <span style="color:#f92672">&lt;</span> $count;
    }

    <span style="color:#66d9ef">if</span> ($permute) {
        <span style="color:#75715e"># they have asked us to compute the permutation</span>
        <span style="color:#75715e"># as the count, so we have to sort the array.</span>

        <span style="color:#75715e"># sort the indexes into the original array, not</span>
        <span style="color:#75715e"># the array itself so we can use it to populate</span>
        <span style="color:#75715e"># $permute as well as read from $array.</span>
        <span style="color:#66d9ef">my</span> @sorted_idx <span style="color:#f92672">=</span> sort {
                            $array<span style="color:#f92672">-&gt;</span>[$a] <span style="color:#e6db74">&lt;=&gt;</span> $array<span style="color:#f92672">-&gt;</span>[$b] <span style="color:#f92672">||</span>
                            $a <span style="color:#e6db74">&lt;=&gt;</span> $b
                        } <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#$array;

        <span style="color:#75715e"># now compute the permutation</span>
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#$array) {
            <span style="color:#66d9ef">my</span> $next <span style="color:#f92672">=</span> ($i <span style="color:#f92672">+</span> $max) % <span style="color:#960050;background-color:#1e0010">@$</span>array;
            $permute<span style="color:#f92672">-&gt;</span>[$sorted_idx[$i]] <span style="color:#f92672">=</span> $array<span style="color:#f92672">-&gt;</span>[$sorted_idx[$next]];
        }
    }

    <span style="color:#66d9ef">return</span> @$array <span style="color:#f92672">-</span> $max;
}


<span style="color:#66d9ef">use</span> Test::More;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $tuple (
    [ <span style="color:#ae81ff">4</span>, [ <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span> ],
         [ <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span> ] ],
    [ <span style="color:#ae81ff">5</span>, [ <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span> ],
         [ <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span> ]],
    [ <span style="color:#ae81ff">4</span>, [ <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span> ],
         [ <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span> ] ],
    [ <span style="color:#ae81ff">3</span>, [  <span style="color:#ae81ff">55</span>, <span style="color:#ae81ff">22</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">10</span> ],
         [ <span style="color:#f92672">-</span><span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">55</span>,  <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">22</span> ] ],
) {
    <span style="color:#66d9ef">my</span> ($want, $array, $want_permute)<span style="color:#f92672">=</span> @$tuple;
    <span style="color:#66d9ef">my</span> $permute <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
    <span style="color:#66d9ef">my</span> $count <span style="color:#f92672">=</span> maximum_greatness($array, $permute);
    is($count, $want, <span style="color:#e6db74">&#34;Array   [@$array] count should be $want&#34;</span>);
    is(<span style="color:#e6db74">&#34;@$permute&#34;</span>, <span style="color:#e6db74">&#34;@$want_permute&#34;</span>, <span style="color:#e6db74">&#34;Permute [@$want_permute]&#34;</span>)
        <span style="color:#66d9ef">if</span> $permute;
}
done_testing();
</code></pre></div><hr>
<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>
<p>|   <a href="/blog/advent-calendar-2023"><strong>Advent Calendar 2023</strong></a>   |</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

