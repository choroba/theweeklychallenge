<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="Andrew Shitov Weekly Review: Challenge - 077"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/blog/p6-review-challenge-077/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="Andrew Shitov Weekly Review: Challenge - #077."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Andrew Shitov Weekly Review: Challenge - #077.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <link rel="me" href="https://fosstodon.org/@manwar">
    <link rel="canonical" href="https://theweeklychallenge.org/blog/p6-review-challenge-077/" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Andrew Shitov Weekly Review: Challenge - 077</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }

        
        .toggle-links {
            margin: 15px 0;
            padding-left: 15px;
        }
        .toggle-links a {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 20px;
            background-color: #4285f4;
            color: white !important;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .toggle-links a:hover {
            background-color: #3367d6;
        }
        .arrow-icon {
            margin-left: 8px;
            font-size: 1.1em;
        }

    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

    
    document.addEventListener('DOMContentLoaded', function() {
        
        const showMoreLinkGC = document.querySelector('.show-more-gc');
        const showLessLinkGC = document.querySelector('.show-less-gc');
        const hiddenLinksGC = document.querySelectorAll('.hidden-link-gc');

        showMoreLinkGC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksGC.forEach(link  => {
                link.style.display = 'list-item';
            });
            showMoreLinkGC.style.display = 'none';
            showLessLinkGC.style.display = 'inline-flex';
        });

        showLessLinkGC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksGC.forEach(link  => {
                link.style.display = 'none';
            });
            showLessLinkGC.style.display = 'none';
            showMoreLinkGC.style.display = 'inline-flex';
        });

        
        const showMoreLinkPWC = document.querySelector('.show-more-pwc');
        const showLessLinkPWC = document.querySelector('.show-less-pwc');
        const hiddenLinksPWC = document.querySelectorAll('.hidden-link-pwc');

        showMoreLinkPWC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksPWC.forEach(link  => {
                link.style.display = 'list-item';
            });
            showMoreLinkPWC.style.display = 'none';
            showLessLinkPWC.style.display = 'inline-flex';
        });

        showLessLinkPWC.addEventListener('click', function(e) {
            e.preventDefault();
            hiddenLinksPWC.forEach(link  => {
                link.style.display = 'none';
            });
            showLessLinkPWC.style.display = 'none';
            showMoreLinkPWC.style.display = 'inline-flex';
        });
    });

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>

                    <button class="navbar-toggler d-lg-none"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navigation"
                            aria-controls="navigation"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Andrew Shitov Weekly Review: Challenge - 077</h2>
                    <div class="portfolio-meta">
                        <span>Sunday, Sep 20, 2020</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/p6-review-challenge-077.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:andy@shitov.ru"><img src="/images/blog/Email.svg" height="50" width="50"> Email</a> › Email me (Andrew) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="/images/blog/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="/images/blog/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<hr>
<br>
<p>Welcome to the <strong>Raku Review</strong> for <strong>Week 077</strong> of <strong>The Weekly Challenge!</strong>. For a quick overview, go through the <a href="/blog/perl-weekly-challenge-077/"><strong>original tasks</strong></a> and <a href="/blog/recap-challenge-077/"><strong>recap</strong></a> of the weekly challenge.</p>
<br>
<p>The tasks this week required some additional thinking before the actual implementation. The first task, in particular, can be solved in just a few lines of code. But let’s move on directly to them.</p>
<h2 id="task-1-fibonacci-sum">Task 1. Fibonacci Sum</h2>
<p>In this task, we need to find the combinations of non-repeating Fibonacci numbers that add up to the given number <code>$N</code>. In the ‘official’ Fibonacci sequence, there are only two equal items; those are 1 and 1 at the very beginning of it. So, it is quite practical to use a shifted sequence that starts with 1, 2.</p>
<p>Most of the participants employed the <a href="https://docs.raku.org/routine/...">sequence operator</a> of Raku to generate Fibonacci numbers below and including <code>$N</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> @fib <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#f92672">*</span> <span style="color:#f92672">+</span> <span style="color:#f92672">*</span> <span style="color:#f92672">...^</span> <span style="color:#f92672">*</span> <span style="color:#f92672">&gt;</span> $N;
</code></pre></div><p>The next steps fall into two groups.</p>
<p>In the first, brute force is applied to find the valid result by filtering all the combinations that you can make with the given list of Fibonacci numbers. For example, a self-explanatory code in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/laurent-rosenfeld/raku/ch-1.raku#L6">Laurent Rosenfeld’s program</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">for</span> @fib<span style="color:#f92672">.</span>combinations <span style="color:#f92672">-&gt;</span> $s {
        say $s <span style="color:#66d9ef">if</span> $n <span style="color:#f92672">==</span> [<span style="color:#f92672">+</span>] $s;
    }
</code></pre></div><p>In <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/colin-crain/raku/ch-1.raku#L46">Colin Crane’s solution</a>, there’s an exciting addition to speed up the computations:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">my</span> @output <span style="color:#f92672">=</span> @fib<span style="color:#f92672">.</span>combinations<span style="color:#f92672">.</span>race:8degree:200batch<span style="color:#f92672">.</span>grep( <span style="color:#f92672">*.</span>sum <span style="color:#f92672">==</span> $target );
</code></pre></div><p>The <a href="https://docs.raku.org/routine/race"><code>race</code> method</a> together with its <code>degree</code> and <code>batch</code> parameters instructs the compiler to perform operations in parallel.</p>
<p>A more traditional method call can replace the non-standard syntax with colons:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    @fib<span style="color:#f92672">.</span>combinations<span style="color:#f92672">.</span>race(degree <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">8</span>, batch <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">200</span>)
</code></pre></div><p>The second approach is to build the representation of the number directly, and there is some theoretical support to that via the so-called <a href="https://encyclopediaofmath.org/wiki/Zeckendorf_representation">Zeckendorf representation</a>.</p>
<p>For example, for the input number 1001, the biggest Fibonacci number is 987, so we take it. The remainder is 14, for which the biggest Fibonacci number is 13. So, 1001 equals 987 + 13 + 1, and it is the shortest sum. To get all possible representations of the original number, you need to repeat the procedure for all of the numbers 987, 13, and 1 and take only those combinations where you have no repeated numbers.</p>
<p>Markus Holzer did an incredible job to not only implement the algorithm but also to make it extremely fast. <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/markus-holzer/raku/ch-1.raku">His program</a> finds the result for a big enough number 123456789 within 10 seconds, which is an unbeatable result among the other solutions.</p>
<h3 id="additional-reading">Additional reading</h3>
<ul>
<li><a href="https://docs.raku.org/routine/...">The sequence operator <code>...</code></a></li>
<li><a href="https://docs.raku.org/routine/race">Raku documentation on <code>race</code></a></li>
<li><a href="https://docs.raku.org/routine/hyper">Raku documentation on <code>hyper</code></a></li>
<li><a href="https://encyclopediaofmath.org/wiki/Zeckendorf_representation">Zeckendorf representation</a></li>
</ul>
<h3 id="video-review">Video review</h3>
<p>The full review of Task 1 is available on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/SI_E465aZ0k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps for quick access to the review of each solution.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=97s">01:37</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=393s">06:33</a> - Feng Chang</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=600s">10:00</a> - Jason Messer</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=925s">15:25</a> - Jan Krnavek</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=1198s">19:58</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=1470s">24:30</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2180s">36:20</a> - P6steve</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2272s">37:52</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2348s">39:08</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2413s">40:13</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2736s">45:36</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2898s">48:18</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=2952s">49:12</a> - Mohammad S Anwar</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=3076s">51:16</a> - Myoungjin Jeon</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=3140s">52:20</a> - Roger Bell_West</li>
<li><a href="https://www.youtube.com/watch?v=SI_E465aZ0k&amp;t=3216s">53:36</a> - Ulrich Rieke</li>
</ul>
<h2 id="task-2-lonely-x">Task 2. Lonely X</h2>
<p>In the second task, for the given matrix, each cell of which only keeps <code>X</code> or <code>O</code>, we need to find the so-called lonely <code>X</code>s which are surrounded only by <code>O</code>s.</p>
<p>The general approach is to scan the source matrix so that we visit all of its cells, and then to visit all the neighbours that surround the cell. As a lonely <code>X</code> can appear on the border or in the corner, you should ignore the missing neighbours.</p>
<p>A straightforward pair of nested loops can be used to scan the cells. As in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/arne-sommer/raku/ch-2.p6#L17">Arne Sommer&rsquo;s solution</a>, for example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$rows <span style="color:#f92672">-&gt;</span> $row
    {
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">^</span>$cols <span style="color:#f92672">-&gt;</span> $col
        {
            <span style="color:#f92672">.</span> <span style="color:#f92672">.</span> <span style="color:#f92672">.</span>
            $is_lonely<span style="color:#f92672">++</span> <span style="color:#66d9ef">if</span> is_lonely(@matrix, $row, $col);
        }
    }
</code></pre></div><p>Visiting the neighbours is equivalent to <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/arne-sommer/raku/ch-2.p6#L32">changing one or both</a> of the coordinates to <code>±1</code> and checking the contents of the cell:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">for</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>) <span style="color:#f92672">-&gt;</span> $r
    {
        <span style="color:#66d9ef">for</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>) <span style="color:#f92672">-&gt;</span> $c
        {
            <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">if</span> $r <span style="color:#f92672">==</span> $c <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
            <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">unless</span> @matrix[$row <span style="color:#f92672">+</span> $r][$col <span style="color:#f92672">+</span> $c]<span style="color:#f92672">.</span>defined;

            <span style="color:#66d9ef">return</span> False <span style="color:#66d9ef">if</span> @matrix[$row <span style="color:#f92672">+</span> $r][$col <span style="color:#f92672">+</span> $c] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;X&#39;</span>;
        }
    }
</code></pre></div><p>A very attractive and useful feature of Raku that help to simplify the code is a <a href="https://docs.raku.org/type/Junction">junction</a>. There are different forms of it, in particular, the <code>any</code>- and <code>all</code>-junctions. Just look at the <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/feng-chang/raku/ch-2.raku#L15">program submitted by Feng Chang</a> to see the advantage immediately:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$rows <span style="color:#f92672">-&gt;</span> $i {
        <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$width <span style="color:#f92672">-&gt;</span> $j {
            <span style="color:#66d9ef">my</span> $junc <span style="color:#f92672">=</span> all(@a[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], @a[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;$j], @a[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;$j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>],
                        @a[$i;$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>],                @a[$i;$j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>],
                        @a[$i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], @a[$i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;$j], @a[$i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;$j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]
                    );
            <span style="color:#f92672">++</span>$cnt <span style="color:#66d9ef">if</span> @a[$i;$j] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;X&#39;</span> <span style="color:#f92672">and</span> $junc <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;O&#39;</span>;
        }
    }
</code></pre></div><p>In the body of the inner loop, the <code>$junc</code> variable encloses all eight neighbours in a single variable, which is later compared with the value: <code>$junc eq 'O'</code>.</p>
<p>In the same solution, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/feng-chang/raku/ch-2.raku#L5">we can also see</a> a step to prepare the input data to surround the whole matrix with ‘good neighbours‘:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    @a<span style="color:#f92672">.</span>push($line<span style="color:#f92672">.</span>comb<span style="color:#f92672">.</span>Array<span style="color:#f92672">.</span>unshift(<span style="color:#e6db74">&#39;O&#39;</span>)<span style="color:#f92672">.</span>push(<span style="color:#e6db74">&#39;O&#39;</span>));

    <span style="color:#f92672">.</span> <span style="color:#f92672">.</span> <span style="color:#f92672">.</span>

    @a<span style="color:#f92672">.</span>unshift([<span style="color:#e6db74">&#39;O&#39;</span> xx $width <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>]);
    @a<span style="color:#f92672">.</span>push([<span style="color:#e6db74">&#39;O&#39;</span> xx $width <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>]);
</code></pre></div><p>By doing that, you do not have to check if the neighbour exists when visiting it.</p>
<p>But checking if we are withing the borders is another delightful small task that you can solve differently. For example, <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/mark-anderson/raku/ch-2.raku#L14">Mark Anderson uses</a> the defined-or operator <code>//</code> to substitute an empty string for the non-existing cells:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    take [$r, $c] <span style="color:#66d9ef">unless</span> any((@matrix[$r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][$c<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][$c  ] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][$c<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r  ][$c<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r  ][$c<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][$c<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][$c  ] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>),
                             (@matrix[$r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][$c<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#e6db74">//</span> <span style="color:#e6db74">q{}</span>)) <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;X&#34;</span>;
</code></pre></div><p>(Also don’t miss the use of the <code>any</code>-junction.)</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/markus-holzer/raku/ch-2.raku#L12">Markus Holzer uses</a> <code>andthen</code> to go on only with defined cells:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    $matrix[ $x <span style="color:#f92672">+</span> $c[<span style="color:#ae81ff">0</span>]; $y <span style="color:#f92672">+</span> $c[<span style="color:#ae81ff">1</span>] ] andthen $_ <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;X&#34;</span>
</code></pre></div><p>To build the ‘guest map’ of the local neighbours, we can use different tricks. <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/shahed-nooshmand/raku/ch-2.raku">For example</a>, the following construct gives the deltas such as (-1, 1) or (0, 1) that you can add to the coordinates of the current cell:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> X <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>Of course, nobody stops you from <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/markus-holzer/raku/ch-2.raku#L9">hard-coding the list</a> of relative coordinates:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    state @maybe<span style="color:#f92672">-</span>neighbours <span style="color:#f92672">=</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>);
</code></pre></div><p>When computing the absolute coordinates, you can even <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-077/ash/raku/ch-2.raku#L24">use it</a> with a cute <a href="https://docs.raku.org/language/operators#Hyper_operators">hyper-operator</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">    @neighbours<span style="color:#f92672">.</span>map(<span style="color:#f92672">*</span> <span style="color:#e6db74">&lt;&lt;+&gt;</span><span style="color:#f92672">&gt;</span> @coord))
</code></pre></div><h3 id="additional-reading-1">Additional reading</h3>
<ul>
<li><a href="https://andrewshitov.com/2020/09/18/the-pearls-of-raku-issue-12-all-and-any/">The Pearls of Raku, Issue 12: all and any</a></li>
<li><a href="https://docs.raku.org/routine/andthen">More about <code>andthen</code> in the documentation</a></li>
</ul>
<h3 id="video-review-1">Video review</h3>
<p>There are much more smart coding bits that the participants used in their solutions. Enjoy the full review on YouTube.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sZvG6HWCkeY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps to the reviews of the individual solutions:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=73s">01:13</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=350s">05:50</a> - Feng Chang</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=684s">11:24</a> - Jason Messer</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=1014s">16:54</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=1206s">20:06</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=1742s">29:02</a> - P6steve</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=2089s">34:49</a> - Shahed Nooshmand</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=2257s">37:37</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=2628s">43:48</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=2865s">47:45</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=3291s">54:51</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=3484s">58:04</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=3628s">1:00:28</a> - Mohammad S Anwar</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=4030s">1:07:10</a> - Myoungjin Jeon</li>
<li><a href="https://www.youtube.com/watch?v=sZvG6HWCkeY&amp;t=4287s">1:11:27</a> - Roger Bell_West</li>
</ul>
<br>
<hr>
<h2 id="blogs">BLOGS</h2>
<hr>
<br>
<h4 id="andrew-shitov-blog-1httpsandrewshitovcom20200907add-up-fibonacci-numbers-the-weekly-challenge-77-task-1-and-blog-2httpsandrewshitovcom20200908lonely-x-the-weekly-challenge-77-task-2">Andrew Shitov <a href="https://andrewshitov.com/2020/09/07/add-up-fibonacci-numbers-the-weekly-challenge-77-task-1/">BLOG #1</a> and <a href="https://andrewshitov.com/2020/09/08/lonely-x-the-weekly-challenge-77-task-2/">BLOG #2</a></h4>
<h4 id="arne-sommerhttpsraku-musingscomlonely-sumhtml-colin-crainhttpscolincrainwordpresscom20200912all-those-pasta-lies-led-to-a-lonely-ex-laurent-rosenfeldhttpblogsperlorguserslaurent_r202009perl-weekly-challenge-fibonacci-sum-and-lonely-xhtml-mohammad-s-anwarhttpsperlweeklychallengeorgblogweekly-challenge-077-roger-bell_westhttpsblogfiredrakeorgarchive202009perl_weekly_challenge_77__fibonacci_sum_and_lonely_xhtml-and-shahed-nooshmandhttpsrafraichissoir20200910pwc-77"><a href="https://raku-musings.com/lonely-sum.html">Arne Sommer</a>, <a href="https://colincrain.wordpress.com/2020/09/12/all-those-pasta-lies-led-to-a-lonely-ex/">Colin Crain</a>, <a href="http://blogs.perl.org/users/laurent_r/2020/09/perl-weekly-challenge-fibonacci-sum-and-lonely-x.html">Laurent Rosenfeld</a>, <a href="https://perlweeklychallenge.org/blog/weekly-challenge-077/">Mohammad S Anwar</a>, <a href="https://blog.firedrake.org/archive/2020/09/Perl_Weekly_Challenge_77__Fibonacci_Sum_and_Lonely_X.html">Roger Bell_West</a> and <a href="https://rafraichisso.ir/2020/09/10/pwc-77">Shahed Nooshmand</a>.</h4>
<br>
<p>If you want to participate in <strong>The Weekly Challenge</strong>, please contact us at <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="mailto:mohammad.anwar@yahoo.com" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2025
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jquery/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CJTPYM9SB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJTPYM9SB8');
</script>
</body>

</html>

